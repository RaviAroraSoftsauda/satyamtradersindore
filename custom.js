var glbidx;
var glbidxsize;
var lstidx;
var glbitidx =1;

$(document).ready(function () {
getsingle();
getcombo();

if($('#alltagselected').val()!=undefined){
    var multi = $('#alltagselected').val();
    var substrres = multi.replace(/ /g,',');
    var array =[substrres].join(',').split(',');
    $('#allocated_tags').val(array).trigger('change');
}


});
function hideSelect2Keyboard(e){
    $('.select2-search input, :focus,input').prop('focus',false).blur();
}
$(document).ready(function(){
   
})
$(document).ready(function () {

    // $('.select2wcheck').select2MultiCheckboxes({
    //     templateSelection: function(selected, total) {
    //       return "Selected " + selected.length + " of " + total;
    //     }
    //   })
    
    $('#searchmenu').on('change', function(){   
        var val = this.value;
        var link = '';
        var addresss = $('#query option').filter(function(counter,option){
            if(option.value.toUpperCase() == val.toUpperCase()){
                link =  $(this).attr('data-address');
            }
        })
        window.location.href = link;
    });

    $('.search-form').on('submit', function(event){   
        event.preventDefault();
    });
  
    $('#product_detail_table tfoot th').not('.excludesearch').each(function () {
		var title = $(this).text();
        $(this).html('<input type="text"  class="form-control resizing-input" placeholder="Search " autocomplete="false" />');
        function resizeInput() {

           var content =
                $(this).val().length > 0 ? $(this).val() : $(this).prop("placeholder").length;
           var widthTester = $("<span>"+content+"</span>").hide();
        
             widthTester.insertAfter($(this));
        
             $(this).css("width",widthTester.width()+"px");
        
            //Remove the element from the DOM
            widthTester.remove();
         }
        
         $('.resizing-input').focusout(resizeInput).each(resizeInput);
	});

     // moving tfoot below head th row
     $('#product_detail_table tfoot').insertBefore('#product_detail_table thead');

     $('#product_detail_table2 tfoot th').not('.excludesearch').each(function () {
		var title = $(this).text();
		$(this).html('<input type="text" class="form-control" placeholder="Search ' + title + '" autocomplete="false" />');
	});

     // moving tfoot below head th row
     $('#product_detail_table2 tfoot').insertBefore('#product_detail_table2 thead');

    var table;
    table = jQuery('.product_detail_table').DataTable({
        // "dom": "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
        "dom": "<'row'<'col-md-4 col-sm-12 col-xs-12'B><'col-md-4 col-sm-6 col-xs-12'l><'col-md-4 col-sm-6 col-xs-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
        "lengthChange": true,
                "colReorder": true,
                // "ajax": "",
                "buttons": [
                    {
                        extend: 'excel',
                        className: 'btn-default btn-excel'
                    },
                    {
                        extend: 'pdf',
                        className: 'btn-default btn-pdf'
                    },
                    {
                        extend: 'print',
                        className: 'btn-default btn-print'
                    },
                ],
                "columnDefs": [
                    {
                        "className": "actioncell",
                        "orderable": false,
                        "searchable": false,
                        "sortable": false,
                        "targets": [0]
                    }
                ],
        "order": [ 1, 'asc' ],
        initComplete: function () {
            var api = this.api();

            // Apply the search
            api.columns().every(function () {
                var that = this;

                $('input', this.footer()).on('keyup change', function () {
                    if (that.search() !== this.value) {
                        that
                            .column($(this).parent().index()+':visible')
                            .search(this.value)
                            .draw();
                    }
                });
            });
        }
    });

 




    // $('.paymentsubmit').click(function(event){
    //     event.preventDefault();
    //     $('.pereceivedamount').each(function(){
    //         if($(this).val() == NaN || $(this).val() == undefined || $(this).val() == '' || $(this).val() == null){
    //             $(this).parents('tr').remove();
    //             var vcode = $(this).attr('data-vcode');
    //             $('#expence_detail' + vcode).remove();
    //         }
    //     })
    //     var action = $(this).attr('data-action');
    //     $('#printormessage').val(action);
    //     $(this).parents('form').trigger('submit');
    // })

    $('.submitn').click(function(event){
        event.preventDefault();
        var action = $(this).attr('data-act');
        // alert(action);
        $('#printormessage').val(action);
        $('.submitn').removeClass('activeevent');
        $(this).addClass('activeevent');
    })

    $('.animatescroll').click(function(){
        var href = $(this).attr('href');
        var pos = $(href).offset();
        $("html, body").animate({ scrollTop: pos.top }, 1000);
    })

});
var tablename;

function basicdatatable(table){
    $('.adsearch tbody').off();
    tablename = jQuery(table).DataTable({
         // "dom": "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
         "dom": "<'row'<'col-md-4 col-sm-12 col-xs-12'B><'col-md-4 col-sm-6 col-xs-12'l><'col-md-4 col-sm-6 col-xs-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
         "lengthChange": true,
         "processing": false,
         "serverSide": false,
         "colReoder":true,
         "buttons": [
             {
                 extend: 'excel',
                 className: 'btn-default btn-excel',
                 exportOptions: {
                     columns: "thead th:not(.noExport)"
                 }
             },
             {
                 extend: 'pdf',
                 className: 'btn-default btn-pdf',
                 exportOptions: {
                     modifier: {
                         page: 'current'
                     },
                     columns: "thead th:not(.noExport)"
                 },
                 orientation:'landscape',
                 customize: function ( doc ) {
                     // Splice the image in after the header, but before the table
                     doc.content.splice( 0, 0, {
                         margin: [ 0, 0, 0, 12 ],
                         alignment: 'center',
                         // image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA9lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wUmlnaHRzPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvcmlnaHRzLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxN2FlYzk4Yy0zMjgzLTExZGEtYTIzOC1lM2UyZmFmNmU5NjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUYzODU5RTYxNDNCMTFFNTlBNjVCOTY4NjAwQzY5QkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUYzODU5RTUxNDNCMTFFNTlBNjVCOTY4NjAwQzY5QkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODgwMTE3NDA3MjA2ODExOTJCMDk2REE0QTA5NjJFNCIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjE3YWVjOThjLTMyODMtMTFkYS1hMjM4LWUzZTJmYWY2ZTk2OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu9vBW8AADRxSURBVHja3H0JmFxXdea79y21967uVi+SbLXUkiVZso2NZWJjsyQEAsYZlnHIJCyZJPARMsnnyZedBJjJB5kMA5kQCAkhkECCweAVbxjvtmRsy7YWS+puLb13V3fXvrzl3jnn3HtfVRsbwsQ2JKXncnUtr97731n+s9xTTEpp/bhvQRDU6dZoNHzfD8PIsiS3bc91E8lkOpVKp9Oe5/3Yj9N5+b8SLs/KyurCwvzM7Ozc3Nzi4tLKykqxWKxWa00AK/CjSEgpGAO4uOclUqlkLpvr7u7u798wPDK8aXTT6OjowEC/bdv/YcECOCYnJ48de/b4ieOnT51ZWFhYKxSq1Wqz2QTJiqJImlv8EcYY3HP4HwfgbMdxQL4ymUxvb+/o6MjOnTv37du7e/fugf7+l+cU2EuthuVy5eixo48//vjTTz8zNTm1uLRUKpUAIIWOQiS+vZAkqvv29wN2rutms9mhoaHzz99zxeWX799/aV9f379XsE6fPvPIo488+uiBY8eOgcKBZIE9QknhvB0dif/gJuBmSaH+tFgMC1eb+vP7seModE4mk968edNP/dRP/dyb3nTBBfv+PYEF6Nzz3e8+/PAjJ06cWFpaBssNT4IsxAAJEUVhEEZgniIAx2KObSc4T9g8wbjHLBuQQfRkIIUvREPIBrgBxgSpo8vhPQz31q65gBroaU9Pz6WXvvKd73jHlVe++oVE9ScFrBMnTt5xxx33P/DA8eMn8vk8GCM4OSVK8EVhCOa7AQABLolkbzqzMZMdTqcGvWSv63RxnuEsaUlPWo6UtowYoBXCu8NmGFR8f6XRnGs2zjaap4NwXsiSzUEZk+AzQe5i1Mi+8VwuB1r5nne/+4orLv9JBGtpaem2226/8667jhw+vLS8DOeoYIKXwjBoNmtRGCUS3Z3d53b3jnd0bkmm+l0nyyxXWrYUsMEJcwswklzAY3hGgnDZ8BifxD9pE1YYAb1YqtdPVKtPVOuHgnCac+E4ac7ddhsHqAFkP/3613/wgx8YHx//SQEL1OW+++674ZvfOnjg4PTMTBiGCibYM8hRo1EDk9LTNz4weEFXz9ZksocxOCuAAHC0yR3TRjARKHCv8EL4RMQINZAycy8ZvNmSIH0sjAq12pFS+Z5y9aFQLLgOCFrKQoPX8qoDAwPve997f/W//koikfgxgzU/P3/99V+//Y47gBNUKhWwGkqaQJQa9VoqPbBx5OLBoQuz2QEwNEQDwNa4tIFhctA84WnHMmUECjBCyBihhhgRahY9hnuLHpMAWShQfjBfLH93tXBj0z8GRg0ErV3K4LZ///4P//Ef7d17/o8NrAMHDv7TV77y4IMPzc7Okgl34Nh9H1AqpzKDm865YuPwhclkN7kzm4NhZmCbNVIIE22kX0rX4GBskiAEKIL7iGAipERkCS1fVgsvqf0iw8vgRqJUKt+7vPqP9cYzjpMCixbDBZYP2Nnv/Pfr3vOed7/cYIGufevGG//lX772xBNPAm8CygM2AnxctVKwndyWrVeNbN6fSnXB/gEjsME2JxfGQawcpgTKUmqoZIop7SPhYoQRjwCaEEUpUlIWWZGSL0BNGsiIdRidExgkcU+Iylrx1sXlLwThGdfNwdcZpoEE5dprr/0fH/soMNuXCaxyufylL335W9+6EdgmxHGKEzQa1Ua9MTRy8diON+Q6NiJtdFzH9lCgtEw5pIO0WVxqvNB4kUyxNqSMNOE9jyIjWfoZS90b4UKnaVlazECGKK5MhMHCwvLf5le/xmzh2Bl6CW9gRF/1qld95jP/d3Rk5CUHa3l5+W8+//lbb7ltcmpKMWnYQ6W85npdO3ZfMzRyAYkS2K6E7STwMXcRTe5wy1b6iJ5ewYRIkcEGmbKMCQdE8PwJmpArgBCvkCnUSNAsBRnhBfcx2ZIkX7BFeGzcKVUemp7/RL1x3PM6yPDjDQL2bdvGvvB3f7t7966XEKy5ufnPfOYz3779jrNnzypbDrSgUi70b9y36/y3ZTr6OaDiJkCgbMdD7bPhPbDZSH6YTQaeW0THcZO0WZxsUMvrtdkpZsSKR6H+Ex8oKNWnyH4p2SLhEjFkjIWglWG0Mj3/yfzqDa6bIkcslXwNDgz8w5e+ePErXvGSgAWO79Of/stv3347xC7KSPnNeq1W27bzjWM7fsZxkxSuJQAjCHgBI0JKMVJO1ooBTPAf3iFGjOy6pYRLmSEES2qbJSKDl0CAgMkKgxdIXGREjNQQwdGSpWw+IAVPwc6skGgqW8p/dWb+kyBxyuqTv252d3d/9Sv/ePHFF7/IYIH2/Z9PffqWW26dm1NI8Xq9HAZyz4W/MLL5UkAEYEKZUqqHGxBsTlFdHNmpO9zUV5NkwT9FnUi5SLikQkoiQDLSuGikDEyxrBFYTAuXUOeyTr4sFgJGcGCF0n2nzvxxJFZtY8JAvsBF3vCNr+/Zs/tFAwss+qc+9Zc3fPOb09PTCqlarSSld+Er3zuwcTeg4bgp1006jova56Ah55hV4QocRsGOgogBHJaijZY2ItJYd8kMBeWKZ5HL40olI7JfSg1JyhA1SaihVmoXIYl8aZ0E/2xMPmwQeCVqtWdOnvkdP5hx7Cy9gVWr1c2bNt18y02bRkdfBLCAJXz2s5/7p698dWJy0kUgECnLSl582a/19W8DSFxPIeWBuVKqB7pnKbEinYtTLQojrSp4egqyyOYCNxvuLU7vAZIVBjzw7abv+L4X+G4YOhQVWcqEhaGGTyksokae0ewTZYwpy7UOL7fenDh56rqGf1q5SDhCoD6XXHLxjd/6Zjab/beCdf313/js5z53+PBhjje7US9H0r3ksvf3DWyHPz0vjQroKIvucKIRKFOkcpx0Dq82U9YXtYIeRJ7TSCf9jozI5Xg246ZTrge2ToeTeFSRkEEQNRpRtRoVi3J11V5Z8QqFTL2eFBHwfmQPIWqirTymjJgyecZyaeZloSgDZBovbjuN5sSJqd9u+jO2nVZ4ra2tvetdv/D5v/ncvwmsgwcPfvwTf/7II49CAAhmCCx60w8vedX7BzbuQaQSKbDrLrAE2wFWRSJFGQZusiPMUhaKiCOYc+E69c5Mra/H2tCb6urMpNJpAFoZNeX+NQnQd5pOAt0Ft1urNVdXfQgWTp9OLS1mm80ks5Rn1MKl7BfptdZEVHutlQAcGi+LBUApqvUjx6d+K4rWONcBY6FQ+F9//okPfOD9/59gLSwsfvRjH/v2t28HxQaigCyhUrrwkvduOucyDF4SSqYS4APh6zlFz2jOufJ5xiThKQNpECm30tdTGx5M9m/oymRzoBFwCpiz0hi1Z/TwodA5QdAokx+0yCGIsFZvzM02jx3zpqY669UUfB28GSAj50DuQhkuy8gXW48X6WOx/ODJU79DjMxR1gbuv33bLRdddNGPDBacBri/L3/5yzMzs64LMbAsFpbHd7115563kEylwVSR9gFNJzKl01YoVaR+lrLqcOWTbnWgt7p5ND3QvyGVyhBRiNSJGCZpApc2wGKklJsj+ZKaiCJhk2HYnJtrHHoyceLZbrBrmOZANeSWUOelz6+N3MPhKGUEXAKHu4v5fzk983GVqIBbpVI5f8+eO++8PZVKPS8m9p/8yZ887wvf/e53v/gPX5qYmHDQqLNyeW1g6IK9F/5nsE1uIuWBRXeRTznAEhyFFMkUck/1CPUOSGt/9+p529h546P9GwZADBUS5CQVtkYGdQ617Zk2LdZPoWAxLXeIiN3Rkdi6NeofKBcKsriWUEJtqSuldtX6gx61BAOugZ/N7gqDfKX6FGVELM8DUZ2C03n1FVf8CJKVz+f/6I8+DPwTmAioF8R9jGcuf8112dwAqB6A5ToIFogV6CMjpGzeVnRAI85TXmnzxurY1oHu7g1kXISJN8xRm7wTY9KUcozGoUCRKEVS1X1QK4UkdTMSh6/imyHiqlabBx91Hn+sJ4ocNIBER5gVO5ZYgnUwpIQLDyoqHZ/6jVr9BOdJSk5gaHn33Xft2b37XytZX/3qP994081ARB3XhSOqVav7Lv6lDQPjgDoqIBEFRArMlEkbc25oJ7m7ruzKrm1i5/g5uVy3Tl2qkhbXgCI7A02gWAiOsFaPCqVgZS3Ir/pwXyyHtVoUhAJO3HU5CDfnJp6RWt6kEjU8Q9iVc845orevPDPj1utwYNKKE/Ca6sVP6MtJ/49sJ51Kjq4W7iEQ8fiq1cr02Zl3vvMd/6q64cmTE7ffcQcwdVRAy6pUCiOb94+MXgQyrmAiSuWQ79OGinMl8RTEWGKgO79rPDs8NAqvCCyX6kqNqQZaDtAqIQvlcGGpAdta0a/WQt+H64wWnwI9oeD1PDuXcXq7vYF+r6/HSXgcEAwDtUNpaRRQAEPpbB9nnV1rt90iFheycJVbWqw4HmXoCWVOYgaIOkL4uewrBvvfNr/0ZWahqcpmO+64887bbvv2G9/4sz9cDf/3Jz/5hS98cWlpCci6j/UF+9Wv/91c50ZAClmVRx4QGBHmEmySqVbtD+jkxp7lPef19g8MKUkw11T/H0QJQDk7V588U13MNxpNtPS4B0vzBUqBCm3dBepgRBwKzg1QGx1KnLPF6+6CWEf6Ab2R3kZJCPw4MNtiKbz1ps6Zs1nPE5TbkFQtYbEuEs1XmYlQWgFQsFCsTZz6ULV2RkkPBLz79u29+647QVx+kBoeO/bs3/3d34Nd5xT6VsqFHbvePLTpIiAHxNQTJFkkVrZCSisgISU39ub37t7Q3z+k6DozhgzgAG2C/U+eqT3y+NqzE5VSJeQkYo5tEZGNjbjRFxYrr6ToyWo0xdx8ODEVlkqys4NnMpgRNPaaKbYLzyST/Jxz6/NzdrEARytbfsPSRoy+w9ImEu8gugYqkyxXH8T6CCq+Ozk5tXv37p07d7SDw58jVnfccefkxARVq1izUcvmhraMXQ57xiDZpQgZUy6cazul0i36QPu78nt29vRt2Iiq13JIiCZoE1iiu+/PP3hgpVD0PZclXCWSClQjm1yfBmGn3qB2goEeWCIP3Wn07PHmTbfWDz0VwNvIVDBFPnFvHEyYlcnYb3pzsW9DA8gT0yQrdrn60Ag3uF6YvLVk0NVxVWfHBeC+FQ6A11995q8FOd3nB+vMmbMPPfTQ6toa9VzIRrO+dfy1qVSXynlidRMkwdaypLQPjxAdmN2ZWQM7BdqHbMegBAcE8geCeORE+c77lhaWG16CKcauUICd2G2yiRfA1gEAM2YQTohz4uK0weNEUoaReOSAf/sdQbksPc8YcE0/MAzq6GQ/87OFVBqsoEp+6DjeiJcizpwpvOA4Wbqv++c9UwFKp9MHDhx44IEHXhCs+++/f2JyArgsyE2z2chkB0c2vQL2TOkEh2TK5lyTKm2K0EnxpFceP9faODRianaaNgFM8OfDj68dPFSAl1yPsbbz4sZPWa0/LSWp2mvoLGG8Twn0jRkpSyblzEx0083h7KxIJCRrUTLcZxDwwSFx+ZUFEWc52HrXqPeutMOBSDSTvqQjuxusnirWglj9/d9/8fnBgpjmoYcfXllZ1bWsRm3zOZel0l0Y92EeXWsf047PilNTnAXApzZv3sQUwzEaaDvACeT9B1ZOTFU8VawwYQhr34M2bMaOmOc57YorleStrAs4WHyeCxSxlKzV5W3fFpOTFuBlKUCJtcGbfZ/tPK9x3u5y4GsJNdeqJV/mK0mmeaar42cSCV2szWazd3/nnpmZmecB6+mnnwHrDv5JJYtdL4dihQUutFOofoqaG+attB6IZm9HYevWAQiqFb9UhwPKBX89+Njqmdm65+nsA5w2XAgtLkyaZBdqGSGyXur4OsahPqJcm0lUoVNzXTQsd91lTU1ZCa8VkCotloLv31/u7vExwGZxgKWPPvY+qjggrTCTuiSb2WI7FNDaNpDzm2++5XnAAhVdXFxUh9ps1voHz8t1DOhGDMOqDKlUVwMVMOHUzt3sdnX2wiG3zCcgYrODTxUAqQQiJVmbirVtzHipFhXjrHVMLUGjfco4fwDyRSrJCT5weSDCd93J5+el28KL/FzEsrnoootL2lKv+3ZL9+q0KgPSsXtz2VfCMSsNSCS8m26++blglUqlQ089BZGkKrsDORwGFmpTHl2l0nXrT9z8o3CRg72V4aFBy2RzybwgSzg+UTkxVU14dP50IOakKRGviju0h3XgM7mOc3PLgEnHuu5UpRFPwsuVzSb7zt1OvSYwpRbTdPBzAd8+Xh8aaooI5F3G8ZjpaorpBKdqpkwnL0mnOtXbUqn0k08eOnXq1DqwTpw4AU8FQQCfDkM/me7t3TBGvkwhZVttehJf+KRb3TScTiYzQLoVJZVIO1l+xT90pOg6yjoLY6ekEX+pDRGKhja9baTBxEOW9X05KZVmp3oOaCKL6B6+GjirBH1cztsPPgCXO2K8JZtgrF3X2ntB2QQQ0moFQjpYj78bdu4652Yy5wIjoUyAXSgU7rvv/nVgPfPMkeXlvPICgd/o7RtLp7vJoCsPaLJ6+qvwbIAx93XV+/v7ZJxfp6sDAv/k4aIfCJXybJltI1vciIzOKjBdEWNtMbYOZeiNVhzX6V42LYA6ga85FIpYwhPPHktMTABwMrYJ8C8I2aYtjQ0DPmglWxccGuOljD2hwVk2ldyTTDqK8IMZuvfee1tgwWkfO3YMvKHyg8BMNgzsYLreR3le1v7VFDjA5bIbQ4PYHytU2phYAxi3MzP1+cUGyJdlyLP5VIudG9lXUqNIZXwGTGGnX1KWShFOdcSsZbniQo62/aRljx306o2QTsVUE6XluWL7eJXMvHGslmylbFjMOvBjnrszlcqo55LJJGhio9HQYK2urigdBFwglgXi3927meifw3XBvS3406olc5nahr5O83VSUQCI+46dLHNTRTXmxYqxttZ5OBk7OtmyuCoh2mIZdCSknpbykJau3OjcC+mm0PlW2xFLS96J45YWLkNMwohv2lLPZCIVGOmviK8cfQ/XTkg4fFMq2Q+2TyW5ZmZnIPrRWYfZ2dmFxUXVfgakIZ3pzWT6yKlx4/14nJxTmsJZONAn0+ksHCQcDnWxgMTyucXmaiEAjq5DLzwwIVvpEe0GWnG8FSd/mTAxniTvSaYfQ2WQ9CgQAWxhFAUyCEUUYhI5DOzQt+neCfwoDBwIiCPhhr714P32pk01iGRVvEIXS3Z0BIMbG6emMhAdUzrMXJOYB+G7yPCyrkRyFALERgP0llertSNHjuzadR6Cdfbs2WKxqEgSfGfHho2elyb6YZsgLZaGVoY8lcqBswypY5ZR9gKOrKvDyWScejOyudWuWi0R0n+sy5MzEwjDvxBcMSZhhB9EgE6ImxDwDGIGL1EukPq2BD62wgikBl6Fx4CmhHeKKJqe9iZOFsd32CDp0qTzPS/KdZbz+VQqBWzDAjIFMTy345KKFedwGbzX2ZRIOPW6UmcLwLKst+PD6ZnZer2uwIDjyXUOKb5OZfe4/qA8uzEolj09z5X3jH1LJKxcxtm6OQ2nFNt0DZX+rLVOwKSWvkha4BDqtaBU9otlH+7LtaDRDEGaCBop9ZdaZi+SxUZHCpNit1QsDZdYSufEcQ/TL1odEK0oZP39dVCgQkGs5KPlxWh5KVpbFdWqCEPJDNtWh+3YQ2CtlENxHOfkyZPaZi3ML6jTJrW3srmBlrK3bLsSV31cYPqXV625xToEf6Z0hfdwkQGsbNoWQmp7EtvTuEmK6WorvBlksFINiqVmpdKsNVCUUAyM5YptsJSqmUHGiedWDcIylTZF08i3gsGanU2WSwFv1XgxG9HZFXR1B2jGKe8aBLJaEYDX8pJYXg6LReE3cYdAx2zel0hkFNau60LQg0wCYAJSD8GzSiKCUQfSoA41tlYmhGh5XDpYPnm6iR/UdVM83kjITMbeMpoKIkGF+rgVSMYGFeSuXo/KFb9Y8au1ABOk6kxNwcdUwVqtahoOKu+oLJ8wfUbPWZOhBBrC7EolubwsuB37OzyCREL09ARCmKSWCr9oVUvgy3JJ5JfDxaVgdc1vNnOel1VYAzfPr6wUSyVeq9XAYClDiJVUJ5FI5GjvcW9QW5ig4zPEARR+acVaWKqh14h9NEq7HNuSTiV4JGIZILkSVrMpShWQI8IoIMphCsiaAkiDDFXgRQyIgkmvLSCkcI0BIdaCrT1tBXLkLC0xqqoa/oKJfwlxopQmNLRMDcgEvZjeCWSpHK7kIRzOwqlhQYTbENsU1tYQrGqtqugovuAkHDclZWsNBGu5cUN/WWzl+cTpBrioWCqwTSESuay7eSQFRlq9F+sRNdQ1kCbfjzSJNTKn9VXVc3RdR1jtcmMwMz1rCjWrrXxtSU1spU7FINvga6sOeARd3NAqzMAnqtxWG2+PIweVYsOoSEqX84xtc7UcAXgWiBSv0cI107ohVJKPtVL9rfRifIjaAKFuWwt5ubRcQ/bQKr6jYxrbkoFwtOkLVLdSs9pAnxabF9UhFBe82pDRKLXERZgamDCSJto/EUOmYVK8jnKKslq1A0yVUlOT9gZAdyKkOogKxuFcJRRZnFxsJdw5T9oIm17kVyqVOWin7wda77EGB4jaUlGTdtYWN1vEHJQuYRTyiVMN8O3tVWUAqzNn9/W4K2uNho+CwmLHZbUh0q5byuuJuGSo9U2t6YlfEgoyoUsVcVup4cZauzAmti3fd1C6W5ESvtlLRHB+rQQNb2UF1p0xAGh5ZLN0IhAIAw9xwUfUcudIPFr9ZhpC0aKQOjBT7WeY7WJzSzKfr3FuTI0AAhk1m9H2c9IQ9GjzYmwMgIK4RKIlJSRoRoyIgyoo9Ge0TIkYtZbqWaaTLY5YdQEF4zTMSTE4tXYGTDwAi7Kcq2w1cmkKDyR9UOrMmg5pnbhhChdAQITzHHfSngySsRDFLlowXdPV8Ri+FEb25OkGVYphjyGtRAV+KPp6vM3DKU0LjR8T6wVIKZyBpR0UJV1R6zVj0YUxBaoHVcXgsWTAaYNMgX2wiVC3+kws+dwzJNWjBLbUkZyiKCa9wXh7ioXCUtWY3Sqrm5YNkyBhOufW7vwxhmH6iKkkMbMgF5crId6iliwIsWs7OBSK3ITmBKYqr4VI26yohYb+bBSpZyP610JK3wNHQb8RqTZv1fJstVLUHKk5EEvJDKeLV1ugJCqDxbVkmfB13WnDGzkTsoUvc12He55r26afCpQzwnihLRSRravSKrQx06OPz4JdWF6Jnj5aBqANrJKkTPT3eaNDSSVcUdSuWKSPhAk9r57Rd5GyYOqmnozMC6q/Qfed6iU+tAyItApbzTlKlgMPmJcIua1rq7EEAPumsq5KZFOigtOf2gmIuN+G8ZCK48o6sWQqxSFSAoZqsh88ivxI+Po6qH+KL0iSJkHNn6plFhtleK0qikWIX9npabmyUudtawCVGIFwEeshnYti2y1iY61j5RioiESJ7iP1QLSrqVI9WhIlzGoxygur7hSAyaHeCNhSKd9xuGwJC55Ko2FTjoBx7TQZj9OnrTQ9PAPsP4AvV70bEPHksjmeTmeSyVS8JjmKICRrtARS6hioFb1gzxVmisPAKhTDSjWivAOr1Z1nT9YwuDSqBv8FvhjsTwwPoHBp7TSSEwNB/4+M1AiDVBRFBiDlDVTaitboQAQCPAg2y3Kwqk3LN4Bnuy52mrguU1s223RoTUN7FaNadWLiji2stlRgPacOYtsQ/zXhGJTLAqbe1dXpZLOZXDarGCmAHAVNv1khNy+0ZSYzScUaZQoR1Fo9qtSw34dhCkx5E3vyjNi5vd7ZmYnZNLJcyXeNZ8/M1ISxzHFLgyXbpdAy4tZum0S8Mpqjm4YQ2ZXMjaSHyUfu4pIw7NvDvBuu/nWwV4wWM2BnW2dn07ZTEG62IkkJMY2rPIDyesquCyG1Spg4wnYaUtaBHJIARd1dnd1d3bievaenW0fR2LAU1msFzRfUimV9ciZ+F6xcDesNQdlhUgqVAgISWHOPTzReeVFSCa9CFizX8GByaCA5M193bCsOuVUuQdNPS9P0dnqqIm50QVxl/RwUKOFGIeDlAFhomQAp7qC1wuomaZ9LQKCkVDs6gZHaSiYVsQ8DXiwC66bKkDJbKjGDkYc0SVR0665bDQWmKODEwG319PZ2dHYgnR8cHFRFHRVLV6vLxnVp8qPDCjQ9cq0Q1GqYR6YVNpx6Hrmg5adweSdOsWKxQVk7/SH4NMj87vEOrtYY4gJDtbLJiiM74z9lzD+VxnFc9+Nh946bcZ2MzTOWTFsyZcmkZXmwceaohnviCpLbcJUo34N1z+VcjouYquDqFFGt8lLJwYoGFtMEY60qpGk5p4KIJRLJst+sksQxYFgjw8NYjwCwRkdHgUDAU5hJ4LxcmgezgaKizgAZP/obvynLZSSwgIoQtKhEaiKsVpfA+ZXLiROT/iv2JUOp+5lw1YovR4YSQwPZ5XxgO0TgVZRsRZpPtTXhkvjqFfe0dBNNuIicKLJDn4NDB3uCzRwWFqZVDMsJKWCbqiVCksHr7FxJpztE1Ao4bUes5NONOnc9oXiDAsvYB2Eqkril0oXlfC2Odca2jem08jnnnJNMJilCxHCnUpoP/DpPOqLtNOqNqFKh9AHjqpwqTLOYNHG7Sh+fmLC3b22m00m0ZQQo3Hse27ktk1/xadWBSqWrAoxs1X7ayi2q6ZgWVrAQNtDIsFUYZaapA3fCBQiUjTIlkJ9EIaYeWaO/37ftJEakcbxtydmZFF0/RbIka6VI4/ZJDC/AtCe81XK5pkpqgPTuXbtisLZ0dXdBVK1Wo9ZqK7B5iayKTWAvtVpQqaq1AHbcEsZM3MNM7lL507WCd2KiccH5Xhi1mhObTWtokHVk7NWCpIZei7XXODXqOoJRa3vN4hOLFlOg84WgmLLvqjVQUvZN2Fi5iDDxbGH6GR1p6PRvWOzrS+vcFxkE+CKI7WZnk44rKKyxVI8J6byS7gglXYbwwPUqjOerVWBCIBkinUrtphZTR9msTaObzpw+QzsFe1YprJ3t6t6suGGl4sPXcNuD66FoV5wwlazVSxtHAeA5jx23t53bBHdLwkVMTWBj0Ni5/L6HBDxoTU+RJgIVFHXq9YMGqQjRweY/YOr0QJ05LY9DmaJ1E6GAMwyBE4Vk82zO/ZGRSjo1SkNJtFg5jjh7Nl0qeYkE6KO0FVgIs5YsGReKpMhkio1mvtEIqJuoOTQ0NDa2TaeVwWDt3r1LrUZSRii/fAJ5vIzK5UahWDchnWGq6vpb8aJ4jP4p+EDFgTfkV5InJwMkFSqkoftmU24esToyvF7jfhO3ZoO2OoOt0eCNGgODUq+xWg3v6/AkvdRsML+JKeBI90LSihweOTZsIbWfBUDpUDTQadj9fYvDwzmagBDbQQRsaiIH9MNxsP/NdnTwaOg3iqclYVcgWWGuY6lQWFHdG7Vabe++fel0qlWRvuTii0EQlD45jre2Muk3SyVAqlDTqYE4plM96Dq7q1o6TegvtOKAcB055lSrPrVNEF6RBPPheXL7mAUQBE04f+Y3WLNJG0KmsGP4ALGDV8GlgCdSqmep6BJbJm3peiCnwksI1Ckb5YtyUvAvkU7Xto41M5meyMiM6v1eWUnMz2dSSfys46rcg5J6Za2UE0Q15HY9lZ5bWSmoknMQ+FdddeW68v2FF14wMDCgs162W6/nZ6aPAwlAW0DRog7XVC7KUpZfaQ19j04qWAo7OIalpeTklBauOI8AwrX1HJHLoBwFPmyAmpYyeIzw0QMI38KAkamiReRCpz5QLlyACTc4Z9uOgAQQQZIU63hAtTZvnhsa6lfLw0zGDx37ieNdAFoiaRG5R/nivG39AFqBiEoIIpsrhNF8sYj1eVDkXC531VVXrQOrv79/7969ijGrVoPZmSejKIhEIKgUR6u0ItnSQyXaOhjSi2Y0Xkox7cNHvUbdp74fvYFwwbXdsT0CCUIfF9JKOAVNjA7psvKGKjdnE0ZuArsjk0npJQksF0wPRS3gdCBys5OcpQcGzo6NZVw3EwkRF5bAWuWXk2fPZpNpgdZK+U1LV28xqpJk11EB8WR7eufz+fkgCNVqxL3nn79927bn9me9/nWvjTuZHTtRLZ9s1lfUhB2FF00hUqGwqTFIqadSaO6k1mWRcHE5v5CaOh0iJxNx7GQ1fTm+PcxlLSBN8apevfTNNIgY6oTXH6QAHAJYCNrwsecSTbctVdPHiNBJWSzX1TUzPh52dvRjQBeXGTG6sA4/02NhjgVXNWLvjVR+E5h5QBtWugVOCAJmU05npufmlpQO1mrVq69+y/M0s1155atHRoZNJGaHYamwdoQC3QD3hb5GR7SxkZct4it11lhI7VoQAvuZI16zGVgmcQ63MJSZtNi5AwuVyveZFRM6yYsYIcO0XI2U5SXoHjYVIXtMtbjiCn8v6XkZxjo6cjM7dqz19w8TCbXiBD0Ytamp3Px8KpGIXYEfRD5gFPhwDIhXFPqYa4ma8FR3z2K1erZYrFD7Y9jV1XXNNdc8D1h9fX1XXXllPAMM4oy1lSf9Zjmi3cXKSJtuw7BatT7W6kc3tWEwq2BTz5wFk2niPoLMDySAlctS5K5zu5bKlmCIiwKFCRbXQEP3HDMKHq7WA4xwIZrjgUAxlgnDdCY9Nb59aWhoE7maVlUMDqBYcJ9+utv14BhwfUAk/DDCKXBBgBvJFKZ14flINEGSNmyYPnNmWvnBUrH4mquu2rJly/N3K7/97W+PR2mAmW/WF4pKuCISLqWMcVpYyVKrJhwnCOPuIDh05/DRBAZSVpxvB8slO3LhjvFmFLX1kKqcid4YJQ9Aggg1fAwhIuobxP2uC4Y8afOUiLJhaHd3PbNz58rQ8CZaTW1oAPlNoBqPHewBr2LbcLEx9RQETVI+QCoksaI/QAGlT9FyPohOzc/nbQzKJIQCv/Ir73vB1u6LLrpw//5L4WN6fJdtryw/6vvlMIR9+YLwokwlypclTE5iXTbWtAGpMroj5uYyMzOgAnFEi5gBejt3NjIZYVmmcEDxh36gsgK2fknV9dTSRfAAgQ9c3C6X3SBYGuh/ZOfOoL9/hFheKzONSWEePf69zvkFkMF6FAFMjQDVDdtMAurJoUpNSPPMcKSZxWpDw9NTU5PU2c7K5fJFF130ute97getsHjfe98TZ+VBExv1ubWVQyRczTDSeJm61boyy7oFQcz0aGCY6hw7lgRd1pbECFdXZ7htrAnWHUHB3gLya7ay3EzZb3pJL04CpMBdNht2pQJHVctln9wxfvi8nT0dHf2hkvhWLR9Mnjj8TMfERCaRDC3MQ4Q0nhLrEzglIlIxk9BWxUIZGxjIB+Hk9PSCGlJZrVZ+44MffM7AyueC9ZrXvAaEq9n0Y2VcWXqw0VhGyxU1SRkDbbx0SKXSGrGlb1+phqcJPmh2LjO/EFKZt3VKYQSWqwZMgiQYIDMVKoOU2g9hBKGlXau6lbLtN4u57NPbtz+2b5+/afNmx8mgGom4OwIvEhj1Y0c7jh7tSqeFq/0mpwEKNKWLJiCY6xYRXfAdtzI8cubYseMgbph3KZcuuGDf29/+th+yhA7e+qEP/cZDDz1s/nSCYG154YHhTVdbQYNmFFFOynThx+1tuolIyucWnLCl03v2eHJwoEmJYGkmIFidXeH4eAXkTgjP9BeaRIWl5jSoOAH0opxKrnZ15fv767296UxmBI4cTXOcNiMJx7S6LY8c7jpytCuRjLgphWHZWGDWispCpqImSQdlEyzM1rH51dVngTGA98DROpXK7/3u737/GNnnX8n6S7/87ptuujmdTitXB5H86JZrO7t34zJWL4OjqXiSc8y9WTjry7bMyCLMP1umMGXFjbWYQfvp1y319yfCsPV1HCu94dx8eXUVbASEDV4QODglhAQE/JfrNBPJRjbT6OiIOnIugOQ4aUrdRHG+2ZQGpWODLlqHDvWeOpVLYNmZ8i3aOyLpBS8c+IK640LFFYSoB0Et17G8deyJe+75TrVaAwFcXVl51WX777rrzu+fr/j8Q11///d+795774OA26YICpR9cf6OZGqIsR49J0x19nGzyiPu8tNXmenCkKkUBH4ChKuvD4TLMc3NFvZ3MntkpGt4GKlvEDaQIUZqdaal61o41gaYlEN0F05VtK03j9tOgdBHxaL35BP9EMOn0iG1gyLguHglUkE+9sWZQlJIqRh0kdyujm07e+TIU6VSBTxtSJWyP/uz//m8kyiff9kvcC7w93fddbfqfoPDDv1iGNYy2W2m00SvhIllx4ClMi3MjMRSI4jwbcWiM7SxnE7ZMeNXgSaxXYarPzhQAyCZKbU5bpLbCVyChCZZFaefgxJdbQe7GU6d6vze9wZrtUQqJRzbtI5jHgWnsEA0TukwDEfQA+pxnihW27ZPl8uPHzp0FBdRMr6wMP+bH/rQC01ve8FRBY1G441v+rknnngyk0mbSXDN/sE39PVf7rg4tdex07adgECfMY9ZDgORMfpIY9bowurmPTxoP+Dn7Vx81WVNHJSiVafVJBeff7tuyfgZ8wEts4QDRXkyn089+2zf8nLG8wRE11hh5rofCtAh1Yt8nygoMisgpU0RNYSoNv3a0ND8wMChu+6+FxwaKGCxUNiyZdMjDz8MwfOPPATj0KGnfvaNbwI2omJG4i9s48jbOrv3uHjL2DbO1eMAFvPIeOF8UVUfxkKxRZPW9EQx7C92Xf/Nb5rt7vZoEm5bs1+rsyLuDzWltPbhD/Q08gwMCazV1dTERNfcHE4RSySEqtmoJQgRIoUWCjYfYSL9VkiJuhA136+CuxgfP37f/d9ZXl6Fk6GmouKdd95xxeUvONr0Bec6qAwqYHzLLbcYZcQWo1plKpkacZxOSlcahxinh/VgLHUZzBAjoRuUm02w4lZnp0gmBaiPAkO0UnQtUYpb46QpjlJJAnPtYEjn5rJPP73hyNENxUISc1uuMK0vuvUQBMoHmJrC90OMbDBiA4qhkQqCajq9tmvXqcefeGhmZkEV5BcX5j7ykT/9xXf94r9pcM+v//oHvvTlL3d3d5tOvcDxuodG3pHJbgJ9xAoVOkdQxgRNwdTypUQM9VGNeJJ6SFYQcIiT+/r84eHG4ECjszMAH2/zlvxI2erZUe07ACZ8qlp1VteSiwvp5eV0reYCXwW9s22dwyPOQSwDc/bYGY4cnaK/EO0U2nK0U4BUWE0kCnv3njl69MEjR04AUsCW5ufnrr76Ld/4+td/8IThHw5WtVq9+uprDhw82NHRYdQi8BJ9g0P/KZMdhcjfdcF4pTiRCYblPBdcnqWqWGpApORxhxBNQYTzQSYN55lJRbmOoLMjyObCVCry3Ai1iSkuajeavF51yxXYvFoNGJ9NC9MxitLlGV1P1RwTiC5EChj6hTqaCUNlzkmmsMJMSJ0/fXLi0UNPHXWpeL2Sz28f3/bde+7p6el5EYaNTU/PvOnn3nzmzJlsNmveHyYSvRsGr85kz8HIlvBC8gXGC+29SwNIzVxbGq5paqtcmkFXYM70mEg1z661CFHGky7QE3PM86myoCq76+4ErvVcTTQAI4WrDULFpCgIpHQCIiXrUirtA6TmTpw88NRTR226FYuFzo4OIFnbt29/0cbYHT58+K1v/fmV1VVgqiabGiUSXb0b3pDJ7VB4OYQX+EfOtD5a5CLXqaRylPHoOkM4Wk10jLVXBmPZURG1Cq310BTsJRDEobDNJKQEuGpkhEeR9GniNzC7umXV/KDW3bW6Y+fskSMHDh8+4dBcCghrgLDcduutl1566Ys8IPHgwcfe8c53FoulGC9cpZxId3ZfkcldQEX2pO2k0T9qPuFazGVqbrKl8dL3huVLXaTV/YWtOT087ns0qDHJ2hqlsedeZ6uRbeKqHXPTiQTknA1pNVCmwsrw8Oqm0bPfe+zRyakzyk4BUrCzG274BoTDL8nozYMHD1577bvyKyuxPsJ1Tia8TG5POrc/keimKRkpUkmc7M41ZA61deiptwQWbw+G4tEwpk+KStxW7GZ1oya19qjFA7jyALl4KDRe9EhRcwEyJZuWbEqrHkU1xsvbxlZSqcmHHz6wtJRXSIH2gW/62teuf+1rX/OvP/0feajr008//Qvv+i+nT5/u7OyMP5tM2tnsaCqzP5Hc4npJmp6NG5ZmLc9Mnka8WBxImkkBrLVCMu74b/9NBtMrT9UQPfeImraI1qskFlYcCKlAWj7AZDEQqAaEHJ0da2PblvP5IwcPHqrXGw5NAFrN53t7e66//mv79+9/yccFg6X/5Xe/99FHH43dB+wkkXCy2Y5UerebON9L9LgOjaxBlUzS8GmPmtBoYrCRMlpvbYYrtBYjMNNqr1IOTMh44Ixs61fVbakqJ2UhTIFl+Yw1IPoIo4ZtVzaNrnR1Tj/9zKGTJ0/Fw3oXFxf27N79z//81R07drxMg6jL5fJv/rff+spXvgp8AgRbpajAWGYziUx2CPBy3HNdNweGX5kw1Eeu8HINWK1chQJLmj7alrvUjfJWnJKWps5rMKIaMq7+AqSaABNadKu6oa8wNLScXz7+5KHDxWJZjaAFjr68tHjNNW/9/Oc/39vb+3KPOP/0p//yIx/9mO/7QPTjtBKIWEdHLp0Zte2d3AEiliUR81pWnww/DsC3aBK8smLaV2ovGY+WjhdixC1jVA3FihZDUQo5B6TQSAFLYKza1VkaHFxuNE4fOXx0emYeMFKxWqlYDMPgD/7g9//wD//wxzY8/8CBA7/929d97/HHu7q6VOZM9WSlUx4YtWR6mNtbLTZi250EmRsTV8MtzO8ttHMLs2hCrkvHqAnAEY1yikiUcBPo9XxQuu7uUl/vSrMxfeLkyTNnZoGOqgF88GB5aWnXrvM+/elPxbXlH9vPMtRqtY9//BN/9Zm/rtfroJWqiVBDlk50duYymQHbGZFshLFezjOIGloxR1kxIhYOShbSCwXW+gC71ZGgxxvielVKB4OFSqUqXZ2FVCpfKs1MTZ2enV1s/12ItbU18CC/9mu/+uEPfxgu3k/KD348+eSTf/qnH73zrrswHZHJqCZVajO0Egm3oyOTy3WnUhtsZ1BaGyzWzVmWI4M1c+LVDAqmmtrbMjZW24IorIeDkQI5qicS1XSq5CXW/ObS4uLc9PTc6mqR7Kb+lZFSqVSrVa668sqPfOQjl1122U/KD36032688aa/+Iu/OPjY99TvVMVSpkZLppJeLpfO5TpT6W7P62Z2N2NwtbM4P44lNYPFfrnYMyqBCjkLbLvpOHXXqQHxFqJYra6srOSBNxUKJd8P6KeK9C/xgPOpVSv79u297rrrrr322hfx7F78HykCDv2Nb9zw2c9+9sDBx2DnQF/JXZrJo9SoC9YklUqk00kIBlKpTCKR8dwUR3bm0W8SqBlaegwrWiX8+RjQ8mqlXC6W4K6KA/AiwVX7LS1HCoOgWCpBTHjRhRe8//3vB5he9B+uewl//uruu+/+4j986Z7v3AOMP5lMplIpk0SU63+JiVGlCn+PydajlDjVeFDxQr0AX68K0gMYzA9oqWtTrVZrNfCDnVdedeV73/OeN7zhDS/RD9S95D+sBlz/5ptvufnmmw899VSxULRRplKuhwNOY0K7flJw6/df2ue8srZWTGyY8H1wLL7fBNZy/p49b3nLm6+++q3bqKf4pbuxl+3HIE+ePHnfffffe9+9hw49NTszC6eqZr652MLgkMXhbH20Y9ZxCZWaCvCGy89TqeTQxo179+69Cgz4lVfu3Lnz5TkF9vL/cibANDk5efjwEbidnDg5MzMLthrsUKPZxB9b0w11+le/sK8okcjibxr2DA8Pj41t27V7F8QrY2NjP3R8+38EsJ5zgwMo6FuxXCmDGQ98YJsSJA4UNpvNdeK6Gbxxzn+8h/r/BBgA16kwIwArdGsAAAAASUVORK5CYII='
                         text:'Soft Sauda'
                     } );
                 },
                 messageBottom:'Exported from Soft Sauda'
             },
             {
                 extend: 'print',
                 className: 'btn-default btn-print',
                 exportOptions: {
                     columns: "thead th:not(.noExport)"
                 }
             },
         ],
         "order": [],
         "columnDefs":[{
                "targets": [0],
                "orderable": false,
                "searchable": false
             }
         ],
         initComplete: function () {
             var api = this.api();
 
             // Apply the search
             api.columns().every(function () {
                 var that = this;
 
                 $('input', this.footer()).on('keyup change', function () {
                     if (that.search() !== this.value) {
                         that
                             .search(this.value)
                             .draw();
                     }
                 });
             });
         }
     })
 }

$(function () {
    var todaydate = new Date();
    $(".datep").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy",
        autoclose:true,
        startDate: new Date

    });
    $(".datepicker").datepicker({
        format : 'dd/mm/yyyy',
        autoclose: true,
    });
    $("#ratechangedate").datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd/mm/yy',
        maxDate: new Date,
        minDate: new Date(2000, 6, 12)
    });


    var from = $("#offerstartdate").data("fromdate");
    var to = $("#offerstartdate").data("todate");
    $("#offerstartdate").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy",
        startDate:  from,
        endDate:  to,
        autoclose: true,
    })
    .on('changeDate', function(e) {
        
        var dat = $('#offerstartdate').datepicker('getFormattedDate');
       // $('#podt').datepicker('clearDates');
        $('#podt').datepicker('setStartDate', dat);
        $('.datep').datepicker('clearDates');
        $('.datep').datepicker('setStartDate', dat);
    
    });

    $('#offerstartdate,.datep, #podt, .datepicker').on('changeDate', function(ev){
        $(this).datepicker('hide');
    });

    $('body').on('keydown','button[type="submit"]',function(e){
        if(e.keyCode == 13){
            $(this).parents('form').submit();
        }
    })


    $('.datemask').inputmask("99/99/9999");

    $("#offerenddate").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy"
        // minDate: new Date
    });

    $("#filterstartdate").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy"
    });
    $("#from_dt").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy"
    });
    $("#to_dt").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy"
    });
    $("#bill_dt").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy"
    });

    $("#filterenddate").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy"
    });
    // $( "#date" ).datepicker({
    //     changeMonth: true,
    //     changeYear: true,
    //     dateFormat: 'dd/mm/yy'
    // });

    $('#offerstarttime').timepicker({
        'timeFormat': 'h:i A'
    });
    $('#offerendtime').timepicker({
        'timeFormat': 'h:i A'
    });
});
$(document).ready(function () {

    $('body').on('focusin','.form-control:not(".select2")',function(){
        $(this).css({'background-color':"#FCFE8F",'color':'#333'});
    })

    $('body').on('focusin','.select2.select2-container',function(){
        $(this).find('.select2-selection').css({'background-color':"#FCFE8F",'color':'#333'});
    })

    $('body').on('focusout','.form-control:not(".select2")',function(){
        if($(this).valid())
            $(this).css({'background-color':"#D3FD7A",'color':"#333"});
        else
            $(this).css({'background-color':"#FB652D",'color':"#fff"});
    })

    $('body').on('focusout','.select2.select2-container',function(){
        
        if($(this).closest('.form-group').find('select').valid())
            $(this).find('.select2-selection').css({'background-color':"#D3FD7A",'color':"#333"});
         else
            $(this).find('.select2-selection').css({'background-color':"#FB652D",'color':"#fff"});
    })

    

    var contrperiod =  $('#contractrange').daterangepicker({
        opens: 'left',
        "locale": {
        "format": "DD/MM/YYYY",
        "separator": " to "
        },
        ranges: {
            'Today': [moment(), moment()],
            'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
            'Last 7 Days': [moment().subtract(6, 'days'), moment()],
            'Last 30 Days': [moment().subtract(29, 'days'), moment()],
            'This Month': [moment().startOf('month'), moment().endOf('month')],
            'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
         },
        startDate: moment(),
        endDate: moment().add(1,'days'),
        autoApply: true
        // minDate: '01/01/2012',
        // maxDate: '1/31/2019',
        },
        function (start, end) {
            $('#contractrange input').val(start.format('DD-MM-YYYY') + ' - ' + end.format('DD-MM-YYYY'));
        }
    );  


    $("#podt").datepicker({
        changeMonth: true,
        changeYear: true,
        format: "dd/mm//yyyy",
        startDate: '',
        endDate : ''
    }).on('change',function(){
        var dat = $('#podt').datepicker('getFormattedDate');
        $('#contractrange').daterangepicker({
            opens: 'left',
            "locale": {
            "format": "DD/MM/YYYY",
            "separator": " to "
            },
            minDate : dat,
            ranges: {
                'Today': [moment(), moment()],
                'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                'This Month': [moment().startOf('month'), moment().endOf('month')],
                'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
             },
            startDate: moment(),
            endDate: moment().add(1,'days'),
            autoApply: true
            // minDate: '01/01/2012',
            // maxDate: '1/31/2019',
            },
            function (start, end) {
                $('#contractrange input').val(start.format('DD-MM-YYYY') + ' - ' + end.format('DD-MM-YYYY'));
            }
        ); 
        $('#contractrange').data('daterangepicker').setStartDate(dat);
        $('#contractrange').data('daterangepicker').setEndDate(dat);
        $('#contractrange input').val('');
    });


    $('#addparty').on('show.bs.modal',function(){
        $(this).find('.select2').width('100%');
    })

    $('#addcity').on('show.bs.modal',function(){
        $(this).find('.select2').width('100%');
    })  

    
$('.repeat').repeater({
    isFirstItemUndeletable: true,
    show: function () {
        $(this).slideDown();
    },
    hide: function (deleteElement) {
        var th = $(this);
        swal({
            title:"Confirm",
            text:"Are you Sure you want to delete it?",
            icon:"warning",
            buttons: ["Cancel","Confirm"],
            dangerMode: true
        }).then(function(isConfirm){
            if (isConfirm)
            th.slideUp(deleteElement);
        })
    },
    ready: function (setIndexes) {}
});

});







'use strict';
$.urlParam = function (name) {
    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
    if (results == null) {
        return null;
    } else {
        return decodeURI(results[1]) || 0;
    }
}

function datatablesearch() {
    var whatsSelected = [];
    var filterValue = $("input[name='formfilter']:checked").val();
    //console.log(filterValue);
    if (filterValue != 'all') {
        whatsSelected.push(filterValue);
        table.columns(7).search(whatsSelected.join('|'), true).draw();
    } else {
        $('.product_detail_table').DataTable().destroy();
        table = '';
        table = jQuery('.product_detail_table').DataTable({
            "dom": "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>", // horizobtal scrollable datatable
            buttons: [
                'excel',
                'print',
                'pdf',

            ]
        });
    }
}
var para, checkpass;
para = $.urlParam('success');
if (para == 1) {
    setTimeout(function () {
        window.location.href = '/products/all';
    }, 10000);
}

checkpass = $.urlParam('pass');
if (checkpass == 1) {
    setTimeout(function () {
        window.location.href = '/settings/passwordsetting';
    }, 10000);
}

// var table;
// table = jQuery('.product_detail_table').DataTable({
//     dom: 'lrtip',
//     "lengthChange": false,
//      initComplete: function () {
//     }
//  });

function datatablesearch() {
    var whatsSelected = [];
    var filterValue = $("input[name='formfilter']:checked").val();
    //console.log(filterValue);
    if (filterValue != 'all') {
        whatsSelected.push(filterValue);
        table.columns(7).search(whatsSelected.join('|'), true).draw();
    } else {
        $('.product_detail_table').DataTable().destroy();
        table = '';
        table = jQuery('.product_detail_table').DataTable({
            dom: 'lrtip',
            "lengthChange": false,
            initComplete: function () {}
        });
    }
}

$(document).on("click", "input[name='formfilter']", function () {
    datatablesearch();
});




///party
$(document).on("change.select2", "#ac_city", function () {

    $('.loader').show();
    var cityid = $("#ac_city option:selected").val();
   // alert(cityid); 
    $.ajax({
        type: 'GET',
        url: '/customer11/getcitybyid',
        dataType: 'json',
        data: {
            id: cityid
        },
        success: function (data) {
            if (data['success']) {
                var statArray = data['state_name'];
               //
               //alert(statArray.city_code)
                var i;
                // var result = '<select class="form-control" name="state_name" id="state_name">';
                // result += '<option value="' + statArray._id + '">' + statArray.state_name.state_name + '</option>';
                // result += '</select>';
                $("#ac_pin").val(statArray.city_code);
             
                $('.loader').hide();
            }
        }
    });
});
$(document).on("change.select2", "#ac_city1", function () {
    $('.loader').show();
    var cityid = $("#ac_city1 option:selected").val();
    // alert(cityid); 
    $.ajax({
        type: 'GET',
        url: '/customer11/getcitybyid',
        dataType: 'json',
        data: {
            id: cityid
        },
        success: function (data) {
            if (data['success']) {
                var statArray = data['state_name'];
              // alert(statArray.city_code)
                var i;
                // var result = '<select class="form-control" name="state_name" id="state_name">';
                // result += '<option value="' + statArray._id + '">' + statArray.state_name.state_name + '</option>';
                // result += '</select>';
                $("#fac_pin").val(statArray.city_code);
               
                $('.loader').hide();
            }
        }
    });
});
$(document).on("change.select2", "#bank_city", function () {
    $('.loader').show();
    var cityid = $("#bank_city option:selected").val();
    // alert(cityid); 
    $.ajax({
        type: 'GET',
        url: '/customer11/getcitybyid',
        dataType: 'json',
        data: {
            id: cityid
        },
        success: function (data) {
            if (data['success']) {
                var statArray = data['state_name'];
               //alert(statArray.city_code)
                var i;
                // var result = '<select class="form-control" name="state_name" id="state_name">';
                // result += '<option value="' + statArray._id + '">' + statArray.state_name.state_name + '</option>';
                // result += '</select>';
                $("#bank_pin").val(statArray.city_code);
                $('.loader').hide();
            }
        }
    });
});
$(document).on("change.select2", "#city_name", function () {
    $('.loader').show();
    var cityid = $("#city_name option:selected").val();
    $.ajax({
        type: 'GET',
        url: '/add_city/getcitybyid',
        dataType: 'json',
        data: {
            id: cityid
        },
        success: function (data) {
           
            if (data['success']) {
                var statArray = data['StateName'];
                var i;
                var option = new Option(statArray.StateName.StateName, statArray.StateName._id, true, true);
                $('#state_name').append(option).trigger('change');
                $('#state_name').trigger({
                    type: 'select2:select',
                    params: {
                        data: {"id": statArray.StateName._id, "text" : statArray.StateName.StateName }
                    }
                });
                $('.loader').hide();
            }
        }
    });
});
$(document).on("change", "#dis_name", function () {
    $('.loader').show();
    var districtID = $("#dis_name option:selected").attr("data-dis_id");
    $.ajax({
        type: 'GET',
        url: '/add_city/getdistrictbyid',
        dataType: 'json',
        data: {
            id: districtID
        },
        success: function (data) {
            if (data['success']) {
                var statArray = data['state_name'];
                var i;
                var result = '<select class="form-control" name="state_name" id="state_name">';
                result += '<option value="' + statArray._id + '">' + statArray.state_name + '</option>';
                result += '</select>';

                $('.state_name_div').html(result);
                $('.loader').hide();
            }
        }
    });
});

//delivery registe


$(document).on('click', '.edit_state_btn', function () {
    var stateid = $(this).attr('data-id');
    $('.loader').show();
    // alert(stateid)
    // alert(brandid);
    $.ajax({
        type:'GET',
        url: '/state_master/'+stateid,
        dataType: 'json',
        success: function (response) {

            // alert(response);
            if (response['success'] == true) {
                // //console.log(response);
                var state_name = response['state_master'].StateName;
                var stateid = response['state_master']._id;
                var vhpxstate = response['state_master']._id;
                var state_code = response['state_master'].StateCode;
                var state_capital = response['state_master'].StateCapital;
                $('.state_name').val(state_name);
                $('.vhpxstate').val(vhpxstate);
                $('.state_code').val(state_code);
                $('.state_capital').val(state_capital);
                $('#edit_state').show();
                $('#edit').show();
                $('#addstate').hide();
                $('#add').hide();
                $('.state_name').focus();
                $("#edit_state").attr("action", "/state_master/edit_state/"+stateid);
               
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});


$(document).on('click', '.delete-state', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/state_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "State Master",
                    text: "This State Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/state_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/state_master/state_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});


$("#addcity").on("submit", function () {
    var state_name = $.trim($('.state_name').val());
    var dis_name = $.trim($('.dis_name').val());
    // alert(stateName);
    if (state_name == '') {

        $('.state_name').next().show();

    } else {
        $('.state_name').next().hide();
    }
    if (cityName == '') {

        $('.city_name').next().show();

    } else {
        $('.city_name').next().hide();
    }
    if (dis_name == '') {

        $('.dis_name').next().show();

    } else {
        $('.dis_name').next().hide();
    }
    if (stateName == '' || cityName == '' || dis_name == '') {
        return false;
    }
});
$(document).on('click', '.edit_city_btn', function () {
    var cityid = $(this).attr('data-id');
    $('.loader').show();
    // alert(cityid)
    // alert(brandid);
    $.ajax({
        type: 'GET',
        url: '/add_city/' + cityid,
        dataType: 'json',
        success: function (response) {

            // alert(response);
            if (response['success'] == true) {
                // //console.log(response);
                var city_name = response['city_master'].CityName;
                var cityid = response['city_master']._id;
                var vhpxcity = response['city_master']._id;
                var state_name = response['city_master'].StateName;
                var ctry_name = response['city_master'].DistrictName;
                var city_code = response['city_master'].CityPinCode;
                var city_std_code = response['city_master'].StdCode;
                var PartyType = response['city_master'].PartyType;
                $('.city_name').val(city_name);
                $('.vhpxcity').val(vhpxcity);
                $('.state_name').val(state_name).trigger('change');
                $('.city_code').val(city_code);
                $('.ctry_name').val(ctry_name).trigger('change');
                $('.city_std_code').val(city_std_code);
                $('.PartyType').val(PartyType).trigger('change');
                $('.city_name').focus();
                $("#addcity").attr("action", "/add_city/edit_city/" + cityid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});

// Delete City 
$(document).on('click', '.delete-city', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/add_city/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "City Master",
                    text: "This City Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/add_city/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/add_city/add_city';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});     
///district
// $("#adddis").on( "submit", function() {
//     var dis_name = $.trim($('.dis_name').val());
//     if(dis_name== '') {

//         $('.dis_name').next().show();

//     }else{
//         $('.dis_name').next().hide();
//     }
//     if(dis_name== '' ){
//         return false;
//     }
// });
$(document).on('click', '.edit_district_btn', function () {
    var districtid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/add_district/' + districtid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var state_id = response['district_master'].state_id;
                var dis_name = response['district_master'].dis_name;
                var districtid = response['district_master']._id;
                $('#state_id').val(state_id).trigger('change');
                $('.dis_name').val(dis_name);
                $('#formheading span').text('Edit');
                $("#adddistrict").attr("action", "/add_district/edit_district/" + districtid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete-district', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/add_district/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/add_district/add_district';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });

});
//product
$("#addproduct").on("submit", function () {
    var item_name = $.trim($('.item_name').val());
    // alert(stateName);
    if (item_name == '') {

        $('.item_name').next().show();

    } else {
        $('.item_name').next().hide();
    }
    if (item_name == '') {
        return false;
    }
});
//expense
$("#expense").on("submit", function () {
    var expense_name = $.trim($('.expense_name').val());
    var expense_type = $.trim($('.expense_type').val());
    // alert(stateName);
    if (expense_name == '') {

        $('.expense_name').next().show();

    } else {
        $('.expense_name').next().hide();
    }
    if (expense_type == '') {

        $('.expense_type').next().show();

    } else {
        $('.expense_type').next().hide();
    }
    if (expense_name == '' || expense_type == '') {
        return false;
    }
});
$(document).on('click', '.edit_expense_btn', function () {
    var expenseid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/expense/' + expenseid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var expense_name = response['expense'].expense_name;
                var sno = response['expense'].sno;
                var expense_type = response['expense'].expense_type;
                var productid = response['expense']._id;
                $('.expense_name').val(expense_name);
                $('.expense_type').val(expense_type);
                $('#formheading span').text('Edit');
                $("#expense").attr("action", "/expense/edit_expense/" + productid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete-expense', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');

    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/expense/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/expense/expense';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
//proprietor
$("#proprietor").on("submit", function () {
    var proprietor_name = $.trim($('.proprietor_name').val());
    // alert(stateName);
    if (proprietor_name == '') {

        $('.proprietor_name').next().show();

    } else {
        $('.proprietor_name').next().hide();
    }
    if (proprietor_name == '') {
        return false;
    }
});
// group
$("#addgroup").on("submit", function () {
    var group_name = $.trim($('.group_name').val());
    // alert(stateName);
    if (group_name == '') {

        $('.group_name').next().show();

    } else {
        $('.group_name').next().hide();
    }
    if (group_name == '') {
        return false;
    }
});
$(document).on('click', '.edit_group_btn', function () {
    var groupid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/group/' + groupid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var group_name = response['group'].group_name;
                var groupid = response['group']._id;
                $('.group_name').val(group_name);
                $('#formheading span').text('Edit');
                $("#addgroup").attr("action", "/group/edit_group/" + groupid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
// $(document).on('click', '.delete-group', function () {
//     $('.loader').show();
//     let id = $(this).attr('data-id');
//     swal({
//         icon:'warning',
//         title: "Sure",
//         text:'Are you sure you want to delete it?',
//         buttons: ["Cancel","Confirm"],
//         dangerMode:true
//     }).then((willDelete) => {
//         if (willDelete) {
//             $.ajax({
//                 type: 'DELETE',
//                 url: '/group/' + id,
//                 success: function (response) {
//                     // $('.loader').hide();
//                     window.location.href = '/group/group';
//                     $('.loader').hide();
//                 },
//                 error: function (err) {
//                     console.log(err);
//                 }
//             });
//         }
//       });

// });

$("#bank").on("submit", function () {
    var bank_name = $.trim($('.bank_name').val());
    // alert(stateName);
    if (bank_name == '') {

        $('.bank_name').next().show();

    } else {
        $('.bank_name').next().hide();
    }
    if (bank_name == '') {
        return false;
    }
});
$(document).on('click', '.edit_bank_btn', function () {
    var bankid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/bank/' + bankid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var bank_name = response['bank'].bank_name;
                var bnk_brnch = response['bank'].bnk_brnch;
                var bnk_ifsc = response['bank'].bnk_ifsc;
                var bnk_micr = response['bank'].bnk_micr;
                var bnk_center = response['bank'].bnk_center;
                var bnk_add = response['bank'].bnk_add;
                var bnk_add1 = response['bank'].bnk_add1;
                var bnk_dist = response['bank'].bnk_dist;
                var state_name = response['bank'].state_name;
                var bnk_cont = response['bank'].bnk_cont;
                var bankid = response['bank']._id;
                $('.bank_name').val(bank_name);
                $('.bnk_brnch').val(bnk_brnch);
                $('.bnk_ifsc').val(bnk_ifsc);
                $('.bnk_micr').val(bnk_micr);
                $('.bnk_center').val(bnk_center);
                $('.bnk_add').val(bnk_add);
                $('.bnk_add1').val(bnk_add1);
                $('.bnk_dist').val(bnk_dist).trigger('change');
                $('.state_name').val(state_name).trigger('change');
                $('.bnk_cont').val(bnk_cont);
                $('#formheading span').text('Edit');
                $('#addbrand').hide();
                $('#editbank').show();
                $("#editbank").attr("action", "/bank/edit_bank/" + bankid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete-bank', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/bank/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/bank/bank';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });

});
//brand
$("#brand").on("submit", function () {
    var brand_name = $.trim($('.brand_name').val());
    // alert(stateName);
    if (brand_name == '') {

        $('.brand_name').next().show();

    } else {
        $('.brand_name').next().hide();
    }
    if (brand_name == '') {
        return false;
    }
});
$(document).on('click', '.delete-brand', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/brand/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/brand/brand';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
//courier
$("#courier").on("submit", function () {
    var courier_name = $.trim($('.courier_name').val());
    // alert(stateName);
    if (courier_name == '') {

        $('.courier_name').next().show();

    } else {
        $('.courier_name').next().hide();
    }
    if (courier_name == '') {
        return false;
    }
});
$(document).on('click', '.edit_courie_btn', function () {
    var courierid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/courier/' + courierid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                //console.log(response);
                var courier_name = response['courier'].courier_name;
                var courierid = response['courier']._id;
                $('.courier_name').val(courier_name);
                $('#formheading span').text('Edit');
                $("#addcourier").attr("action", "/courier/edit_courier/" + courierid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete-courie', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/courier/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/courier/courier';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
//Transport
$("#transport").on("submit", function () {
    var transport_name = $.trim($('.transport_name').val());
    // alert(stateName);
    if (transport_name == '') {

        $('.transport_name').next().show();

    } else {
        $('.transport_name').next().hide();
    }
    if (transport_name == '') {
        return false;
    }
});
//edit workmaster
$(document).on('click', '.edit_work_master_btn', function(){
    $('.loader').show();
    var work_master_id = $(this).attr('data-id');
    alert(work_master_id);
    $.ajax({
        type:'GET',
        url: '/work_master/'+work_master_id,
        dataType:'json',
        success: function(response) {
            if(response['success'] == true) {
                var p_code = response['work_master'].p_code;
                var sno = response['work_master'].sno;
                var work_name = response['work_master'].work_name;
                var agency = response['work_master'].agency;
                var work_master_id = response['work_master']._id;
                var short_name = response['work_master'].short_name;
                var hsn_code = response['work_master'].hsn_code;
                var item_name = response['work_master'].item_name;
                var item_unit = response['work_master'].item_unit;
                var work_master_group = response['work_master'].work_master_group;
                $('.p_code').val(p_code);
                $('.sno').val(sno);
                $('.work_name').val(work_name);
                $('.agency').val(agency);
                $('.short_name').val(short_name);
                $('.hsn_code').val(hsn_code);
                $('.item_name').val(item_name);
                $('.item_unit').val(item_unit);
                var new_div;
                for (let index = 0; index < work_master_group.length; index++){
                        var brandvariation = work_master_group[index];
                        var new_div = "<tr class='product_wrapper' id='prabal"+index+"'>";
                        new_div +='<td><input class="form-control" name="work_master_group['+index+'][it_pck]" value="'+brandvariation.it_pck+'" placeholder="Packing" type="text" required="" style="width:100%;"/></td>';
                        new_div +='<td>';
                        new_div +='<select name="work_master_group['+index+'][it_bk]" id="it_bk" value="" class="form-control"  style="width:100%;">';
                        new_div +='<option value="'+brandvariation.it_bk+'">'+brandvariation.it_bk+'</option>'
                        new_div +='<option value="katta">Katta</option>';
                        new_div +='<option value="bori">Bori</option>';
                        new_div +='<option value="box">Box</option>';
                        new_div +='</select>';
                        new_div +='</td>';
                        new_div +='<td><input class="form-control" type="text" placeholder="Brokerage Rate(Seller)" name="work_master_group['+index+'][it_ratesl]" value="'+brandvariation.it_ratesl+'" style="width:100%;"/></td>';
                        new_div +='<input type="hidden" name="cntrer'+index+'" value="'+index+'" id="cntrer'+index+'" class="form-control" style="width: 102px;text-align: -webkit-right;">';
                        new_div +='<td>';
                        new_div +='<select name="work_master_group['+index+'][it_ratetypsl]" id="it_ratetypsl" class="form-control" style="width:100%;">';
                        new_div +='<option value="'+brandvariation.it_ratetypsl+'">'+brandvariation.it_ratetypsl+'</option>';
                        new_div +='<option value="%">%</option>';
                        new_div +='<option value="PBag">PBag</option>';
                        new_div +='<option value="PQtl">PQtl</option>';
                        new_div +='<option value="Fix">Fix</option>';
                        new_div +='</select>';
                        new_div +='<td>';
                        new_div +='<input class="form-control" type="text" placeholder="Brokerage Rate (Buyer)" style="width:100%;" name="work_master_group['+index+'][it_ratebr]" value="'+brandvariation.it_ratebr+'"/>';
                        new_div +='</td>';
                        new_div +='<td>';
                        new_div +='<select name="work_group['+index+'][it_ratetypbr]" id="it_ratetypbr" value="" class="form-control" style="width:100%;">';
                        new_div +='<option value="'+brandvariation.it_ratetypbr+'">'+brandvariation.it_ratetypbr+'</option>'
                        new_div +='<option value="%">%</option>';
                        new_div +='<option value="PBag">PBag</option>';
                        new_div +='<option value="PQtl">PQtl</option>';
                        new_div +='<option value="Fix">Fix</option>';
                        new_div +='</select>';
                        new_div +='</td>';
                        if(index != 0)
                        {
                        new_div +="<td><a onclick='remove_updateproduct("+index+")'; style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                        
                        }
                            $('.work_master_result').append(new_div);
                           
                    } 
                //css
                $(".rr").css("margin-right","-648px");
                $(".rr").css("margin-bottom","10px");
                $(".del").css("float","right");
                $(".del").css("margin-top","-48px");
                $(".del").css("margin-right","102px");
                $(".cc").css("margin-top","-45px");
                $(".cc").css("margin-right","52px");
                $(".cc").css("float","right");
                //css end
               
                $('#edit').show();
                $('#edit_work_master').show();
                $('#work_master').hide();
                $('#show').hide();
                // $('#product_hide').hide();
                $("#work_master").attr("action", "/work_master/edit_work_master/" + work_master_id);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function(err) {
            console.log(err);
        }
    });
});

//end edit workmaster
//edit job master
$(document).on('click', '.edit_job_master_btn', function(){
    $('.loader').show();
    var job_master_id = $(this).attr('data-id');
    alert(job_master_id);
    $.ajax({
        type:'GET',
        url: '/job_master/'+job_master_id,
        dataType:'json',
        success: function(response) {
            if(response['success'] == true) {
                var p_code = response['job_master'].p_code;
                var sno = response['job_master'].sno;
                var job_name = response['job_master'].job_name;
                var work_master = response['job_master'].work_master;
                var d_work = response['job_master'].d_work;
                var work_master_id = response['job_master']._id;
                var short_name = response['job_master'].short_name;
                var hsn_code = response['job_master'].hsn_code;
                var item_name = response['job_master'].item_name;
                var item_unit = response['job_master'].item_unit;
                var job_master_group = response['job_master'].job_master_group;
                $('.p_code').val(p_code);
                $('.sno').val(sno);
                $('.job_name').val(job_name);
                $('.work_name').val(work_name);
                $('.d_work').val(d_work);
                $('.short_name').val(short_name);
                $('.hsn_code').val(hsn_code);
                $('.item_name').val(item_name);
                $('.item_unit').val(item_unit);
                var new_div;
                for (let index = 0; index < job_master_group.length; index++){
                        var brandvariation = job_master_group[index];
                        var new_div = "<tr class='product_wrapper' id='prabal"+index+"'>";
                        new_div +='<td><input class="form-control" name="job_master_group['+index+'][it_pck]" value="'+brandvariation.it_pck+'" placeholder="Packing" type="text" required="" style="width:100%;"/></td>';
                        new_div +='<td>';
                        new_div +='<select name="job_master_group['+index+'][it_bk]" id="it_bk" value="" class="form-control"  style="width:100%;">';
                        new_div +='<option value="'+brandvariation.it_bk+'">'+brandvariation.it_bk+'</option>'
                        new_div +='<option value="katta">Katta</option>';
                        new_div +='<option value="bori">Bori</option>';
                        new_div +='<option value="box">Box</option>';
                        new_div +='</select>';
                        new_div +='</td>';
                        new_div +='<td><input class="form-control" type="text" placeholder="Brokerage Rate(Seller)" name="work_master_group['+index+'][it_ratesl]" value="'+brandvariation.it_ratesl+'" style="width:100%;"/></td>';
                        new_div +='<input type="hidden" name="cntrer'+index+'" value="'+index+'" id="cntrer'+index+'" class="form-control" style="width: 102px;text-align: -webkit-right;">';
                        new_div +='<td>';
                        new_div +='<select name="job_master_group['+index+'][it_ratetypsl]" id="it_ratetypsl" class="form-control" style="width:100%;">';
                        new_div +='<option value="'+brandvariation.it_ratetypsl+'">'+brandvariation.it_ratetypsl+'</option>';
                        new_div +='<option value="%">%</option>';
                        new_div +='<option value="PBag">PBag</option>';
                        new_div +='<option value="PQtl">PQtl</option>';
                        new_div +='<option value="Fix">Fix</option>';
                        new_div +='</select>';
                        new_div +='<td>';
                        new_div +='<input class="form-control" type="text" placeholder="Brokerage Rate (Buyer)" style="width:100%;" name="work_master_group['+index+'][it_ratebr]" value="'+brandvariation.it_ratebr+'"/>';
                        new_div +='</td>';
                        new_div +='<td>';
                        new_div +='<select name="job_group['+index+'][it_ratetypbr]" id="it_ratetypbr" value="" class="form-control" style="width:100%;">';
                        new_div +='<option value="'+brandvariation.it_ratetypbr+'">'+brandvariation.it_ratetypbr+'</option>'
                        new_div +='<option value="%">%</option>';
                        new_div +='<option value="PBag">PBag</option>';
                        new_div +='<option value="PQtl">PQtl</option>';
                        new_div +='<option value="Fix">Fix</option>';
                        new_div +='</select>';
                        new_div +='</td>';
                        if(index != 0)
                        {
                        new_div +="<td><a onclick='remove_updateproduct("+index+")'; style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                        
                        }
                            $('.job_master_result').append(new_div);
                           
                    } 
                //css
                $(".rr").css("margin-right","-648px");
                $(".rr").css("margin-bottom","10px");
                $(".del").css("float","right");
                $(".del").css("margin-top","-48px");
                $(".del").css("margin-right","102px");
                $(".cc").css("margin-top","-45px");
                $(".cc").css("margin-right","52px");
                $(".cc").css("float","right");
                //css end
               
                $('#edit').show();
                $('#edit_job_master').show();
                $('#job_master').hide();
                $('#show').hide();
                // $('#product_hide').hide();
                $("#job_master").attr("action", "/job_master/edit_job_master/" + job_master_id);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function(err) {
            console.log(err);
        }
    });
});

//end edit job master
    function removeProduct(id){
        var a= confirm('Are you want to delete it');
        var len = $("input[name='cntrer']").length;
        if(a==true && len>1)$('#prabal'+id).remove();
    }
    //edit product master
    $(document).on('click', '.edit_product_master_btn', function(){
        
        $('.loader').show();
        var product_master_id = $(this).attr('data-id');
        // alert(product_master_id);
        $.ajax({
            type:'GET',
            url: '/product_master/'+product_master_id,
            dataType:'json',
            success: function(response) {
                // console.log(response);
                if(response['success'] == true) {
                   
                    // var p_code = response['product_master'].p_code;
                    // var sno = response['product_master'].sno;
                    var product_name = response['p_mast'].product_name;
                    // var jobs = response['product_master'].jobs;
                    var vhpxproduct = response['p_mast']._id;
                    // alert(vhpxproduct)
                    var d_product = response['p_mast'].d_product;
                    var jobs = response['p_mast'].jobs;
                    var short_name = response['p_mast'].short_name;
                    var hsn_code = response['p_mast'].hsn_code;
                    var item_name = response['p_mast'].item_name;
                    var item_unit = response['p_mast'].item_unit;
                    var product_master_group = response['p_mast'].product_master_group;
                    var len = $("input[name='cntrer']").length;
                    if(len>1){
                        for(let i=0; i<len; i++){
                            $('#prabal'+i).remove();
                        }  
                    }else{if(product_master_group.length!='')$('#prabal0').remove();}
                    // $('.sno').val(sno);
                    $('.product_name').val(product_name);
                    $('.vhpxproduct').val(vhpxproduct);
                    $('.jobs').val(jobs).trigger('change');
                    $('.d_product').val(d_product);
                    // $('.product_master_group').val(product_master_group);
                    $('.short_name').val(short_name);
                    $('.hsn_code').val(hsn_code);
                    $('.item_name').val(item_name);
                    $('.item_unit').val(item_unit);
                    var new_div;
                    for (let index = 0; index < product_master_group.length; index++){
                            var brandvariation = product_master_group[index];
                            var new_div = "<tr class='product_wrapper' id='prabal"+index+"'>";
                            new_div +='<td>';
                            new_div +='<input type="hidden" name="cntrer" value="'+index+'" id="cntrer'+index+'">';
                            new_div +='';
                            new_div +='<input class="form-control selectproductfocus product_master_group['+index+'][width]" value="'+brandvariation.width+'" placeholder="Width"  name="product_master_group['+index+'][width]" type="text" style="width:100%"/>';
                                            
                            new_div +='<td>';
                            new_div +='<input class="form-control product_master_group['+index+'][pur_rt] " placeholder="Pur Rt" value="'+brandvariation.pur_rt+'"  name="product_master_group['+index+'][pur_rt]" type="text" style="width:100%"/></td>';
                            new_div +='<td>';
                            new_div +='<input class="form-control product_master_group['+index+'][stock]" placeholder="Stock" value="'+brandvariation.stock+'" name="product_master_group['+index+'][stock]" type="text" style="width:100%"/></td>';
                            new_div +='<td>';
                            new_div +='<input class="form-control product_master_group['+index+'][rate]" placeholder="Rate" value="'+brandvariation.rate+'" name="product_master_group['+index+'][rate]" type="text" style="width:100%"/></td>';
                            new_div +='<td>';
                            new_div +='<input class="form-control amountfocus" placeholder="Value" value="'+brandvariation.value+'"  name="product_master_group['+index+'][value]" type="text" style="width:100%"/></td>';
                            // new_div +='<td>';
                            // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                            new_div +="<td><a onclick='removeProduct("+index+")' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td>";
                            new_div +="</tr>";
                            $(new_div).insertBefore("#insert_product");
                            // counter++;
                            // member++;
                            $(".productplace").select2({
                                // placeholder: "Select Raw Material",
                                allowClear: true,
                            });
                            $(".sku").select2({
                                // placeholder: "Select SKU",
                                allowClear: true,
                            });
                            $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                        } 
                    $("#product_master").attr("action", "/product_master/edit_product_master/" + product_master_id);
                } 
            },
            error: function(err) {
                console.log(err);
            }
        });
    });
    // end edit product master

    //edit job allotment 
    $(document).on('click', '.edit_job_allotment_btn', function(){
        
        $('.loader').show();
        var job_allotment_id = $(this).attr('data-id');
        alert(job_allotment_id);
        $.ajax({
            type:'GET',
            url: '/job_allotment/'+job_allotment_id,
            dataType:'json',
            success: function(response) {
                console.log(response);
                if(response['success'] == true) {
                   
                    // var p_code = response['product_master'].p_code;
                    // var sno = response['product_master'].sno;
                    var entry_no = response['j_mast'].entry_no;
                    // var jobs = response['product_master'].jobs;
                    var vhpxproduct = response['j_mast']._id;
                    var date = response['j_mast'].date;
                    var jobs = response['j_mast'].jobs;
                    var emp_name = response['j_mast'].emp_name;
                    var cmp_no = response['j_mast'].cmp_no;
                    var job_no = response['j_mast'].job_no;
                    // var item_unit = response['j_mast'].item_unit;
                    var job_allotment_group = response['j_mast'].job_allotment_group;
                    var len = $("input[name='cntrer']").length;
                    if(len>1){
                        for(let i=0; i<len; i++){
                            $('#prabal'+i).remove();
                        }  
                    }else{if(job_allotment_group.length!='')$('#prabal0').remove();}
                    // $('.sno').val(sno);
                    $('.entry_no').val(entry_no);
                    $('.vhpxproduct').val(vhpxproduct);
                    $('.jobs').val(jobs).trigger('change');
                    $('.date').val(date);
                    // $('.product_master_group').val(product_master_group);
                    $('.emp_name').val(emp_name);
                    $('.cmp_no').val(cmp_no);
                    $('.job_no').val(job_no);
                    // $('.item_unit').val(item_unit);
                    var new_div;
                    for (let index = 0; index < job_allotment_group.length; index++){
                            var brandvariation = job_allotment_group[index];
                            var new_div = "<tr class='product_wrapper' id='prabal"+index+"'>";
                            new_div +='<td>';
                            new_div +='<input type="hidden" name="cntrer" value="'+index+'" id="cntrer'+index+'">';
                            new_div +='';
                            new_div +='<input class="form-control selectproductfocus job_allotment_group['+index+'][jobNo_compNo]" value="'+brandvariation.jobNo_compNo+'" placeholder="Job No Comp No"  name="job_allotment_group['+index+'][jobNo_compNo]" type="text" style="width:100%"/>';
                                            
                            new_div +='<td>';
                            new_div +='<input class="form-control job_allotment_group['+index+'][worker] " placeholder="Worker" value="'+brandvariation.worker+'"  name="job_allotment_group['+index+'][worker]" type="text" style="width:100%"/></td>';
                            new_div +='<td>';
                            new_div +='<input class="form-control job_allotment_group['+index+'][work]" placeholder="Work" value="'+brandvariation.work+'" name="job_allotment_group['+index+'][work]" type="text" style="width:100%"/></td>';
                            new_div +='<td>';
                            new_div +='<input class="form-control job_allotment_group['+index+'][jobFrom]" placeholder="From" value="'+brandvariation.jobFrom+'" name="job_allotment_group['+index+'][jobFrom]" type="text" style="width:100%"/></td>';
                            new_div +='<td>';
                            new_div +='<input class="form-control amountfocus job_allotment_group['+index+'][jobTo]" placeholder="To" value="'+brandvariation.jobTo+'"  name="job_allotment_group['+index+'][jobTo]" type="text" style="width:100%"/></td>';
                            new_div +='<td>';
                            new_div +='<input class="form-control amountfocus job_allotment_group['+index+'][confirmation]" placeholder="Confirmation" value="'+brandvariation.confirmation+'"  name="job_allotment_group['+index+'][confirmation]" type="text" style="width:100%"/></td>';
                            // new_div +='<td>';
                            // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                            new_div +="<td><a onclick='removeProduct("+index+")' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td>";
                            new_div +="</tr>";
                            $(new_div).insertBefore("#insert_product");
                            // counter++;
                            // member++;
                            $(".productplace").select2({
                                // placeholder: "Select Raw Material",
                                allowClear: true,
                            });
                            $(".sku").select2({
                                // placeholder: "Select SKU",
                                allowClear: true,
                            });
                            $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                        } 
                    $("#job_allotment").attr("action", "/job_allotment/edit_job_allotment/" + job_allotment_id);
                } 
            },
            error: function(err) {
                console.log(err);
            }
        });
    });
    //end edit job allotment

    //edit inquiry master
    $(document).on('click', '.edit_inquiry_master_btn', function(){
        $('.loader').show();
        var inquiry_master_id = $(this).attr('data-id');
        // alert(inquiry_master_id);
        $.ajax({
            type:'GET',
            url: '/inquiry_master/'+inquiry_master_id,
            dataType:'json',
            success: function(response) {
                if(response['success'] == true) {
                    var p_code = response['inquiry_master'].p_code;
                    var sno = response['inquiry_master'].sno;
                    var coustomer_name = response['inquiry_master'].coustomer_name;
                    // var jobs = response['product_master'].jobs;
                    // var jobs_id = response['product_master']._id;
                    var inquiry_no = response['inquiry_master'].inquiry_no;
                    var inquiry_no = response['inquiry_master'].inquiry_date;
                    var through = response['inquiry_master'].through;
                    var short_name = response['inquiry_master'].short_name;
                    var hsn_code = response['inquiry_master'].hsn_code;
                    var item_name = response['inquiry_master'].item_name;
                    var item_unit = response['inquiry_master'].item_unit;
                    var inquiry_master_group = response['inquiry_master'].inquiry_master_group;

                    var len = $("input[name='cntrer']").length;
                    if(len>1){
                        for(let i=0; i<len; i++){
                            $('#prabal'+i).remove();
                        }  
                    }else{if(inquiry_master_group.length!='')$('#prabal0').remove();}

                    $('.p_code').val(p_code);
                    $('.sno').val(sno);
                    $('.coustomer_name').val(coustomer_name);
                    $('.inquiry_no').val(inquiry_no);
                    $('.inquiry_date').val(inquiry_date);
                    $('.through').val(through);
                    $('.short_name').val(short_name);
                    $('.hsn_code').val(hsn_code);
                    $('.item_name').val(item_name);
                    $('.item_unit').val(item_unit);
                    var new_div;
                    for (let index = 0; index < inquiry_master_group.length; index++){
                            var brandvariation = inquiry_master_group[index];
                            var new_div = "<tr class='product_wrapper' id='prabal"+index+"'>";
                            new_div +='<td><input class="form-control" name="inquiry_master_group['+index+'][it_pck]" value="'+brandvariation.it_pck+'" placeholder="Packing" type="text" required="" style="width:100%;"/></td>';
                            new_div +='<td>';
                            new_div +='<select name="inquiry_master_group['+index+'][it_bk]" id="it_bk" value="" class="form-control"  style="width:100%;">';
                            new_div +='<option value="'+brandvariation.it_bk+'">'+brandvariation.it_bk+'</option>'
                            new_div +='<option value="katta">Katta</option>';
                            new_div +='<option value="bori">Bori</option>';
                            new_div +='<option value="box">Box</option>';
                            new_div +='</select>';
                            new_div +='</td>';
                            new_div +='<td><input class="form-control" type="text" placeholder="Brokerage Rate(Seller)" name="inquiry_master_group['+index+'][it_ratesl]" value="'+brandvariation.it_ratesl+'" style="width:100%;"/></td>';
                            new_div +='<input type="hidden" name="cntrer'+index+'" value="'+index+'" id="cntrer'+index+'" class="form-control" style="width: 102px;text-align: -webkit-right;">';
                            new_div +='<td>';
                            new_div +='<select name="inquiry_master_group['+index+'][it_ratetypsl]" id="it_ratetypsl" class="form-control" style="width:100%;">';
                            new_div +='<option value="'+brandvariation.it_ratetypsl+'">'+brandvariation.it_ratetypsl+'</option>';
                            new_div +='<option value="%">%</option>';
                            new_div +='<option value="PBag">PBag</option>';
                            new_div +='<option value="PQtl">PQtl</option>';
                            new_div +='<option value="Fix">Fix</option>';
                            new_div +='</select>';
                            new_div +='<td>';
                            new_div +='<input class="form-control" type="text" placeholder="Brokerage Rate (Buyer)" style="width:100%;" name="inquiry_master_group['+index+'][it_ratebr]" value="'+brandvariation.it_ratebr+'"/>';
                            new_div +='</td>';
                            new_div +='<td>';
                            new_div +='<select name="inquiry_group['+index+'][it_ratetypbr]" id="it_ratetypbr" value="" class="form-control" style="width:100%;">';
                            new_div +='<option value="'+brandvariation.it_ratetypbr+'">'+brandvariation.it_ratetypbr+'</option>'
                            new_div +='<option value="%">%</option>';
                            new_div +='<option value="PBag">PBag</option>';
                            new_div +='<option value="PQtl">PQtl</option>';
                            new_div +='<option value="Fix">Fix</option>';
                            new_div +='</select>';
                            new_div +='</td>';
                            if(index != 0)
                            {
                            new_div +="<td><a onclick='remove_updateproduct("+index+")'; style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                            
                            }
                                $('.inquiry_master_result').append(new_div);
                               
                        } 
                    //css
                    $(".rr").css("margin-right","-648px");
                    $(".rr").css("margin-bottom","10px");
                    $(".del").css("float","right");
                    $(".del").css("margin-top","-48px");
                    $(".del").css("margin-right","102px");
                    $(".cc").css("margin-top","-45px");
                    $(".cc").css("margin-right","52px");
                    $(".cc").css("float","right");
                    //css end
                   
                    $('#edit').show();
                    $('#edit_inquiry_master').show();
                    $('#inquiry_master').hide();
                    $('#show').hide();
                    // $('#product_hide').hide();
                    $("#inquiry_master").attr("action", "/inquiry_master/edit_inquiry_master/" + inquiry_master_id);
                } else {
                    $('.branddanger').html(response['message']);
                    $('.branddanger').show();
                    $('.brandsuccess').hide();
                }
                $('.loader').hide();
            },
            error: function(err) {
                console.log(err);
            }
        });
    });
    //end edit complaint master



$(document).on('click', '.delete_customer_mast', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/customer/' + id,
                success: function (response) {
                     window.location.href = '/customer11/customer_list';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_work_mast', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/worksheet_entry/' + id,
                success: function (response) {
                     window.location.href = '/worksheet_entry/worksheet_entry_list';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_mrn', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/mrn_challan/' + id,
                success: function (response) {
                    
                     window.location.href = '/mrn_challan/mrn_list_mast';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
function saleprint(){
    var period = $('#contractrange').val();
    var start_date = period.substr(0,10);
    var end_date = period.substr(14,10);
    // alert(start_date+"   "+end_date)
    $.ajax({
        type: 'GET',
        url: '/sales_order_mast/sales_order_print',
        data:{
            start_date,
            end_date
        },
        success: function (response) {
            if(response['success'] == 'true'){
                var so = response['somast'];
                var newdiv = document.createElement('div');
               
                new_div = "<tr class='contract_wrapper' id='rohit"+ lstidx +"'>";
                new_div += '<td>'+'</td>';
                new_div += '<td id="orderpriceso'+lstidx+'">';
                new_div += ' <td  id="pacincso'+lstidx+'">';
                new_div += '</td>';
                new_div += '</td>';
                new_div += '<td>';
                new_div += '</td>';
                new_div += '<td>';
                new_div += '</td>';                    
                new_div += '<td>';
                new_div += '</td>'
            }
        },
        error: function (err) {
            console.log(err);
        }
    });
}


$(document).on('click', '.delete_sales', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/sales_order_mast/' + id,
                success: function (response) {
                     window.location.href = '/sales_order_mast/sales_list_mast';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_pord', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/pur_order/' + id,
                success: function (response) {
                     window.location.href = '/pur_order/pur_order_list';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_out', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/outward_challan/' + id,
                success: function (response) {
                     window.location.href = '/outward_challan/outward_challanlist';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_sales_order', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/sales_order_mast/' + id,
                success: function (response) {
                     window.location.href = '/sales_order_mast/sales_list_mast';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_cash_bank', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/cash_bank/' + id,
                success: function (response) {
                     window.location.href = '/cash_bank/cash_bank_list';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_promast', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/profarma/'+ id,
                success: function (response) {
                     window.location.href = '/profarma/proforma_list';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_commercial', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/commercial/'+ id,
                success: function (response) {
                     window.location.href = '/commercial/commercial_list';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_product_mast', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/product_mast/'+ id,
                success: function (response) {
                     window.location.href = '/product_mast/product_mast';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on('click', '.delete_product_raw_master', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/product_raw_master/'+ id,
                success: function (response) {
                     window.location.href = '/product_raw_master/product_raw_master';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});

//delete workmaster
$(document).on('click', '.delete_work_master', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/work_master/'+ id,
                success: function (response) {
                     window.location.href = '/work_master/work_master';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
//end delete workmaster

    //delete job master
    $(document).on('click', '.delete_job_master', function (event) {
        event.preventDefault();
        $('.loader').show();
        let id = $(this).attr('data-id');
        swal({
            icon:'warning',
            title: "Sure",
            text:'Are you sure you want to delete it?',
            buttons: true,
            dangerMode:true
        }).then((willDelete) => {
            if (willDelete) {
    
                $.ajax({
                    type: 'DELETE',
                    url: '/job_master/'+ id,
                    success: function (response) {
                         window.location.href = '/job_master/job_master';
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            }
          });
    });
    //end delete job master
    // delete product master
    $(document).on('click', '.delete_product_master', function (event) {
        event.preventDefault();
        $('.loader').show();
        let id = $(this).attr('data-id');
        swal({
            icon:'warning',
            title: "Sure",
            text:'Are you sure you want to delete it?',
            buttons: true,
            dangerMode:true
        }).then((willDelete) => {
            if (willDelete) {
    
                $.ajax({
                    type: 'DELETE',
                    url: '/product_master/'+ id,
                    success: function (response) {
                         window.location.href = '/product_master/product_master';
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            }
          });
    });
    // end delete product master


    //delete project entry 
    $(document).on('click', '.delete_project_entry', function (event) {
        event.preventDefault();
        $('.loader').show();
        let id = $(this).attr('data-id');
        swal({
            icon:'warning',
            title: "Sure",
            text:'Are you sure you want to delete it?',
            buttons: true,
            dangerMode:true
        }).then((willDelete) => {
            if (willDelete) {
    
                $.ajax({
                    type: 'DELETE',
                    url: '/project_entry/'+ id,
                    success: function (response) {
                         window.location.href = '/project_entry/project_entry';
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            }
          });
    });
    // end delete product master


    //delete job allotment
    $(document).on('click', '.delete_job_allotment', function (event) {
        event.preventDefault();
        $('.loader').show();
        let id = $(this).attr('data-id');
        swal({
            icon:'warning',
            title: "Sure",
            text:'Are you sure you want to delete it?',
            buttons: true,
            dangerMode:true
        }).then((willDelete) => {
            if (willDelete) {
    
                $.ajax({
                    type: 'DELETE',
                    url: '/job_allotment/'+ id,
                    success: function (response) {
                         window.location.href = '/job_allotment/job_allotment';
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            }
          });
    });
    //end delete job allotment

    //delete inquiry
    $(document).on('click', '.delete_inquiry_master', function (event) {
        event.preventDefault();
        $('.loader').show();
        let id = $(this).attr('data-id');
        swal({
            icon:'warning',
            title: "Sure",
            text:'Are you sure you want to delete it?',
            buttons: true,
            dangerMode:true
        }).then((willDelete) => {
            if (willDelete) {
    
                $.ajax({
                    type: 'DELETE',
                    url: '/inquiry_master/'+ id,
                    success: function (response) {
                         window.location.href = '/inquiry_master/inquiry_master';
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            }
          });
    });
    //end delete inquiry

    //delete complaint master
    $(document).on('click', '.delete_complaint_master', function (event) {
        event.preventDefault();
        $('.loader').show();
        let id = $(this).attr('data-id');
        swal({
            icon:'warning',
            title: "Sure",
            text:'Are you sure you want to delete it?',
            buttons: true,
            dangerMode:true
        }).then((willDelete) => {
            if (willDelete) {
    
                $.ajax({
                    type: 'DELETE',
                    url: '/complaint_master/'+ id,
                    success: function (response) {
                         window.location.href = '/complaint_master/complaint_master';
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            }
          });
    });
    //end delete complaint master


// $(document).on('click', '.delete_product_mast', function () {
//     $('.loader').show();
//     let id = $(this).attr('data-id');
//     $.ajax({
//         type: 'DELETE',
//         url: '/product_mast/confirm/' + id,
//         success: function (response) {
//             console.log(response)
//             if(response['success'] == "true"){
//                 swal({
//                     title: "Finish Goods Master",
//                     text: "This Product Is Used",
//                     icon: "warning",
//                     timer: 1500,
//                     buttons: false
                 
//                 }) 
//             }
//             if(response['success'] == "false"){
//                 swal({
//                     icon:'warning',
//                     title: "Sure",
//                     text:'Are you sure you want to delete it?',
//                     buttons: ["Cancel","Confirm"],
//                     dangerMode:true
//                 }).then((willDelete) => {
//                     if (willDelete) {
//                         $.ajax({
//                             type: 'DELETE',
//                             url: '/product_mast/' + id,
//                             success: function (response) {
//                                 // $('.loader').hide();
//                                 window.location.href = '/product_mast/product_mast';
//                                 $('.loader').hide();
//                             },
//                             error: function (err) {
//                                 console.log(err);
//                             }
//                         });
//                     }
//                   });
//             }
//             // window.location.href = '/state_master/state_master';
//             $('.loader').hide();
//         },
//         error: function (err) {
//             console.log(err);
//         }
//     });
// }); 

$(document).on('click', '.delete_outmast', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/outward_challan/'+ id,
                success: function (response) {
                     window.location.href = '/outward_challan/outwardchallan_list';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});





////security

$(document).on('click', '.edit_security_btn', function () {
    var securityid = $(this).attr('data-id');
    // alert(securityid);
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/security_right/' + securityid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                //console.log(response);
                var right_name = response['security'].right_name;
                var right_desc = response['security'].right_desc;
                var sno = response['security'].sno;
                var securityid = response['security']._id;
                $('.sno').val(sno);
                $('.right_name').val(right_name);
                $('.right_desc').val(right_desc);
                $('#edit_security').show();
                $('#security_add').hide();
                $("#edit_security").attr("action", "/security_right/edit_security/" + securityid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete-security', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');

    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/security_right/' + id,
                success: function (response) {
                    window.location.href = '/security_right/security_right';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on("change.select2", "#br_code", function () {
    $("#delivery").show();
    $('.loader').show();
    var br_code = $("#br_code").val();
    $.ajax({
        type: 'GET',
        url: '/delivery_entry/saudaname',
        dataType: 'json',
        data: {
            ID: br_code
        },
        success: function (data) {
            // console.log(data);
            var i, j, result, sau;
            result='';
            if (data['success'] == true) {
                var delveryentry1 = data['delveryentry2'];
                var product = data['product_mast'];
                var brand = data['brand'];
                // var party = data['party'];
                j = 0;
                for (i = 0; i < delveryentry1.length; i++) {
                  console.log(delveryentry1[i])
                    var delveryentry1det = delveryentry1[i]['contract_sauda_group'];
                    $.each(delveryentry1det, function (index, value) {

                        j++;
                        if(value['wght_bal']>0)
                        {
                        var filterstartdate = moment(delveryentry1[i]['sd_date']).tz("Asia/Kolkata").format('DD/MM/YYYY');
                        result += '<tr>';
                        result += '<div id="delivery-' + index + '">';
                        result += '<td><input type="text" name="disvouc_code" id="disvouc_code' + j + '" value="' + delveryentry1[i]['vouc_code'] + '" class="form-control" style="width: 72px;text-align: -webkit-right;" readonly></td>';
                        result += '<td><input type="text" name="dissd_date" id="dissd_date' + j + '" value="' + filterstartdate + '" class="form-control" style="width: 72px;" readonly></td><td>';
                        
                        if(delveryentry1[i]['sauda1']['sl_code']!=null || delveryentry1[i]['sauda1']['sl_code']!=undefined)result += '<input type="text" id="dispsl_code' + j + '" value="' + delveryentry1[i]['sauda1']['sl_code']['party_name']+ '" class="form-control" style="width: 172px;" readonly>';
                        else result += '<input type="text" id="dispsl_code' + j + '" class="form-control" style="width: 172px;" readonly>';
                      
                        if(delveryentry1[i]['sauda1']['sb_code']!=null)result += '</td><td><input type="text" name="dispsb_code" id="dispsb_code' + j + '"  value="' + delveryentry1[i]['sauda1']['sb_code']['party_name']+ '" class="form-control" style="width: 72px;" readonly></td>';
                        else result += '</td><td><input type="text" name="dispsb_code" id="dispsb_code' + j + '"   class="form-control" style="width: 72px;" readonly></td>';
                        result += '<td><select disabled name="pppp_code" id="pppp_code' + j + '"  class="form-control" style="width:102px;" readonly>';
                        result += "<option value='" + value['p_code']['_id'] + "' selected>" + value['p_code']['product_name'] + "</option>";
                        // for (p = 0; p < product.length; p++) {
                        //     if (value['p_code'] == product[p]['_id']) {

                        //         result += "<option value='" + product[p]['_id'] + "' selected>" + product[p]['product_name'] + "</option>";
                        //     }
                        // }
                        result += '</select></td><td><select name="brandcode" id="brandcode' + j + '" class="form-control brand_name" style="width: 102px;" disabled>';
                        result += "<option value='" + value['brand_code']['_id'] + "' selected>" + value['brand_code']['brand_name'] + "</option>";
                        // for (b = 0; b < brand.length; b++) {
                        //     if (value['brand_code'] == brand[b]['_id']) {
                        //         result += "<option value='" + brand[b]['_id'] + "' selected>" + brand[b]['brand_name'] + "</option>";
                        //     } 

                        // }
                        result += '</select></td><td><input type="text" name="bbbag" id="bbbbag' + j + '" value="' + value['bag'] + '" class="form-control" style="width: 72px;text-align: -webkit-right;" readonly></td>';
                        result += '<td><input type="text" name="pppppck" id="pppppck' + j + '" value="' + value['pck'] + '" class="form-control" style="width: 72px;text-align: -webkit-right;" readonly></td>';
                        result += '<td><input type="text" name="wwwwght" id="wwwwght' + j + '" value="' + value['wght'] + '" class="form-control" style="width: 72px;text-align: -webkit-right;" readonly></td>';
                        result += '<td><input type="text" name="ssssd_rate" id="ssssd_rate' + j + '" value="' + value['sd_rate'] + '" class="form-control" style="width: 72px;text-align: -webkit-right;" readonly></td>';
                        result += '<td><input type="text" name="dis_ptch" id="dis_ptch' + j + '" value="' + value['wght_exe'] + '" class="form-control" style="width: 72px;text-align: -webkit-right;" readonly></td>';
                        result += '<td><input type="hidden" name="aaaaamount" id="aaaaamount' + j + '" value="' + value['amount'] + '" class="form-control" style="width: 72px;text-align: -webkit-right;" readonly>';
                        result += '<input type="text" name="contrctbal" id="contrctbal' + j + '" oninput="calc(' + j + ')" value="' + value['wght_bal'] + '"  class="form-control" style="width: 72px;text-align: -webkit-right;" readonly></td>';
                        result += '<td><input type="number" name="delivery" id="delivery' + j + '" oninput="calc(' + j + ')"  class="form-control deliveryinputcheck addingdelivery" data-sbname= "'+delveryentry1[i]['sauda1'].sl_code.party_name+'" data-sid= "'+delveryentry1[i]['sauda1'].sl_code._id+'" style="width: 72px;text-align: -webkit-right;"></td>';
                        result += '<td><input type="text" name="new_bal" id="new_bal' + j + '"   class="form-control" style="width: 72px;text-align: -webkit-right;" readonly></td><td><input type="text" name="rmv_bal" id="rmv_bal' + j + '"  placeholder="Rmv Balance" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                        result += '<td><input type="hidden" name="sssssd2id" id="sssssd2id' + j + '"  value="' + delveryentry1[i]['_id'] + '"><input type="hidden" name="sssssd2srno" id="sssssd2srno' + j + '"  value="' + j + '"><input type="hidden" name="slbrkrtmt" id="slbrkrtmt' + j + '"  value="' + value['slbrk_rt'] + '">';
                        result += '<input type="hidden" name="slbrkrtyp" id="slbrkrtyp' + j + '"  value="' + value['slbrk_type'] + '"><input type="hidden" name="brrkramt" id="brrkramt' + j + '"  value="' + value['brbrk_rt'] + '"><input type="hidden" name="brrkrtyp" id="brrkrtyp' + j + '"  value="' + value['brbrk_typ'] + '">';
                        result += '<input type="hidden" name="slbrrt" id="slbrrt' + j + '"  value="' + value['slbrk_amt'] + '">';
                        result += '<input type="hidden" name="brbrt" id="brbrt' + j + '"  value="' + value['brbrk_amt'] + '"><input type="hidden" name="selrttt" id="selrttt' + j + '"  value="' + value['s_rate'] + '"><input type="hidden" name="buyrttt" id="buyrttt' + j + '"  value="' + value['b_rate'] + '"></td></td></div>';
                        result += '</tr>';
                        glbidx = j;
                    }
                    });
               
                }
                sau = '<input type="button"  value="OK" id="delivery_sauda" class="btn btn-primary" />';
            }
            $('.delivery_repeat_row').html(result);
            if(delveryentry1.length){
                $('#deliverysupport').modal('show');
            }else{
                swal({
                    title:'Oops!',
                    text:'No Pending Delivery',
                    buttons:false,
                    timer:1500
                })
            }
            $('.loader').hide();
        }
    });
});
// $(document).on("click", "#contsubmit", function () {

//     alert($('#printormessage').val());
    
//     swal({
//         title:'Great',
//         text:'Message Sent Successful',
//         buttons:false,
//         timer:1500
//     })

// });
$(document).on("click", "#delivery_sauda", function () {
    var valid = '';
    $('.deliveryinputcheck').each(function(){
        if($(this).val() != null && $(this).val() != ''){
            valid = true;
            $('#deliverysupport').modal('hide');
            return true;
        }
    }) 
    if(valid != true){
        alert('Please add atleast one Delivery ');
        return false;
    }


    $("#delivery").hide();
    // $(".contrct").show();
    $.ajax({
        type: 'GET',
        url: '/delivery_entry/productname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                // var result;
                var product = data['product_mast'];
                var brand = data['brand'];
                var main_loop_id = 0;

                for (i = 1; i <= glbidx; i++) {
                    var delivery = $('#delivery' + i).val();
                    var pck = $('#pppppck' + i).val();
                    var bag = $('#bag' + i).val();
                    var vouc_code = $('#disvouc_code' + i).val();
                    var sd_date = $('#sd_date' + i).val();
                    var pcode = $('#pppp_code' + i).val();
                    var brandcode = $('#brandcode' + i).val();
                    var wghttttt = $('#wwwwght' + i).val();
                    var sdrate = $('#ssssd_rate' + i).val();
                    var amountttt = $('#aaaaamount' + i).val();
                    var dis_ptch = $('#dis_ptch' + i).val();
                    var new_bal = $('#new_bal' + i).val();
                    var rmv_bal = $('#rmv_bal' + i).val();
                    var sd2id = $('#sssssd2id' + i).val();
                    var sd2srno = $('#sssssd2srno' + i).val();
                    var slbrkrtmt = $('#slbrkrtmt' + i).val();
                    var slbrkrtyp = $('#slbrkrtyp' + i).val();
                    var brrkramt = $('#brrkramt' + i).val();
                    var brrkrtyp = $('#brrkrtyp' + i).val();
                    var slbrrt = $('#slbrrt' + i).val();
                    var brbrt = $('#brbrt' + i).val();

                    var selrttt = $('#selrttt' + i).val();
                    var buyrttt = $('#buyrttt' + i).val();
                    if (delivery > 0) {
                        var result;
                        $("#delivery").each(function (i, val) {
                            main_loop_id++;
                            result += '<tr class="delivery-wrapper" id="rohit' + main_loop_id + '">';
                            result += '<td><select name="contract_sauda_group[' + main_loop_id + '][p_code]"  id="inp_code' + main_loop_id + '" onchange="chgcombo(' + main_loop_id + ')"  class="form-control" style="width:102px;">';
                            for (p = 0; p < product.length; p++) {
                                if (pcode == product[p]['_id']) {
                                    result += "<option value='" + product[p]['_id'] + "' data-product_id='" + product[p]['_id'] + "' selected>" + product[p]['product_name'] + "</option>";
                                } else {
                                    result += "<option value='" + product[p]['_id'] + "' data-product_id='" + product[p]['_id'] + "'>" + product[p]['product_name'] + "</option>";
                                }
                            }
                            result += '</select></td><td><select name="contract_sauda_group[' + main_loop_id + '][brand_code]" id="brand_name' + i + '" class="form-control brand_name" style="width: 102px;">';
                            for (b = 0; b < brand.length; b++) {
                                if (brandcode == brand[b]['_id']) {
                                    result += "<option value='" + brand[b]['_id'] + "' selected>" + brand[b]['brand_name'] + "</option>";
                                } else {
                                    result += "<option value='" + brand[b]['_id'] + "'>" + brand[b]['brand_name'] + "</option>";
                                }

                            }
                            result += '</select></td><input type="hidden" name="cntr' + main_loop_id + '" value="' + main_loop_id + '" id="cntr' + main_loop_id + '"><td><input type="number" name="contract_sauda_group[' + main_loop_id + '][bag]" id="bag' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" value="' + delivery + '" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                            result += '<td class="pack_name' + main_loop_id + '"><input type="number" name="contract_sauda_group[' + main_loop_id + '][pck]" step="0.0001"  id="pck' + main_loop_id + '" onchange="chgpck(' + main_loop_id + ')" oninput="calc(' + main_loop_id + ')"  value="' + pck + '" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                            result += '<td><select name="contract_sauda_group[' + main_loop_id + '][pck_unit]" id="inbrnd_code' + main_loop_id + '" class="form-control" style="width: 72px;"><option value="KG">KG</option></select></td>';
                            result += '<td><input type="number" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][wght]" id="wght' + main_loop_id + '" value="' + wghttttt + '" oninput="calc(' + main_loop_id + ')" class="form-control wght" style="width: 82px;text-align: -webkit-right;"></td>';
                            result += '<td><input type="number" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][sd_rate]" id="sel_rate' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" value="' + sdrate + '"  class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                            result += '<td><input type="number" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][s_rate]" id="seler_rate' + main_loop_id + '" value="' + selrttt + '" class="form-control" style="width: 72px;text-align: -webkit-right;"></td><td><input type="number" name="contract_sauda_group[' + main_loop_id + '][b_rate]" id="buy_rate' + main_loop_id + '" value="' + buyrttt + '" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                            result += '<td><select name="contract_sauda_group[' + main_loop_id + '][w_q]" id="w_q' + main_loop_id + '" class="form-control w_q" style="width: 72px;">';
                            result += '<option value="W">W</option>';
                            result += '<option value="Q">Q</option>';
                            result += '</select></td>';
                            result += '<td><select name="contract_sauda_group[' + main_loop_id + '][wghtunit]" id="wghtunit' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 72px;">';
                            result += '<option value="Qtl">Qtl</option>';
                            result += '<option value="Tons">Tons</option>';
                            result += '<option value="Kg">Kg</option>';
                            result += '</select></td>';
                            result += '<td><select name="contract_sauda_group[' + main_loop_id + '][rateper]" id="rateper' + main_loop_id + '" class="form-control" style="width: 62px;text-align: -webkit-right;">';
                            result += '<option value="1">1</option>';
                            result += '<option value="10">10</option>';
                            result += '<option value="100">100</option>';
                            result += '</select></td>';
                            result += '<td><input type="number" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][amount]" id="amount' + main_loop_id + '" value="' + amountttt + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                            result += '<td><select name="contract_sauda_group[' + main_loop_id + '][pcktype]" id="pcktype" class="form-control" style="width: 102px;">';
                            result += '<option value="Gross">Gross</option>';
                            result += '<option value="Net">Net</option>';
                            result += '</select></td>';
                            result += '<td><select name="contract_sauda_group[' + main_loop_id + '][g_n]" id="g_n' + main_loop_id + '" class="form-control" style="width: 102px;">';
                            result += '<option value="O">O</option>';
                            result += '<option value="N">N</option>';
                            result += '</select></td>';
                            result += '<td><input type="number" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][ipack]" id="ipack' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                            result += '<td class="slbrk_name' + main_loop_id + '"><input type="number" name="contract_sauda_group[' + main_loop_id + '][slbrk_rt]" id="slbrk_rt' + main_loop_id + '" value="' + slbrkrtmt + '" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                            result += '<td class="slbrk_type' + main_loop_id + '"><select name="contract_sauda_group[' + main_loop_id + '][slbrk_type]" id="slbrk_type' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;">';
                            result += '<option value="' + slbrkrtyp + '">' + slbrkrtyp + '</option>';
                            result += '<option value="%">%</option>';
                            result += '<option value="PBag">PBag</option>';
                            result += '<option value="PQtl">PQtl</option>';
                            result += '<option value="Fix">Fix</option>';
                            result += '</select></td>';
                            result += '<td><input type="number" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][slbrk_amt]" id="slbrk_amt' + main_loop_id + '" value="' + slbrrt + '" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                            result += '<td class="brbrk_rt' + main_loop_id + '"><input type="number" name="contract_sauda_group[' + main_loop_id + '][brbrk_rt]" oninput="calc(' + main_loop_id + ')" value="' + brrkramt + '" id="brbrk_rt' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                            result += '<td class="brbrk_typ' + main_loop_id + '">';
                            result += '<select name="contract_sauda_group[' + main_loop_id + '][brbrk_typ]" oninput="calc(' + main_loop_id + ')" id="brbrk_typ' + main_loop_id + '" class="form-control" style="width: 102px;">';
                            result += '<option value="' + brrkrtyp + '">' + brrkrtyp + '</option>';
                            result += '<option value="%">%</option>';
                            result += '<option value="PBag">PBag</option>';
                            result += '<option value="PQtl">PQtl</option>';
                            result += '<option value="Fix">Fix</option>';
                            result += '</select></td>';
                            result += '<td><input type="number" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][brbrk_amt]" oninput="calc(' + main_loop_id + ')" value="' + brbrt + '"  id="brbrk_amt' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                            result += '<td><input type="hidden" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][sd2id]" value="' + sd2id + '"></td>';
                            result += '<td><input type="hidden" name="contract_sauda_group[' + main_loop_id + '][sd2srno]" value="' + sd2srno + '"></td>';
                            result += '</td>';
                            if (main_loop_id != 1) {
                                result += "<td><a data-repeater-delete='inner-field-" + main_loop_id + "' data-brand-index='" + main_loop_id + "' class='delivery-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left: -38px;'></i></a></td></tr>";
                            }

                            result += '</tr>';
                        });


                    }
                }
                $(".contract_repeat_row tbody tr").not('tr#contract_div').remove();
                $('tr#contract_div').before(result);
                calc(1);
                chgpck(1);

            }

        }
    });
});
$(document).on("click", ".delivery-delete-btn", function () {
    alert('Are you sure you want to delete this element');
    var parent_id = $(this).closest('.delivery-wrapper').prop('id');
    $("#" + parent_id).remove();
    calc(1);

});

// $(document).on("change.select2", "#br_code", function () {
//     alert('clicked');
//     $("#delivery").show();
// });

function getproduct(callback) {
    member = callback;
    lstidx = member;
    var prdtnameid = $("#wpname" + callback + " option:selected").val();
    $.ajax({
        type: 'GET',
        url: '/worksheet_entry/productlist',
        dataType: 'json',
        data: {
            prdtnameid: prdtnameid
        },
        success: function (data) {
            if (data['success']) {
              //  alert(product.length);
                var product = data['product']
                for (j = 0; j < product.length; j++) {
                       var  result = '<input type="text" name="work_sheet_group['+lstidx+'][in_qty]" value="'+product[j]['p_crtn']+'" oninput="calc('+lstidx+')" id="inqty'+lstidx+'" class="form-control  work_sheet_group['+lstidx+'][in_qty]" style="width: 142px;text-align: -webkit-right;">';
                       var c = product[j]['cbm_length'];
                       var b = product[j]['cbm_width'];
                       var m = product[j]['cbm_height'];
                       var tot = (Number(c) * Number(b) * Number(m))/1000000;
                       var cbm = '<input type="text" name="work_sheet_group['+lstidx+'][perc_cbm]" id="perccbm'+lstidx+'" oninput="calc('+lstidx+')"value="'+tot+'"  class="form-control work_sheet_group['+lstidx+'][perc_cbm]" style="width: 135px;text-align: -webkit-right;">';
                        var cost= '<input type="text" name="work_sheet_group['+lstidx+'][w_cost]" id="wcost'+lstidx+'" oninput="calc('+lstidx+')"value="'+product[j]['export_price']+'" class="form-control work_sheet_group['+lstidx+'][w_cost]" style="width: 87px;text-align: -webkit-right;">';
                        var tbpc= '<input type="text" name="work_sheet_group['+lstidx+'][w_boxperC]" id="wboxperC'+lstidx+'" oninput="calc('+lstidx+')"value="'+product[j]['tot_bpc']+'" class="form-control work_sheet_group['+lstidx+'][w_boxperC]" style="width: 142px;text-align: -webkit-right;">';
                        var orqty= '<input type="text" name="work_sheet_group['+lstidx+'][or_qty]" id="orqty'+lstidx+'" oninput="calc('+lstidx+')"value="'+product[j]['tot_bpc']+'" class="form-control work_sheet_group['+lstidx+'][or_qty]" style="width: 92px;text-align: -webkit-right;">';
                }
                $('#innerqty' + lstidx).html(result);
                $('#cmblprt' + lstidx).html(cbm);
                $('#wcostrtrt' + lstidx).html(cost);
                $('#boxpercontainer' + lstidx).html(tbpc);
                $('#orqtytrtr' + lstidx).html(orqty);
                calc(1);
            }
        }
    });
}

// function getworksheetdata() {
    
   
//     var prdtnameid = $("#ws_no").val();
//   //  alert(prdtnameid);
//     $.ajax({
//         type: 'GET',
//         url: '/profarma/worksheetlist',
//         dataType: 'json',
//         data: {
//             prdtnameid: prdtnameid
//         },        
//         success: function (data) {
//             if (data['success']) {
//                 var product = data['workmast']
//               if  (product!=undefined)
//               console.log( product[0]['pono']);                                       
//                        var ponopro= '<input type="text" name="pro_pono" id="pro_pono" value="'+product[0]['pono']+'" class="form-control pro_pono" />';
//                        var pocus=' <select class="form-control prbank pro_cus_name select2 prbank" name="pro_cus_name"  placeholder="Please Select buyer">   <option value=""></option> {{#each acmast}}   <option value="{{this.id}}"{{#equal ../promast.pro_cus_name id}} selected=""{{/equal}}>'+this.ac_name+'</option>   {{/each}} </select>' ;
                      
                     
                     
                   
//                 $('#proponopppp').html(ponopro);
//                 $('#propocuspppp').html(pocus); 
//             }
//         }
//     });
// }


function getpriMrn(callback) {
    member = callback;
    lstidx = member;
    var prdtnameid = $("#descpso" + callback + " option:selected").val();
    // alert(prdtnameid)
    $.ajax({
        type: 'GET',
        url: '/mrn_challan/productlist',
        dataType: 'json',
        data: {
            prdtnameid: prdtnameid
        },
        success: function (data) {
            console.log(data)
            if (data['success']) {
                var product = data['product']
                for (j = 0; j < product.length; j++) {
                    var  result = '<input type="number" name="sales_or_group['+lstidx+'][order_price]" value="'+product[j]['Rm_StRate']+'" oninput="calsalesorder('+lstidx+')" id="orderprice'+lstidx+'" class="form-control  sales_or_group['+lstidx+'][order_price]" style="text-align: -webkit-right;" required>';
                }
                $('#orderpriceso'+lstidx).html(result);
                calsalesorder(1);
            }
        }
    });
}

function getdec(callback) {
    member = callback;
    lstidx = member;
    var prdtnameid = $("#descpso" + callback + " option:selected").val();
    // alert(prdtnameid)
    $.ajax({
        type: 'GET',
        url: '/sales_order_mast/productlist',
        dataType: 'json',
        data: {
            prdtnameid: prdtnameid
        },
        success: function (data) {
            console.log(data)
            if (data['success']) {
           
                var product = data['product']
                for (j = 0; j < product.length; j++) {
                        if(product[j]['Fg_SPrice'] == '' || product[j]['Fg_SPrice'] == null){
                            var  result = '<input type="text" name="sales_or_group['+lstidx+'][order_price]" value="'+1+'" oninput="calslsorder('+lstidx+')" id="orderprice'+lstidx+'" class="form-control  sales_or_group['+lstidx+'][order_price]" style="text-align: -webkit-right;">';
                        }else{
                            var  result = '<input type="text" name="sales_or_group['+lstidx+'][order_price]" value="'+product[j]['Fg_SPrice']+'" oninput="calslsorder('+lstidx+')" id="orderprice'+lstidx+'" class="form-control  sales_or_group['+lstidx+'][order_price]" style="text-align: -webkit-right;">';
                        }
                        if(product[j]['Fg_Pack'] == '' || product[j]['Fg_Pack'] == null){
                            var pacinc = '<input type="text" name="sales_or_group['+lstidx+'][sopacper_carten]" id="sopacpercarten'+lstidx+'"oninput="calslsorder('+lstidx+')" value="'+1+'"  class="form-control sales_or_group['+lstidx+'][sopacper_carten]" style="text-align: -webkit-right;">'; 
                        }else{
                            var pacinc = '<input type="text" name="sales_or_group['+lstidx+'][sopacper_carten]" id="sopacpercarten'+lstidx+'"oninput="calslsorder('+lstidx+')" value="'+product[j]['Fg_Pack']+'"  class="form-control sales_or_group['+lstidx+'][sopacper_carten]" style="text-align: -webkit-right;">'; 
                        }
                        // if()
                       var sodiv = '<input type="text" name="sales_or_group['+lstidx+'][gst]" id="so_div'+lstidx+'"oninput="calsalesorder('+lstidx+')" value="'+product[j]['Fg_GstRate']+'"  class="form-control sales_or_group['+lstidx+'][gst]" style="text-align: -webkit-right;">'; 
                }
                // alert(result);
                $('#orderpriceso'+lstidx).html(result);
                $('#pacincso'+lstidx).html(pacinc);
                $('#sodivpso'+lstidx).html(sodiv);
                
                calsalesorder(1);
            }
        }
    });

    // $("#so_qty"+lstidx).focus();
}


function getoutward(callback) {
    member = callback;
    lstidx = member;
    var prdtnameid = $("#outname" + callback + " option:selected").val();
    // alert(prdtnameid)
    $.ajax({
        type: 'GET',
        url: '/outward_challan/productlist',
        dataType: 'json',
        data: {
            prdtnameid: prdtnameid
        },
        success: function (data) {
            if (data['success']) {
             
                var product = data['product']
                for (j = 0; j < product.length; j++) {
                       var  result = '<input type="text" name="sales_or_group['+lstidx+'][outin_qty]" value="'+product[j]['p_pck']+'" oninput="calsalesorder('+lstidx+')" id="inqtyout'+lstidx+'" class="form-control  sales_or_group['+lstidx+'][outin_qty]" style="text-align: -webkit-right;">';
                       var cost = '<input type="text" name="sales_or_group['+lstidx+'][ocrate]" id="ocrate'+lstidx+'"oninput="calsalesorder('+lstidx+')" value="'+product[j]['si_price']+'"  class="form-control sales_or_group['+lstidx+'][ocrate]" style="text-align: -webkit-right;">'; 
                       var buyer=''
                }
                // alert(result);
                $('#innerqtyout'+lstidx).html(result);
                $('#rateout'+lstidx).html(cost);
                caloutward(1);
            }
        }
    });

}

function getdsi(callback) {
    member = callback;
    lstidx = member;
    var prdtnameid = $("#dsiname" + callback + " option:selected").val();
    // alert(prdtnameid)
    $.ajax({
        type: 'GET',
        url: '/domes_salesinvoice/productlist',
        dataType: 'json',
        data: {
            prdtnameid: prdtnameid
        },
        success: function (data) {
            console.log(data)
            if (data['success']) {
                var product = data['product']
                for (j = 0; j < product.length; j++) {
                       if(product[j]['Fg_Pack'] != null || product[j]['Fg_Pack'] !=undefined){
                        var  result = '<input type="text" name="sales_or_group['+lstidx+'][outin_qty]" value="'+product[j]['Fg_Pack']+'" oninput="caldsi('+lstidx+')" id="inqtydsi'+lstidx+'" class="form-control  sales_or_group['+lstidx+'][outin_qty]" style="text-align: -webkit-right;" required>';
                       }else{
                        // alert('Please Add Pac Per Pack In Master');
                       }
                       if(product[j]['Fg_SPrice'] != null || product[j]['Fg_SPrice'] != undefined){
                        var cost = '<input type="text" name="sales_or_group['+lstidx+'][ocrate]" id="dsirate'+lstidx+'"oninput="caldsi('+lstidx+')" value="'+product[j]['Fg_SPrice']+'"  class="form-control sales_or_group['+lstidx+'][ocrate]" style="text-align: -webkit-right;" required>'; 
                       }
                       else{
                        alert('Please Add Rate In Master'); 
                       }
                       if(product[j]['Fg_GstRate'] == '' || product[j]['Fg_GstRate'] == null){
                        alert('Please Add GST Rate In Master'); 
                       }else{
                        $("#so_gstrate"+lstidx).val(product[j]['Fg_GstRate'])
                       }
                }
                // alert(result);
                $('#innerqtydsi'+lstidx).html(result);
                $('#ratedsi'+lstidx).html(cost);
                caldsi(1);
            }
        }
    });
}
$(document).ready(function () {
    $("#brbrk_typ").change(function () {
        calc(function (err, result) {});
    });

    $('body').on('input','.pereceivedamount', function(){
        var sellerid = $(this).attr('data-sellerid');
        var sellername = $(this).attr('data-sellername');
        $('#brcodepayment').val(sellerid).trigger('change');
        $('.paymentsllerrows').not('.'+ sellerid).remove();
    })

    $('body').on('click','.canceladjustment',function(){
        $('.delivery_repeat_row').html('');
        $('.expence_repeat_row').html('');
        $('#slcodepaymnt').val('').trigger('change');
        $('#brcodepayment').val('').trigger('change');
    })

    $('button[type="reset"]').not('.update').click(function(){
        $('.select2-selection').css({'background-color':"#fff",'color':'#333'});
        $('input').css({'background-color':"#fff",'color':'#333'});
        if($('.city').length >= 1)
            $('.city').val(null).trigger('change');
        if($('.party').length >= 1)
            $('.party').val(null).trigger('change');
        if($('.sbparty').length >= 1)
            $('.sbparty').val(null).trigger('change');
        if($('.brparty').length >= 1)
            $('.brparty').val(null).trigger('change');
        if($('.bbparty').length >= 1)
            $('.bbparty').val(null).trigger('change');
        if($('.getprdt').length >= 1)
        $('.getprdt').val(null).trigger('change');
        $('select.select2').each(function(){
            $(this).val(null).trigger('change');
        })
    })

    $('button.resetpaymententry').click(function(){
        $('.delivery_repeat_row').html('');
        $('.expence_repeat_row').html('');
    })

    $('button[type="reset"].update').click(function(){
        var path = $(this).attr('data-link');
        window.location.replace('http://'+ window.location.host + path); 
    })

});

function calc(callback) {
    var orqty1 = 0;
    var wcost = 0;
    var wprofit = 0;
    var wprofitamt1 = 0;
    var wsellprice = 0;
    var wdoller = 0;
     var inqty = 0;
    var wsellpriceD = 0;
    var wtotaFr = 0;
    var wboxperC = 0;
    var perbxfrghtrs = 0;
    var woverseasFPB = 0;
    var boxpricedoller = 0;
    var wboxperFD = 0;
    var wfinalc1 = 0;
    var perccbm=0;
    var totelcbm=0;
    var con_cbm=0; 
    var  wprofitamt2=0;
    var orqty3=0;
    var wfobAmt2=0;
    var wcnfAmt3=0;
    lstidx = $("input[name*='cntr']").length;
    member = lstidx;
    //new_div += 'class="form-control numerals digits" style="width: 72px;text-align: -webkit-right;"';
    if (lstidx === undefined) lstidx = 1;
    else lstidx = member;
    // alert(lstidx);
    for (i = 1;i <= lstidx;i++) {
       // alert(i);
         if($("#inqty" + i).val()!=undefined)
           {
        //  var orqty= $("#orqty" + i).val();
        // alert(orqty1);
        wcost = $("#wcost" + i).val();
        wprofit = $("#wprofit" + i).val();
        wdoller = $("#wdoller").val();
        wboxperFD = $("#wboxperFD" + i).val();
        inqty = $("#inqty" + i).val();
        $("#wprofitamt" + i).val((parseFloat(wcost)*parseFloat(wprofit)/100).toFixed(2));
       // wprofitamt
     
       var wprofitamt1 =  $("#wprofitamt" + i).val();
     // alert(wprofitamt1);
        $("#wsellprice" + i).val(parseFloat(wcost)+parseFloat(wprofitamt1));
        wsellprice = $("#wsellprice" + i).val();
        $("#wsellpriceD" + i).val((parseFloat(wsellprice)/parseFloat(wdoller)).toFixed(3));
        wsellpriceD = $("#wsellpriceD" + i).val();
        $("#wdollerp" + i).val((parseFloat(wsellprice)/parseFloat(inqty)).toFixed(2));
        $("#boxpricedoller" + i).val((parseFloat(wsellpriceD) * parseFloat(inqty)).toFixed(2));
        boxpricedoller = $("#boxpricedoller" + i).val();
        wtotaFr = $("#wtotaFr").val();
        wboxperC = $("#wboxperC" + i).val();
        $("#perbxfrghtrs" + i).val((parseFloat(wtotaFr) / parseFloat(wboxperC)).toFixed(2));
        perbxfrghtrs =  $("#perbxfrghtrs" + i).val();
        $("#wboxperFD" + i).val((parseFloat(perbxfrghtrs) / parseFloat(wdoller)).toFixed(2));
        woverseasFPB = $("#woverseasFPB").val();
        $("#wfinalb" + i).val((parseFloat(woverseasFPB) / parseFloat(wboxperC)).toFixed(2));
        wfinalb1  = $("#wfinalb" + i).val();
        wboxperFD= $("#wboxperFD" + i).val()
        $("#wfinalc" + i).val((parseFloat(boxpricedoller)+ parseFloat(wboxperFD) + parseFloat(wfinalb1)).toFixed(2));
         var wfinalc1  = $("#wfinalc"  + i).val();
          var orqty1= $("#orqty" + i).val();
        $("#wfobAmt" + i).val((parseFloat(orqty1) * (parseFloat(wboxperFD) + parseFloat(boxpricedoller))).toFixed(2));
        $("#wcnfAmt" + i).val((parseFloat(wfinalc1) * parseFloat(orqty1)).toFixed(2));
        perccbm = $("#perccbm" + i).val();
        $("#totelcbm" + i).val((parseFloat(orqty1) *parseFloat(perccbm)).toFixed(2));
        totelcbm = $("#totelcbm" + i).val();
        totelcbm = $("#totelcbm" + i).val();
        con_cbm = $("#con_cbm").val();
      
        $("#frcbm" + i).val((parseFloat(wtotaFr) / parseFloat(con_cbm)*parseFloat(totelcbm)).toFixed(2));
       
         ///$("#tot_order" + i).val((tot_order) + parseFloat(orqty));

         orqty3 = orqty3+ parseFloat($("#orqty" + i).val());
        
         wprofitamt2 = wprofitamt2+ parseFloat($("#wprofitamt" + i).val());
         wfobAmt2 = wfobAmt2+ parseFloat($("#wfobAmt" + i).val());
         wcnfAmt3 = wcnfAmt3+ parseFloat($("#wcnfAmt" + i).val());
      
         }
    }
    $("#tot_order").val((orqty3).toFixed(2));
    $("#tot_pamt").val((wprofitamt2).toFixed(2));
    $("#tot_fobamt").val((wfobAmt2).toFixed(2));
    $("#tot_cnfamt").val((wcnfAmt3).toFixed(2));
}

function calsaleadd(callback) {
    var subtotal = 0;
    var add = 0;
    var less= 0;
    addlstidx = $("input[name*='saleadd']").length;
    lesslstidx = $("input[name*='saleless']").length;
    addvalues = $("input[name='saleadd']")
              .map(function(){return $(this).val();}).get();
    addidx = addvalues[addvalues.length-1]
    lessvalues = $("input[name='saleless']")
              .map(function(){return $(this).val();}).get();
    lessidx = lessvalues[lessvalues.length-1]
    if(addidx>=lessidx){
        idx = addidx;
    }
    if(lessidx>addidx){
        idx = lessidx;
    }
    lstidx = parseInt(idx);
    member = lstidx;
   
      if (lstidx === undefined) lstidx = 1;
       else lstidx = member;
    for (i = 0;i<= lstidx;i++) {
        if($("#AmountParticular" + i).val()!=undefined)
        {
         add =add+parseFloat($("#AmountParticular" + i).val());
         subtotal = $("#tot_amtso").val();
        }
    }
    lstidx1 = $("input[name*='saleless1']").length;
    member = lstidx;
   
    if (lstidx1 === undefined) lstidx1 = 1;
    else lstidx1 = member;
    for (i = 0;i<= lstidx1;i++) {
        if($("#lessamtParticular" + i).val()!=undefined||NaN)
        {
         less =less+parseFloat($("#lessamtParticular" + i).val());
        }
    }
    $("#totalgrand").val(((parseFloat(subtotal) + parseFloat(add))-parseFloat(less)).toFixed(2));
}

function calsaleinvoiceadd(callback) {
   
    var subtotal = 0;
    var add = 0;
    var less= 0;
     lstidx = $("input[name*='saleadd']").length;
    member = lstidx;
   
      if (lstidx === undefined) lstidx = 1;
       else lstidx = member;
    for (i = 0;i<= lstidx;i++) {
        if($("#AmountParticular" + i).val()!=undefined)
        {
         
         add =add+parseFloat($("#AmountParticular" + i).val());

         subtotal = $("#tot_amtso").val();
        //  alert(subtotal);
        //  alert(add);
        
        }
    }
    lstidx1 = $("input[name*='saleless1']").length;
    member = lstidx;
   
      if (lstidx1 === undefined) lstidx1 = 1;
       else lstidx1 = member;
    for (i = 0;i<= lstidx1;i++) {
        if($("#lessamtParticular" + i).val()!=undefined||NaN)
        {
         less =less+parseFloat($("#lessamtParticular" + i).val());
        }
    }
    $("#totalgrand").val(((parseFloat(subtotal) + parseFloat(add))-parseFloat(less)).toFixed(2));
}
$(document).on("click", ".lesssaleinvoicedetails", function () {
                
    lstidx = $("input[name*='saleless']").length + 1;
    var values = $("input[name='saleless']")
       .map(function(){return $(this).val();}).get();
   var idx = values[values.length-1]
   if(idx == undefined || idx == null)idx=0;
   lstidx = parseInt(idx)+1; 
   member = lstidx;
   if (s == limit) {
       alert("You have reached the limit of adding " + sd + " inputs");
   } else {
       $.ajax({
           type: 'GET',
           url: '/domes_salesinvoice/getlessdesc',
           dataType: 'json',
           success: function (data) {
               if (data['success']) {
                   var lessmast = data['lessmast'];
                   var new_div = document.createElement('div');
                   new_div = "<tr class='contract_wrapper' id='purchaseless" +lstidx + "'>";
                   new_div += '<td>';
                   new_div += '<input type="hidden" name="saleless" value="'+lstidx +'" id="saleless'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                   new_div += 'class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                   new_div += '<select name="less_details['+lstidx+'][particular_less]" onchange="sal_roumdof('+lstidx+')" style="text-align: -webkit-left;width: 450px;" id="lessparticular'+lstidx+'" class="form-control addlessremparam selectlessfocus">';
                   new_div += '<option value=""></option>';
                   for (p = 0; p < lessmast.length; p++)
                   {
                       new_div += '<option value="'+lessmast[p]['_id']+'" data-val="'+lessmast[p]['type_descr']+'">'+lessmast[p]['type_descr']+'</option>';
                   }
                   new_div += '</select>';
                   //  new_div += '<input type="text" name="less_details['+lstidx+'][particular_less]" id="lessparticular'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                   // new_div += 'class="form-control addlessremparam selectlessfocus" style="text-align: -webkit-left;"';
                   // new_div += '/>';
                   new_div += '</td>';
                   new_div +='<td>';
                   new_div +='<input type="text" name="less_details['+lstidx+'][particular_amtless]"';
                   new_div +='id="lessamtParticular'+lstidx+'"  value="0" oninput="calsaleadd('+lstidx+')"';
                   new_div +='class="form-control  addlessfocus" style="text-align: -webkit-right;"';
                   new_div +='onblur="sal_roumdof(1)"/>';
                   new_div += '</td>';
                   new_div += "<td> <a onclick='purchaseless_remove("+lstidx+")'  style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                   $(new_div).insertBefore("#vipul_div");
                   s++;
                   lstidx--;
                   member++;
                   $(".addlessremparam").select2({
                       placeholder: "--Select--",
                       allowClear: true,
                   });
                   $('.addlessjustmentstable tr:nth-last-child(2)').find('.selectlessfocus').focus();
               }
   
           }
       });
    //    setTimeout(function(){ sal_roumdof(1) }, 100);
       }
       })
       function purchaseordradd_remove(id)
            {
                var strconfirm = confirm("Are you sure want to delete?");
                var lstidx = $("input[name*='saleadd']").length;
                if (strconfirm == true && lstidx>1) {
                    $("#addselrow"+id).remove(); 
                    calsaleadd(1);
                    setTimeout(function(){ sal_roumdof(1) }, 100);
                }
            }
            function purchaseless_remove(id)
            {
                var strconfirm = confirm("Are you sure want to delete?");
                var lstidx = $("input[name*='saleless']").length;
                // alert(lstidx)
                if (strconfirm == true && lstidx>1) {
                $("#purchaseless"+id).remove(); 
                    calsaleadd(1);
                    setTimeout(function(){ sal_roumdof(1) }, 100);
                }
            }
$(document).on("click", ".addsaleinvoicedetails", function () {  
    // lstidx = $("input[name*='saleadd']").length + 1;
    var values = $("input[name='saleadd']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    if(idx == undefined || idx == null)idx=0;
    lstidx = parseInt(idx)+1;   
    member = lstidx;
    if (s == limit) {
    alert("You have reached the limit of adding " + sd + " inputs");
    } else
      {
        $.ajax({
            type: 'GET',
            url: '/domes_salesinvoice/getadddesc',
            dataType: 'json',
            success: function (data) {
                if (data['success']) {
                    var addmast = data['addmast'];
                    var new_div = document.createElement('div');
                    new_div = "<tr class='contract_wrapper' id='addselrow" + lstidx + "'>";
                    new_div += '<td>';
                    new_div += '<input type="hidden" name="saleadd" value="'+lstidx+'" id="saleadd'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                    new_div += 'class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                    new_div += '<select name="add_details['+lstidx+'][particular_add]" id="addparticular'+lstidx+'" onchange="sal_roumdof('+lstidx+')" style="text-align: -webkit-left;width: 450px;" class="form-control selectproductfocus addremprt">';
                    new_div += '<option value=""></option>';
                    for (p = 0; p < addmast.length; p++)
                    {
                        new_div += '<option value="'+addmast[p]['_id']+'" data-val="'+addmast[p]['type_descr']+'">'+addmast[p]['type_descr']+'</option>';
                    }
                    new_div += '</select>';
                    // new_div += '<input type="text" name="add_details['+lstidx+'][particular_add]" id="addparticular'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                    // new_div += 'class="form-control selectproductfocus addremprt" style="text-align: -webkit-left;"';
                    // new_div += '/>';
                    new_div += '</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="add_details['+lstidx+'][particular_amount]"';
                    new_div +='id="AmountParticular'+lstidx+'" value="0" oninput="calsaleadd('+lstidx+')"';
                    new_div +='class="form-control  amountaddfocus" style="text-align: -webkit-right;"';
                    new_div +=' onblur="sal_roumdof(1)"/>';
                    new_div += '</td>';
                    new_div += "<td> <a onclick='purchaseordradd_remove("+lstidx+")' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#prabal_div");
                    sd++;
                    lstidx--;
                    member++;
                    $(".addremprt").select2({
                        placeholder: "--Select--",
                        allowClear: true,
                    });
                    $('.addParticular tr:nth-last-child(2)').find('.selectproductfocus').focus();
                }
    
            }
        });
        // setTimeout(function(){ sal_roumdof(1) }, 100);
        }
    })
function calgst(callback) {
    var gsttaxamtot12 = $("#gsttaxamtot12").val();
    var gsttaxamtot18 = $("#gsttaxamtot18").val();
    
   
        $("#AmountParticular1").val(0);
        $("#AmountParticular2").val(0);
        $("#AmountParticular3").val(0);
        $("#AmountParticular4").val(0);
        $("#AmountParticular5").val(0);
        $("#AmountParticular6").val(0);
    var tot_taxvalue= 0;
    // lstidx = $("input[name*='dsirn']").length;
    // // lstidx = $("input[name*='saleadd']").length;
    // member = lstidx;
    
    // console.log(party);
    // if (lstidx === undefined) lstidx = 1;
    // else lstidx = member;
    party = $("#domesticBuyer").val();
    $.ajax({
        type: 'GET',
        url: '/domes_salesinvoice/chackstate/'+party,
        dataType: 'json',
        success: function (data) {
            // console.log(data)
            if(data['success'] == 'true'){
                // alert(data['success'])
                // console.log(gsttaxamtot)
                if(gsttaxamtot12 != null || gsttaxamtot12 != ''){
                    tot_taxvalue12 = gsttaxamtot12/2;
                    $("#AmountParticular4").val(tot_taxvalue12.toFixed(2));
                    $("#AmountParticular5").val(tot_taxvalue12.toFixed(2));
                }else{
                    $("#AmountParticular4").val(0);
                    $("#AmountParticular5").val(0);
                    $("#AmountParticular6").val(0);
                }
                if(gsttaxamtot18 != null || gsttaxamtot18 != ''){
                    tot_taxvalue18 = gsttaxamtot18/2;
                    $("#AmountParticular1").val(tot_taxvalue18.toFixed(2));
                    $("#AmountParticular2").val(tot_taxvalue18.toFixed(2));
                }else{
                    $("#AmountParticular1").val(0);
                    $("#AmountParticular2").val(0);
                    $("#AmountParticular3").val(0);
                }
            }
            if(data['success'] == 'false'){
                // alert(data['success'])
                if(gsttaxamtot18 != null || gsttaxamtot18 != ''){
                    tot_taxvalue18 = parseFloat(gsttaxamtot18);
                    $("#AmountParticular3").val(tot_taxvalue18.toFixed(2));
                }else{
                    $("#AmountParticular1").val(0);
                    $("#AmountParticular2").val(0);
                    $("#AmountParticular3").val(0);
                }
                if(gsttaxamtot12 != null || gsttaxamtot12 != ''){
                    tot_taxvalue12 = parseFloat(gsttaxamtot12);
                    // $("#AmountParticular3").val(tot_taxvalue);
                    $("#AmountParticular6").val(tot_taxvalue12.toFixed(2));
                }else{
                    $("#AmountParticular4").val(0);
                    $("#AmountParticular5").val(0);
                    $("#AmountParticular6").val(0);
                }
            }
        }
    });  
    // setTimeout(function() { 
        // calsaleinvoiceadd(1) 
    // }, 300);
    // setTimeout(function() { calsaleadd(1) }, 300); 
    
    // calsaleadd(1);
}



function calproduct() {

    var slprice = 0;
    var taxrate = 0;
    var c = 0;
    var b=0;
    var m=0;
    var  mul=0;
    var  mrpper = 0;
    var pper=0

  
    slprice= $("#pro_slprice").val();
    taxrate= $("#pro_gstrate").val();
    $("#pro_exportprice").val((parseFloat(slprice)-(parseFloat(slprice)*(parseFloat(taxrate)/100))).toFixed(2));
      c= $("#pro_c").val();
      b= $("#pro_b").val();
      m= $("#pro_m").val();
      $("#pro_tbpc").val((65/((parseFloat(c)*parseFloat(b)*parseFloat(m))/1000000)).toFixed(2));
      pper=$("#pcsperpack").val();
      mrpper=$("#mrpperpcs").val();
      $("#mrp_boxpro").val((parseFloat(pper)*parseFloat(mrpper)).toFixed(2)); 
} 

function calproforma(callback) {

    var inqty2 = 0;
    var percortancbm = 0;
    var orqty2 = 0;
    var  orqty3 = 0;
   var cp=0;
   var totipercbm=0;
   var totalamount=0;
     lstidx= $("input[name*='pntr']").length;
    member = lstidx;
    //new_div += 'class="form-control numerals digits" style="width: 72px;text-align: -webkit-right;"';

    if (lstidx === undefined) lstidx = 1;
    else lstidx = member;
    for (i = 0; i <= lstidx; i++) {
         if($("#inqtypq" + i).val()!=undefined)
        {
        orqty2 = $("#orqtymn" + i).val();
        //alert(orqty);
        percortancbm = $("#percbmpq" + i).val();
        $("#cbmperItem" + i).val((parseFloat(orqty2)*parseFloat(percortancbm)).toFixed(2));
        cp = $("#cartonPrice" + i).val();
       $("#totalAmount" + i).val((parseFloat(orqty2)*parseFloat(cp)).toFixed(2));
         ///$("#tot_order" + i).val((tot_order) + parseFloat(orqty));
         orqty3 = orqty3+ parseFloat($("#orqtymn" + i).val());
         totipercbm = totipercbm+ parseFloat($("#cbmperItem" + i).val());
         totalamount = totalamount+ parseFloat($("#totalAmount" + i).val());
     
        }
    }
    $("#totpoq").val((orqty3).toFixed(2));
    $("#tot_picbm").val((totipercbm).toFixed(2));
    $("#tot_amt").val((totalamount).toFixed(2));
  
}

function calsalesorder(callback) {
   var Orprice = 0;
   var orqty3 = 0;
    var pacinc = 0;
   var discount=0;
   var qty=0;
   var qtysum=0;
   var totalamount=0;
   var totaldiscount=0;
   var totalamtbefore =0;
     lstidx= $("input[name*='buyrn']").length;
     var values = $("input[name='buyrn']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    member = lstidx;
    // alert(lstidx)
    if (lstidx === undefined) lstidx = 1;
    else lstidx = member;
    for (i = 0; i <= lstidx; i++) {
        if($("#orderprice" + i).val()!=undefined)
        {
            Orprice= $("#orderprice" + i).val();
            // pacinc= $("#sopacpercarten" + i).val();
            qty= $("#so_qty" + i).val();
            discount= $("#so_discount" + i).val();
            $("#po_qty_blc" + i).val(qty);
            $("#total_amt_before" + i).val((parseFloat(Orprice)*parseFloat(qty)).toFixed(2));
            $("#total_amt" + i).val((parseFloat(Orprice)*parseFloat(qty)-((parseFloat(Orprice)*parseFloat(qty)*parseFloat(discount))/100)).toFixed(2));
            //$("#tot_order" + i).val((tot_order) + parseFloat(orqty));
            qtysum=qtysum +parseFloat($("#so_qty" + i).val());

            totaldiscount = totaldiscount+ parseFloat($("#so_discount" + i).val());
            totalamtbefore = totalamtbefore+ parseFloat($("#total_amt_before" + i).val());
            totalamount = totalamount+ parseFloat($("#total_amt" + i).val());

        }
        
    }
    $("#tot_sooq").val((qtysum).toFixed(2));
    // $("#tot_picbm").val((totipercbm).toFixed(2));
    $("#tot_amtso").val((totalamount).toFixed(2));
    $("#tot_discount").val((totaldiscount).toFixed(2));
    $("#tot_amtbefore").val((totalamtbefore).toFixed(2));
    this.calsaleadd(1);
}


function calslsorder(callback) {
    var Orprice = 0;
    var orqty3 = 0;
     var pacinc = 0;
    var discount=0;
    var qty=0;
    var qtysum=0;
    var totalamount=0;
    var totaldiscount=0;
    var totalamtbefore =0;
      lstidx= $("input[name*='buyrn']").length;
     member = lstidx;
     //new_div += 'class="form-control numerals digits" style="width: 72px;text-align: -webkit-right;"';
     if (lstidx === undefined) lstidx = 1;
     else lstidx = member;
     for (i = 0; i <= lstidx; i++) {
         if($("#so_qty" + i).val()!=undefined)
         {
            // Orprice= $("#orderprice" + i).val();
            // pacinc= $("#sopacpercarten" + i).val();
            qty= $("#so_qty" + i).val();
            $("#so_qty_blc" + i).val(qty);
            // discount= $("#so_discount" + i).val();
            //  $("#total_amt_before" + i).val((parseFloat(Orprice)*parseFloat(pacinc)*parseFloat(qty)).toFixed(2));
            //  $("#total_amt" + i).val((parseFloat(Orprice)*parseFloat(pacinc)*parseFloat(qty)-((parseFloat(Orprice)*parseFloat(pacinc)*parseFloat(qty)*parseFloat(discount))/100)).toFixed(2));
             //$("#tot_order" + i).val((tot_order) + parseFloat(orqty));
             qtysum=qtysum +parseFloat($("#so_qty" + i).val());
            //  totaldiscount = totaldiscount+ parseFloat($("#so_discount" + i).val());
            //  totalamtbefore = totalamtbefore+ parseFloat($("#total_amt_before" + i).val());
            //  totalamount = totalamount+ parseFloat($("#total_amt" + i).val());
         }
         
     }
     $("#tot_sooq").val((qtysum).toFixed(2));
     // $("#tot_picbm").val((totipercbm).toFixed(2));
     $("#tot_amtso").val((totalamount).toFixed(2));
     $("#tot_discount").val((totaldiscount).toFixed(2));
     $("#tot_amtbefore").val((totalamtbefore).toFixed(2));
     this.calsaleadd(1);
 }

 
function calcashbank(callback) {
    var amount = 0;
    var amount=0;
     lstidx= $("input[name*='cashtrn']").length;
     member = lstidx;
     //new_div += 'class="form-control numerals digits" style="width: 72px;text-align: -webkit-right;"';
 
     if (lstidx === undefined) lstidx = 1;
     else lstidx = member;
     for (i = 0; i <= lstidx; i++) {
         if($("#cashamount" + i).val()!=undefined)
         {
           
        amount= amount+parseFloat($("#cashamount" + i).val());
    
         }
         
     }
     $("#totcash_amt").val((amount).toFixed(2));
    
   
 }
 function journal(callback) {
    var amountd = 0;
    var amountc=0;
     lstidx= $("input[name*='jourtrn']").length;
     member = lstidx;
     //new_div += 'class="form-control numerals digits" style="width: 72px;text-align: -webkit-right;"';
 
     if (lstidx === undefined) lstidx = 1;
     else lstidx = member;
     for (i = 0; i <= lstidx; i++) {
         if($("#cashamountjv" + i).val()!=undefined)
         {
           
        amountd= amountd+parseFloat($("#cashamountjv" + i).val());
        amountc= amountc+parseFloat($("#cashamountcr" + i).val());
    
         }
         
     }
     $("#totcash_amt").val((amountd).toFixed(2));
     $("#totcash_amtcr").val((amountc).toFixed(2));
    
   
 }
function caloutward(callback) {
    var orqty2 = 0;
    var orqty3 = 0;
     var rate = 0;
    var discount=0;
    var netamount=0;
    var totalamount=0;
      lstidx= $("input[name*='outrn']").length;
     member = lstidx;
     //new_div += 'class="form-control numerals digits" style="width: 72px;text-align: -webkit-right;"';
 
     if (lstidx === undefined) lstidx = 1;
     else lstidx = member;
     for (i = 0; i <= lstidx; i++) {
          if($("#inqtyout" + i).val()!=undefined)
         {
      orqty2= $("#orqtyoc" + i).val();
         //alert(orqty);
        rate= $("#ocrate" + i).val();
        discount= $("#ocdiscount" + i).val();
        $("#octotalAmount" + i).val((parseFloat(orqty2)*parseFloat(rate)-(parseFloat(orqty2)*parseFloat(rate)*parseFloat(discount)/100)).toFixed(2));
        
          orqty3 = orqty3+ parseFloat($("#orqtyoc" + i).val());
         //  totipercbm = totipercbm+ parseFloat($("#cbmperItem" + i).val());
          totalamount = totalamount+ parseFloat($("#octotalAmount" + i).val());
      
         }
     }
     $("#totoqoc").val((orqty3).toFixed(2));
     // $("#tot_picbm").val((totipercbm).toFixed(2));
     $("#tot_amtso").val((totalamount).toFixed(2));
   
 }
 function caldsi(callback) {
    //  alert()
    var orqty2 = 0;
    var orqty3 = 0;
     var rate = 0;
    var discount=0;
    var inqtyout = 0;
    var gstrate = 0;
    var netamount=0;
    var totalamount=0;
    var tot_beforedisamt = 0;
    var tot_taxvalue = 0;
    var gst12 = 0;
    var gst18 = 0;
    amt = 0;
      lstidx= $("input[name*='dsirn']").length;
      var values = $("input[name='dsirn']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
     member = lstidx;
     //new_div += 'class="form-control numerals digits" style="width: 72px;text-align: -webkit-right;"';
    //  alert(lstidx)
     if (lstidx == undefined) lstidx = 1;
     else lstidx = member;
     for (i = 0; i <= lstidx; i++) {
        // alert($("#inqtydsi" + i).val())
        if($("#orqtydsi" + i).val() != undefined)
         {
            orqty2= $("#orqtydsi" + i).val();
            rate= $("#dsirate" + i).val();
            discount= $("#dsidiscount" + i).val();
            inqtyout = $("#inqtydsi" + i).val();
            inqtyout = 1;
            // alert()
            console.log(inqtyout)
            gstrate = $("#so_gstrate" + i).val();
            console.log('gst',gstrate)
            if(gstrate == null || gstrate == undefined || gstrate == NaN || gstrate == '')gstrate = 18;
            $("#so_beforedisamt"+i).val((parseFloat(orqty2)*parseFloat(rate)*parseFloat(inqtyout).toFixed(2)));
            $("#dsitotalAmount" + i).val((parseFloat(orqty2)*parseFloat(rate)*parseFloat(inqtyout)-(parseFloat(orqty2)*parseFloat(rate)*parseFloat(inqtyout)*parseFloat(discount)/100)).toFixed(2));
            amt = (parseFloat(orqty2)*parseFloat(rate)*parseFloat(inqtyout)-(parseFloat(orqty2)*parseFloat(rate)*parseFloat(inqtyout)*parseFloat(discount)/100)).toFixed(2)
            $("#so_taxvalue"+i).val(amt*gstrate/100);
            orqty3 = orqty3+ parseFloat($("#orqtydsi" + i).val());
            totalamount = totalamount+ parseFloat($("#dsitotalAmount" + i).val());
            $("#so_afttaxvalue"+i).val((parseFloat(orqty2)*parseFloat(rate)*parseFloat(inqtyout).toFixed(2))+amt*gstrate/100)
            tot_taxvalue = tot_taxvalue + amt*gstrate/100;
            tot_beforedisamt = tot_beforedisamt + (parseFloat(orqty2)*parseFloat(rate)*parseFloat(inqtyout).toFixed(2))

            if(parseInt(gstrate) == 12)gst12 = gst12+amt*gstrate/100;
            if(parseInt(gstrate) == 18)gst18 = gst18+amt*gstrate/100;
         }
     }
     console.log('gst',gstrate)
    $("#gsttaxamtot12").val((gst12).toFixed(2));
    $("#gsttaxamtot18").val((gst18).toFixed(2));
    $("#tot_beforedisamt").val(tot_beforedisamt)
    $("#tot_taxvalue").val(tot_taxvalue)
    $("#totoqdsi").val((orqty3).toFixed(2));
    $("#tot_amtso").val((totalamount).toFixed(2));
    $("#totalgrand").val((totalamount).toFixed(2))
    calgst(1);

    if(gst12 == NaN || gst12 == null)gst12 == 0;
    if(gst18 == NaN || gst18 == null)gst18 == 0;
    var tot = totalamount+parseFloat(gst18)+parseFloat(gst12);
    console.log(tot);
    $("#totalgrand").val(tot.toFixed(2));
 }


 
$("#checkAll").click(function () {
    $('input[name="allcheck"]').not(this).prop('checked', this.checked);
});
$("#partyAll").click(function () {
    $('input[name="partyAllcheck"]').not(this).prop('checked', this.checked);
});


$('body').on('keyup','.amountcal',function(){
    var sum = 0;
    var rowid = $(this).attr("data-id");
    $('.amountexpence'+rowid).each(function(){
            if( $(this).val() )
                sum += parseInt($(this).val());
    })
        $('#totamountexpence'+rowid).val(sum);
        $('#dtcton_amt'+rowid).val(sum);
        $('#dtcton_amt'+rowid).trigger("change");
})
$('body').on('change','.deductionamount',function(){
    var chk = 0;
    $('.deductionamount').each(function(){
            if( $(this).val() )
            chk += parseInt($(this).val());
            // alert(chk);
    })
        $('#chkdddt').val(chk);
})
$(document).on("change.select2", "#slcodepaymnt", function () {
    $('.loader').show();
    var brcode = $("#slcodepaymnt").val();
    var slcode = $("#brcodepayment").val();
    $.ajax({
        type: 'GET',
        url: '/payment_entry/saudaname',
        dataType: 'json',
        data: {
            brcode: brcode,
            slcode: slcode,
        },
        success: function (data) {
            console.log(data);
            var i, j;
            var seller = '';
            if (data['success'] == true) {
                var outstading = data['outstading'];
                var result = '<div class="table-responsive adjustmentstable">';
                result += '<button class="btn btn-danger btn-link canceladjustment center-block nofocus" type="button">Close</button>';
                result += '<table class="table table-condensed">';
                result += '<thead>';
                result += '<tr>';
                // result += '<th>Seller</th>';
                result += '<th>Bill No</th>';    
                result += '<th>Bill Date</th>';
                result += '<th>Bargain Amount</th>';
                result += '<th>Current Bal</th>';
                result += '<th>Rec Amt</th>';
                result += '<th>Deduction Amt</th>';
                result += '<th>Balance</th>';
                result += '<th>Remarks</th>';
                result += '</tr>';
                result += '</thead>';
                result += '<tbody>';
                for (j = 0; j < outstading.length; j++) {
                    // if(outstading[j]['sl_code']['party_name'])
                    var filterstartdate = moment(outstading[j]['sd_date']).tz("Asia/Kolkata").format('DD/MM/YYYY');
                    if(seller != outstading[j]['sl_code']['party_name']){
                        seller = outstading[j]['sl_code']['party_name'];
                        result += '<tr class="paymentsllerrows  '+ outstading[j]['sl_code']['_id'] +'"><td colspan="8" class="tablerowheadings">'+ outstading[j]['sl_code']['party_name'] +'</td></tr>';
                    }
                    result += '<tr class="paymentsllerrows '+ outstading[j]['sl_code']['_id'] +'" id="paymentsllerrows'+ j +'">';
                    // result += '<td>';
                    // result += '<input type="hidden" name="payment_sauda_group[' + j + '][outstadingid]" id="outstadingid" value="' + outstading[j]['_id'] + '"  class="form-control">';
                    // result += ' <select name="payment_sauda_group[' + j + '][sl_code]" id="sl_code" class="form-control" disabled>';
                    // result += '<option value="' + outstading[j]['sl_code']['_id'] + '">' + outstading[j]['sl_code']['party_name'] + '</option>';
                    // result += '</select>';
                    // result += '</td>';
                    result += '<td><input type="text"  name="payment_sauda_group[' + j + '][vouc_code]" id="vouc_code' + j + '" value="' + outstading[j]['vouc_code'] + '"  class="form-control wght nofocus" readonly></td>';
                    result += '<td><input type="text" name="payment_sauda_group[' + j + '][sd_date]" id="sd_date"  value="' + filterstartdate + '"  class="form-control nofocus" readonly></td>';
                    result += '<td><input type="text"  name="payment_sauda_group[' + j + '][barg_amt]" id="bill_amt" value="' + outstading[j]['barg_amt'] + '" class="form-control nofocus" readonly></td>';
                    result += '<td><input type="text"  name="payment_sauda_group[' + j + '][tot_ammount]" id="currbill_amt' + j + '" value="' + outstading[j]['totamt_bal'] + '" class="form-control amount nofocus" readonly></td>';
                    result += '<td><input type="text" autocomplete="off" name="payment_sauda_group[' + j + '][outs_rec]" id="outs_rec' + j + '" oninput="paycalc('+j+')"  data-sellername="'+ outstading[j]['sl_code']['party_name'] +'" data-sellerid="'+ outstading[j]['sl_code']['_id'] +'" class="form-control pereceivedamount number"></td>';
                    result += '<td><input type="text" autocomplete="off" name="payment_sauda_group[' + j + '][dtcton_amt]" onchange="paycalc('+j+')"  onfocus="changesl(' + outstading[j]['vouc_code'] + ')" id="dtcton_amt' + outstading[j]['vouc_code'] + '" class="form-control numerals deductionamount" data-vcode="' + outstading[j]['vouc_code'] + '" readonly></td>';
                    result += '<td><input type="text" autocomplete="off"  name="payment_sauda_group[' + j + '][outs_bal]" value="' + outstading[j]['totamt_bal'] + '" id="outs_bal' + j + '" class="form-control outs_bal nofocus"></td>';
                    result += '<td><input type="text" autocomplete="off" name="payment_sauda_group[' + j + '][rmks]"  id="rmks" class="form-control"></td>';
                    ///id
                    result += '<td><input type="hidden" autocomplete="off" name="payment_sauda_group[' + j + '][outsid]"  id="outsid" value="' + outstading[j]._id + '" class="form-control"></td>';
                    result += '</tr> ';
                    // glbidx = j;

                    // data-toggle="modal" data-target="#myModal"
                }
                // result += '<tr><td colspan="8"></td></tr>'
                result += '<tr><td></td><td></td><td></td><td></td>';
                result += '<td><input type="text" name="chkddamt" id="chkddamt" placeholder="DD/Chk Amount" class="form-control number chkddamt nofocus" readonly></td><td><input type="text" name="chkdddt" id="chkdddt" placeholder="Deducations" class="form-control chkdddt nofocus" readonly></td>';
                result += '<td></td><td></td></tr>';
                result += '</tbody>';
                result += '</table>';
                result += '</div>';
                if(outstading.length){
                    $('.ifnoentry').hide();
                    $('.ifnoentry input').attr('disabled','disabled');
                    $('.ifnoentry input').attr('readonly','readonly');
                    $('.delivery_repeat_row').html(result);
                }
                else{
                    $('.delivery_repeat_row').html('');
                    swal({
                        title:"Oops!!",
                        text:"No Deliveries",
                        buttons:false,
                        timer:1500
                    })
                    $('.ifnoentry').show();
                    $('.ifnoentry input').val(null);
                    $('.ifnoentry input').removeAttr('disabled');
                    $('.ifnoentry input').removeAttr('readonly');
                }
                // $('#selectseller').modal({'show':true,'backdrop':'static'});
                $('.loader').hide();
            }
        }
    });

});
function paycalc(id) {
    var outs_rec = 0;
    var currbill_amt = 0;
    var outs=0;
    var dtcton_amt=0;
    for (i = 0; i <= id; i++) {
        outs_rec = outs_rec + parseInt($("#outs_rec" + i).val());
        currbill_amt = $("#currbill_amt" + i).val();
        outs = $("#outs_rec" + i).val();
        vcd = $("#vouc_code" + i).val();
        dtcton_amt= $("#dtcton_amt" + vcd).val();
        console.log(dtcton_amt);
        $("#outs_bal"+id).val(Number(currbill_amt)-Number(outs)-Number(dtcton_amt));
    }
    $("#chkddamt").val(Number(outs_rec));

}
function changesl(callback) {
    // alert(callback);
    $('.loader').show();
    if( $("#expence_detail" + callback).length ){
        $('#expence_detail' + callback).css('display','block');
    }else{
        $.ajax({
                type: 'GET',
                url: '/payment_entry/expenseaname',
                dataType: 'json',
                success: function (data) {
                    var i, j;
                    if (data['success'] == true) {
                        var expense = data['expense'];
                        var result = '<div class="col-md-12" id="expence_detail'+ callback +'">';
                        result += '<div class="row adjustmentstable">';
                        result += `<div class="col-md-8 deliverydata${callback}"></div>`;
                        result += '<div class="col-md-4">';
                        result += '<div class="panel panel-default">';
                        result += '<div class="table-responsive">';
                        result += '<table class="product_detail_table">';
                        result += '<thead>';
                        result += '<tr><th colspan="4">Bill No : '+ callback +'</th></tr>';
                        result += '<tr>';
                        result += '<th>+/-</th>';
                        result += '<th>Expense</th>';
                        result += '<th>%</th>';
                        result += '<th>Amount</th>';
                        result += '</tr>';
                        result += '</thead>';
                        result += '<tbody>';
                        for (j = 0; j < expense.length; j++) {
                            result += '<tr>';
                            result += '<td>' + expense[j]['expense_type'] + '';
                            result += '<input type="hidden"  name="expense_group['+j+'][expense_type]" value="'+ expense[j]['expense_type'] +'"></td>';
                            result += '<td>' + expense[j]['expense_name'] + '';
                            result += '<input type="hidden"  name="expense_group['+j+'][expense_name]" value="'+ expense[j]['expense_name'] +'">';
                            result += '<input type="hidden"  name="expense_group['+j+'][vouch_code]" value="'+callback+'"></td>';
                            result += '<td></td>';
                            result += '<td><input type="text"  name="expense_group['+j+'][amountexpence]"  id="amountexpence' + callback + '"  class="form-control amountcal firstdeduction amountexpence'+ callback +' number" data-id="'+callback+'"></td>';
                            
                            result += '</tr>';
                        }
                        result += '<tr>';
                        result += '<td style="color:red">Total</td>';
                        result += '<td></td>';
                        result += '<td></td>';
                        result += '<td><input type="text" name="totamountexpence"  id="totamountexpence' + callback + '" class="form-control number nofocus" readonly></td> ';
                        result += '</tr>';
                        result += '<tr>';
                        result += '<td colspan="4"><input type="button" value="OK" id="expencesauda'+ callback +'" data-box="'+ callback +'" class="btn btn-primary btn-block expencesauda expensesaudaok" /></td> ';
                        result += '</tr>';
                        result += '</tbody>';
                        result += '</table>';
                        result += '</div>';
                        result += '</div>';
                        result += '</div>';
                        result += '</div>'
                        result += '</div>';
                        $('.expence_repeat_row').append(result);
                        showdeliverydata('deliverydata' + callback);
                        $(".product_detail_table tr:first-child .firstdeduction").focus();
                        $('.loader').hide();
                    }
                }
        });
            // $('#myModal').modal('show');
       
    }
}

function showdeliverydata(apto){
    var output = ` <div class="row">
    <div class="col-sm-12 col-md-7">
        <div class="form-group  form-md-line-input clearfix">
            <label class="col-sm-3 control-label">Ref No: </label>
            <div class="col-md-5">
                <p class="form-control-static">058</p> 
            </div>
            <div class="col-md-4">
                <p class="form-control-static">058</p>   
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-md-5">
        <div class="form-group  form-md-line-input clearfix">

            <label class="col-sm-3 control-label">Date: </label>
            <div class="col-md-9">
                <p class="form-control-static">05/05/05</p> 
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-md-6">
        <div class="form-group clearfix">
            <label for="" class="control-label col-md-3">Buyer</label>
            <div class="col-md-9">
                 <p class="form-control-static">058</p> 
            </div>
        </div>
    </div>
    <div class="col-sm-12 col-md-6">
        <div class="form-group clearfix">
            <label for="" class="control-label col-md-3">Seller</label>
            <div class="col-md-9">
                <p class="form-control-static">058</p> 
                </div>
            </div>
        </div>
    </div>
</div>`;
output += `<div classs="row"><div class="col-md-12">
    <div class="table-responsive"><table class="table delivrateinpayentry">
    
    <thead>
    <tr>
        <th style="width:80px;">Product</th>
        <th style="width:80px;">Brand</th>
        <th style="width:80px;">Bag</th>
        <th style="width:80px;">Pack</th>
        <th style="width:80px;">Unit</th>
        <th style="width:80px;">Wght</th>
        <th style="width:80px;">Sauda Rt</th>
        <th style="width:80px;">Seller Rt</th>
        <th style="width:80px;">Buyer Rt</th>
        <th style="width:80px;">Rate /Type</th>
        <th style="width:80px;">Qtl /Tons</th>
        <th style="width:80px;">Per</th>
        <th style="width:80px;">Amount</th>
        <th style="width:80px;">Type</th>
        <th style="width:80px;">Old/New</th>
        <th style="width:80px;">IPack</th>
        <th style="width:80px;">SI Brok Rt</th>
        <th style="width:80px;">Type</th>
    </tr>
</thead>
<tbody>`;

for(j=0; j<2; j++){
    output += `<tr>`;
    for(var i=0; i<18; i++){
        output += `<td>${i}</td>`
    }
    output += `</tr>`;
}

output += `
</tbody>
    </table>
</div></div></div>`;

output += `
<div class="row">
<div class="col-sm-6 col-md-4">
    <div class="form-group clearfix">
        <label for="" class="control-label col-md-3">Bill</label>
        <div class="col-md-9">
             <p class="form-control-static">058</p> 
        </div>
    </div>
</div>
<div class="col-sm-6 col-md-4">
    <div class="form-group clearfix">
        <label for="" class="control-label col-md-3">Date</label>
        <div class="col-md-9">
            <p class="form-control-static">25/12/2019</p> 
        </div>
    </div>
    
</div>

<div class="col-sm-6 col-md-4">
<div class="form-group clearfix">
    <label for="" class="control-label col-md-3">Freight</label>
    <div class="col-md-9">
         <p class="form-control-static">058</p> 
    </div>
</div>
</div></div>
<div class="row">
<div class="col-sm-6 col-md-4">
<div class="form-group clearfix">
    <label for="" class="control-label col-md-3">Adv</label>
    <div class="col-md-9">
        <p class="form-control-static">25/12/2019</p> 
        </div>
    </div>
</div>
<div class="col-sm-6 col-md-4">
<div class="form-group clearfix">
    <label for="" class="control-label col-md-3">Term</label>
    <div class="col-md-9">
        <p class="form-control-static">25/12/2019</p> 
        </div>
    </div>
</div>
<div class="col-sm-6 col-md-4">
<div class="form-group clearfix">
    <label for="" class="control-label col-md-3">Credit</label>
    <div class="col-md-9">
        <p class="form-control-static">05 Days</p> 
        </div>
    </div>
</div>
<div class="row">
<div class="col-sm-6 col-md-4">
<div class="form-group clearfix">
    <label for="" class="control-label col-md-3">Weight</label>
    <div class="col-md-9">
        <p class="form-control-static">19</p> 
        </div>
    </div>
</div>
<div class="col-sm-6 col-md-4">
<div class="form-group clearfix">
    <label for="" class="control-label col-md-3">Gross</label>
    <div class="col-md-9">
        <p class="form-control-static">2019</p> 
        </div>
    </div>
</div>
<div class="col-sm-6 col-md-4">
<div class="form-group clearfix">
    <label for="" class="control-label col-md-3">Barg.</label>
    <div class="col-md-9">
        <p class="form-control-static">0511</p> 
        </div>
    </div>
</div>
</div>
</div>
</div>`;

    $('.' + apto).html(output);
}

$(document).on("click", ".expencesauda", function () {
    var vcode = $(this).attr('data-box');
    $('#expence_detail'+ vcode).css('display','none');
});

function calcpay(callback) {
    var outs_rec = 0;
    var dtcton_amt = 0;
    var currbill_amt = 0;
    var amountexpence = 0;
    for (i = 0; i <= callback; i++) {
        outs_rec = outs_rec + parseInt($("#outs_rec" + i).val());
        currbill_amt = $("#currbill_amt" + callback).val();
        $("#outs_bal" + callback).val(Number(currbill_amt) - Number($("#outs_rec" + i).val()) - Number($("#amountexpence" + callback).val()));
        amountexpence = amountexpence + parseInt($("#amountexpence" + i).val());
        $("#dtcton_amt" + callback).val(Number($("#amountexpence" + callback).val()));
        //   alert($("#dtcton_amt"+i).val());
        dtcton_amt = dtcton_amt + parseInt($("#dtcton_amt" + i).val());
        //   $("#outs_bal"+i).val(Number($("#outs_rec"+i).val())-Number(amountexpence));

    }
    $("#chkddamt").val(Number(outs_rec));
    $("#chkdddt").val(Number(dtcton_amt));
    $("#totamountexpence").val(Number(amountexpence));

    // 

}
///bill generation
$(document).on("click", "#billfiltersubmit", function () {
    // $('.loader').show();
    var from_dt = $("#from_dt").val();
    var to_dt = $("#to_dt").val();
    var bill_dt = $("#bill_dt").val();
    var to_begented = $("#to_begented").val();
    var formfilter = $("input[name='formfilter']:checked").val();
    var radioformfilter = $("input[name='radioformfilter']:checked").val();
    // alert(radioformfilter);
    var marked = $("input[name='marked']:checked").val();
    var currntcmpny = $("input[name='currntcmpny']:checked").val();
    var skipsubbr = $("input[name='skipsubbr']:checked").val();
    var allprty = $("input[name='allprty']:checked").val();
    var citywise = $("#citywise").val();
    var partyAllcheck = $("input[name='partyAllcheck']:checked").val();
    
    var party_name = $('#party_name').val();
    // alert(party_name);
    // var val = [];
    // $(".party_name.select2").each(function (i) {
    //     val[i] = $(this).attr('data-id');
    //     alert(val[i]);
    // });
    // var Allcheck = ( $('input[type="checkbox"]:checked').length );
    // alert(Allcheck)
    $.ajax({
        type: "POST",
        url: '/bill_generation/partydetail',
        dataType: 'json',
        data: {
            radioformfilter: radioformfilter,
            from_dt : from_dt,
            to_dt : to_dt,
            bill_dt : bill_dt,
            to_begented : to_begented,
            formfilter : formfilter,
            radioformfilter : radioformfilter,
            marked : marked,
            currntcmpny : currntcmpny,
            skipsubbr : skipsubbr,
            allprty : allprty,
            party_name : party_name,
            citywise : citywise,
            partyAllcheck : partyAllcheck
        },
        success: function (data) {
            var i, j, result;
            if (data['success'] == true) {
                var party = data['party'];
                // console.log(party);
            }
            // $('.contract_detail_body').html(result);
            // $('.loader').hide();
        }
    });
});
// $(document).on("click","#filtersubmit",function(){
//     $(".loader").show().$(this).attr('id').$("a.remove[data-id='2']").attr('id').$("#abc1'").attr('id');
//     Object.defineProperty($.fn, 'id', {
//         get: function () { return this.attr("id"); },
//         set: function (newValue) { this.attr("id", newValue); }
//     });
// });



$("#addproduct").on( "submit", function() {
    var item_name = $.trim($('.item_name').val());
    // alert(stateName);
    if(item_name== '')
     {
        
        $('.item_name').next().show();
        
    }else
    {
        $('.item_name').next().hide();
    }
    if(item_name== ''){
        return false;
    }
});
$(document).on('click', '.edit_product_btn', function(){
    var productid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type:'GET',
        url: '/product/'+productid,
        dataType:'json',
        success: function(response) {
            if(response['success'] == true) {
                // //console.log(response);
                var item_name = response['product'].item_name;
                var sno = response['product'].sno;
                var productid = response['product']._id;
                $("#formheading span").text('Edit')
                $('.item_name').val(item_name);
                $("#addproduct").attr("action", "/product/edit_product/" + productid);
            } else {
                swal({
                    title:"Error",
                    icon:"Warning",
                    text: response['message'],
                    buttons: false,
                    timer: 1500
                })
                // $('.branddanger').html(response['message']);
                // $('.branddanger').show();
                // $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function(err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete-product', function(event){
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type:'DELETE',
                url: '/product/'+id,
                success: function(response) {
                    window.location.href='/product/product';
                    $('.loader').hide();
                },
                error: function(err) {
                    console.log(err);
                }
            });
        }
      });
});


function remove_updateproductrawmast(id)
{
   // alert(id)
    // alert(id);
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/product_raw_master/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    $("#prabal"+id).remove(); 
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
} 


$(document).on("click", ".productraw-delete-btn", function () {
    var str = confirm('Are you sure you want to delete this element');
    if (str == true) {
        var parent_id = $(this).closest('.contract_wrapper').prop('id');
        $("#prabal" + parent_id).remove();
        // calcashbank(1);
    }
 
});
//end remove product master
function delemrn(index){
    $("#prabal"+index).remove();
}


var counter = 1;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addproduct', function()
{
    lstidx = $("input[name*='cntrer']").length + 1;
    var values = $("input[name='cntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/product_raw_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                var new_div = document.createElement('div');
                var new_div = '<tr class= "product_wrapper" id="prabal'+counter+'">'
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                new_div +='<select name="color['+counter+']" id="color'+counter+'" onchange="getshortdescnm('+counter+')" class="form-control selectproductfocus productplace" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < rowmatname.length; j++) {
                        new_div += "<option value='" + rowmatname[j]['_id'] + "' data-name='" + rowmatname[j]['description'] + "'>" + rowmatname[j]['description'] + "</option>";
                    }
                new_div +='</select></td>';

                new_div +='<td><input type="text" name="prop1['+counter+']" class="form-control" oninput="getshortdescnm('+counter+')" placeholder="Prop 1" id="prop'+counter+'">';
                new_div +='<input type="hidden" name="mainshortdescnm['+counter+']" id="mainshortdescnm'+counter+'" class="form-control">';
                new_div +='</td>';
                new_div +='<td><input type="text" name="prop2['+counter+']" class="form-control amountfocus" placeholder="Prop 2" id="prop2"></td>';
                new_div +="<td><a onclick='remove_productrowise("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    placeholder: "Select Color",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });    
  } 
});
function remove_productrowise(id){
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
           
                    $("#prabal"+id).remove(); 
        }
        });
}
function remove_productRaw(id,srno)
{
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'GET',
                url: '/product_raw_master/deletecolor/'+id,
                success: function (response) {
                    $("#prabal"+srno).remove(); 
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
        });
}
// addwork

var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addwork', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/work_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                StockUnit = data['StockUnit'];
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus" placeholder="Raw Name"  name="work_master_group['+counter+'][raw_name]" type="text" style="width:100%"/>';
                                   
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Qty"  name="work_master_group['+counter+'][qty]" type="text" style="width:100%"/></td>';
                
                new_div +='<td>';
                new_div += '<select   name="work_master_group['+counter+'][unit]" "value=""  class="form-control prbank  productplace" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < StockUnit.length; j++) {
                        new_div += "<option value='" + StockUnit[j]['_id'] + "' data-product_id='" + StockUnit[j]['_id'] + "'>" + StockUnit[j]['SKUName'] + "</option>";
                    }
                new_div +='</select></td>';


                // new_div +='<td>';
                // new_div +='<input class="form-control " placeholder="Unit"  name="work_master_group['+counter+'][unit]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Rate"  name="product_raw_master_group['+counter+'][rate]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Value"  name="work_master_group['+counter+'][value]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    placeholder: "Select Unit",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});
//end addwork

//addjwsetup
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addjwsetup', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/work_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                StockUnit = data['StockUnit'];
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus" placeholder="Product Desc"  name="jw_setup_group['+counter+'][productDesc]" type="text" style="width:100%"/>';
                                   
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Material Price"  name="jw_setup_group['+counter+'][materialPrice]" type="text" style="width:100%"/></td>';
                
                // new_div +='<td>';
                // new_div += '<select   name="jw_setup_group['+counter+'][unit]" "value=""  class="form-control prbank  productplace" style="width:100%;">';
                // new_div +='<option value=""></option>';
                // for (j = 0; j < StockUnit.length; j++) {
                //         new_div += "<option value='" + StockUnit[j]['_id'] + "' data-product_id='" + StockUnit[j]['_id'] + "'>" + StockUnit[j]['SKUName'] + "</option>";
                //     }
                // new_div +='</select></td>';


                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Labour Price"  name="jw_setup_group['+counter+'][labourPrice]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Rate"  name="product_raw_master_group['+counter+'][rate]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Unit"  name="jw_setup_group['+counter+'][unit]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    // placeholder: "Select Unit",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});
//end add jwsetup

//addjob
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addjob', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/job_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus" placeholder="Raw Name"  name="job_master_group['+counter+'][raw_name]" type="text" style="width:100%"/>';
                                   
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Qty"  name="job_master_group['+counter+'][qty]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Unit"  name="job_master_group['+counter+'][unit]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Rate"  name="product_raw_master_group['+counter+'][rate]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Value"  name="job_master_group['+counter+'][value]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    // placeholder: "Select Raw Material",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});
//end addjob

///remove product master



    //add product master
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addproduct1', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/product_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus product_master_group['+counter+'][width]" placeholder="Width"  name="product_master_group['+counter+'][width]" type="text" style="width:100%"/>';
                                   
                new_div +='<td>';
                new_div +='<input class="form-control product_master_group['+counter+'][pur_rt] " placeholder="Pur Rt"  name="product_master_group['+counter+'][pur_rt]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control product_master_group['+counter+'][stock]" placeholder="Stock"  name="product_master_group['+counter+'][stock]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control product_master_group['+counter+'][rate]" placeholder="Rate"  name="product_master_group['+counter+'][rate]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus product_master_group['+counter+'][value]" placeholder="Value"  name="product_master_group['+counter+'][value]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproductraw("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    // placeholder: "Select Raw Material",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});

function calinquiry(){
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx);
    for(let i=0;i<=lstidx;i++){
        var qty = $('#qty'+i).val();
        if(qty == ''|| qty == null)qty=0;
        var rate = $('#rate'+i).val();
        if(rate == ''|| rate == null)rate=0;
        $('#amount'+i).val(rate*qty);
    }
}
    //end add product master

    //add Job Allotment
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addjoballotment', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/job_allotment/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus job_allotment_group['+counter+'][jobNo_compNo]" placeholder="Job No Comp No"  name="job_allotment_group['+counter+'][jobNo_compNo]" type="text" style="width:100%"/>';
                                   
                new_div +='<td>';
                new_div +='<input class="form-control job_allotment_group['+counter+'][worker] " placeholder="Worker"  name="job_allotment_group['+counter+'][worker]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control job_allotment_group['+counter+'][work]" placeholder="Work"  name="job_allotment_group['+counter+'][work]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control job_allotment_group['+counter+'][jobFrom]" placeholder="From"  name="job_allotment_group['+counter+'][jobFrom]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus job_allotment_group['+counter+'][jobTo]" placeholder="To"  name="job_allotment_group['+counter+'][jobTo]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus job_allotment_group['+counter+'][confirmation]" placeholder="Confirmation"  name="job_allotment_group['+counter+'][confirmation]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    // placeholder: "Select Raw Material",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});

    //end add Job Allotment

    function calprojectproduct(){
        lstidx = $("input[name*='cntrer']").length+1;
        var values = $("input[name='cntrer']")
          .map(function(){return $(this).val();}).get();
        var idx = values[values.length-1]
        lstidx = parseInt(idx)+1;
        for(let i=0;i<=lstidx;i++){
            var qty = $('#qty'+i).val();
            if(qty == ''|| qty == null)qty=0;
            var rate = $('#rate'+i).val();
            if(rate == ''|| rate == null)rate=0;
            $('#amount'+i).val(rate*qty);
           
        }
    }


    //add project entry project_product_group
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addproductGroup', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/project_entry/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                StockUnit = data['StockUnit'];
                productmaster = data['productmaster'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";

                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                new_div += '<select   name="project_product_group['+counter+'][product_name]" "value=""  class="form-control prbank selectproductfocus productname" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < rowmatname.length; j++) {
                        new_div += "<option value='" + rowmatname[j]['_id'] + "' data-product_id='" + rowmatname[j]['_id'] + "'>" + rowmatname[j]['product_name'] + "</option>";
                    }
                new_div +='</select></td>';
                new_div +='<td>';
                new_div +='<input class="form-control project_product_group['+counter+'][qty] " oninput="calprojectproduct()" placeholder="Qty" id="qty'+counter+'"  name="project_product_group['+counter+'][qty]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='';
                new_div += '<select   name="project_product_group['+counter+'][unit]" "value="" id="unit'+counter+'" class="form-control prbank selectproductfocus sku" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < StockUnit.length; j++) {
                        new_div += "<option value='" + StockUnit[j]['_id'] + "' data-product_id='" + StockUnit[j]['_id'] + "'>" + StockUnit[j]['SKUName'] + "</option>";
                    }
                new_div +='</select></td>';

                new_div +='<td>';                                                               
                new_div +='<input class="form-control project_product_group['+counter+'][rate]" oninput="calprojectproduct()" id="rate'+counter+'" placeholder="Rate"  name="project_product_group['+counter+'][rate]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control  project_product_group['+counter+'][amount]" oninput="calprojectproduct()" id="amount'+counter+'" placeholder="Amount"  name="project_product_group['+counter+'][amount]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                
               


                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productname").select2({
                    placeholder: "Select Product Name",
                    allowClear: true,
                });
                $(".sku").select2({
                    placeholder: "Select Unit Name",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});

    //end add project entry project_product_group

    //add project entry project_contact_group
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addcontactGroup', function()
{
    lstidx = $("input[name*='cntrercontect']").length+1;
    var values = $("input[name='cntrercontect']")
     .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/project_entry/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                Agency = data['Agency'];
                // StockUnit = data['StockUnit'];
                productmaster = data['productmaster'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabalcontact"+counter+"'>";

                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrercontect" value="'+counter+'" id="cntrercontect'+counter+'">';
                new_div +='';
                new_div += '<select   name="project_contact_group['+counter+'][agency]" "value=""  class="form-control prbank selectproductfocus agency" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < Agency.length; j++) {
                        new_div += "<option value='" + Agency[j]['_id'] + "' data-product_id='" + Agency[j]['_id'] + "'>" + Agency[j]['Description'] + "</option>";
                    }
                new_div +='</select></td>';
                                   
                new_div +='<td>';
                new_div +='<input class="form-control  project_contact_group['+counter+'][contactPerson] " placeholder="Contact Person"  name="project_contact_group['+counter+'][contactPerson]" type="text" style="width:100%"/></td>';
               
                new_div +='<td>';
                new_div +='<input class="form-control project_contact_group['+counter+'][email]" placeholder="Email"  name="project_contact_group['+counter+'][email]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control  project_contact_group['+counter+'][contactNo]" placeholder="Contact No"  name="project_contact_group['+counter+'][contactNo]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updatecontact("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_contact");
                counter++;
                member++;
                $(".agency").select2({
                    placeholder: "Select Agency",
                    allowClear: true,
                });
                $(".sku").select2({
                    placeholder: "Select Unit Name",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                $('.datepicker').datepicker({ format : 'dd/mm/yyyy', autoclose: true,});
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus()
                
            }
        }
    });
  } 
});

    //end add project entry project_contact_group


    //add project entry project_payment_group
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addpaymentGroup', function()
{
    lstidx = $("input[name*='cntrerpayment']").length+1;
    var values = $("input[name='cntrerpayment']")
     .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/project_entry/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                ptypMast = data['ptypMast'];
                // StockUnit = data['StockUnit'];
                productmaster = data['productmaster'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabalpayment"+counter+"'>";

                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrerpayment" value="'+counter+'" id="cntrerpayment'+counter+'">';
                new_div +='';
                new_div += '<select   name="project_payment_group['+counter+'][paymentTerm]" "value=""  class="form-control prbank selectproductfocus paymentname" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < ptypMast.length; j++) {
                        new_div += "<option value='" + ptypMast[j]['_id'] + "' data-product_id='" + ptypMast[j]['_id'] + "'>" + ptypMast[j]['Description'] + "</option>";
                    }
                new_div +='</select></td>';
                                   
                new_div +='<td>';
                new_div +='<input class="form-control datepicker project_payment_group['+counter+'][paymentDate]"  placeholder="Date"  name="project_payment_group['+counter+'][paymentDate]" type="text" style="width:100%"/></td>';
               
                new_div +='<td>';
                new_div +='<input class="form-control project_payment_group['+counter+'][paymentAmount]" placeholder="Amount"  name="project_payment_group['+counter+'][paymentAmount]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control  project_payment_group['+counter+'][remark]" placeholder="Remark"  name="project_payment_group['+counter+'][remark]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updatepayment("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_payment");
                counter++;
                member++;
                $(".paymentname").select2({
                    placeholder: "Select Payment Term",
                    allowClear: true,
                });
                $(".sku").select2({
                    placeholder: "Select Unit Name",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                $('.datepicker').datepicker({ format : 'dd/mm/yyyy', autoclose: true,});
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus()
                
            }
        }
    });
  } 
});

    //end add project entry project_payment_group


    // add inquiry master
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addinquiry', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/inquiry_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                ProductMaster = data['ProductMaster'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                // new_div +='<input class="form-control selectproductfocus" placeholder="Product" id="product'+counter+'"  name="inquiry_master_group['+counter+'][product]" type="text" style="width:100%"/>';
                // new_div +='<td>';
                new_div += '<select   name="inquiry_master_group['+counter+'][product_name]" placeholder="Select Product" "value="" oninput="calinquiry()" class="form-control selectproductfocus productplace" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < ProductMaster.length; j++) {
                        new_div += "<option value='" + ProductMaster[j]['_id'] + "' data-product_id='" + ProductMaster[j]['_id'] + "'>" + ProductMaster[j]['product_name'] + "</option>";
                    }
                new_div +='</select></td>';
                
                
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Qty" oninput="calinquiry()" id="qty'+counter+'" name="inquiry_master_group['+counter+'][qty]" type="text" style="width:100%"/></td>';
               
               
               
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Unit" oninput="calinquiry()" id="unit'+counter+'" name="inquiry_master_group['+counter+'][unit]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Rate" oninput="calinquiry()" id="rate'+counter+'" name="inquiry_master_group['+counter+'][rate]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Amount" oninput="calinquiry()" id="amount'+counter+'" name="inquiry_master_group['+counter+'][amount]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    placeholder: "Select Product",
                    allowClear: true,
                });
                $(".sku").select2({
                    placeholder: "Select Product",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});
    // end add inquiry master

    function calcomplaint(){
        lstidx = $("input[name*='cntrer']").length+1;
        var values = $("input[name='cntrer']")
                  .map(function(){return $(this).val();}).get();
        var idx = values[values.length-1]
        lstidx = parseInt(idx);
        for(let i=0;i<=lstidx;i++){
            var qty = $('#qty'+i).val();
            if(qty == ''|| qty == null)qty=0;
            var rate = $('#rate'+i).val();
            if(rate == ''|| rate == null)rate=0;
            $('#amount'+i).val(rate*qty);
        }
    }

    //add complaint master
    var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addcomplaint', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/complaint_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                // new_div +='<input class="form-control amountfocus" placeholder="Size"  name="product_raw_master_group['+counter+'][size]" type="text" style="width:100%"/>';
                // new_div +='<select name="complaint_master_group['+counter+'][job_name]" " value="" class="form-control selectproductfocus productplace" style="width:100%;">';
                new_div += '<select   name="complaint_master_group['+counter+'][job_name]" "value=""  class="form-control prbank selectproductfocus productplace" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < rowmatname.length; j++) {
                        new_div += "<option value='" + rowmatname[j]['_id'] + "' data-product_id='" + rowmatname[j]['_id'] + "'>" + rowmatname[j]['job_name'] + "</option>";
                    }
                new_div +='</select></td>';

                // new_div +='<td>';
                // new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                // new_div +='';
                // new_div +='<input class="form-control amountfocus" placeholder="Product"  name="complaint_master_group['+counter+'][product]" type="text" style="width:100%"/>';
                                   
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus"  oninput="calcomplaint()" id="description" placeholder="Description"  name="complaint_master_group['+counter+'][description]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" oninput="calcomplaint()" id="qty'+counter+'" placeholder="Qty"  name="complaint_master_group['+counter+'][qty]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" oninput="calcomplaint()" id="rate'+counter+'" placeholder="Rate"  name="complaint_master_group['+counter+'][rate]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" oninput="calcomplaint()" id="amount'+counter+'" placeholder="Amount"  name="complaint_master_group['+counter+'][amount]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Min Stk"  name="product_raw_master_group['+counter+'][minstk]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    placeholder: "Select Job Name",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});
    //end add complaint master



var counter = 1;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.updateproduct', function()
{
    lstidx = $("input[name*='cntrer']").length;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    var new_div = document.createElement('div');
    var new_div = "<tr class='product_wrapper' id='rohit"+counter+"'>";
    new_div +='<td><input class="form-control" name="product_mast_group['+counter+'][it_pck]" value="" placeholder="Packing" type="text" required="" style="width:100%;"/></td>';
    new_div +='<td>';
    new_div +='<select name="product_mast_group['+counter+'][it_bk]" id="it_bk" value="" class="form-control"  style="width:100%;">';
    new_div +='<option value="katta">Katta</option>';
    new_div +='<option value="bori">Bori</option>';
    new_div +='<option value="box">Box</option>';
    new_div +='</select>';
    new_div +='</td>';
    new_div +='<td><input class="form-control" type="text" placeholder="Brokerage Rate(Seller)" name="product_mast_group['+counter+'][it_ratesl]" style="width:100%;"/></td>';
    new_div +='<input type="hidden" name="cntrer'+counter+'" value="'+counter+'" id="cntrer'+counter+'" class="form-control" style="width: 102px;text-align: -webkit-right;">';
    new_div +='<td>';
    new_div +='<select name="product_mast_group['+counter+'][it_ratetypsl]" id="it_ratetypsl" value="" class="form-control" style="width:100%;">';
    new_div +='<option value="%">%</option>';
    new_div +='<option value="PBag">PBag</option>';
    new_div +='<option value="PQtl">PQtl</option>';
    new_div +='<option value="Fix">Fix</option>';
    new_div +='</select>';
    new_div +='<td>';
    new_div +='<input class="form-control" type="text" placeholder="Brokerage Rate (Buyer)" style="width:100%;" name="product_mast_group['+counter+'][it_ratebr]"/>';
    new_div +='</td>';
    new_div +='<td>';
    new_div +='<select name="product_mast_group['+counter+'][it_ratetypbr]" id="it_ratetypbr" value="" class="form-control" style="width:100%;">';
    new_div +='<option value="%">%</option>';
    new_div +='<option value="PBag">PBag</option>';
    new_div +='<option value="PQtl">PQtl</option>';
    new_div +='<option value="Fix">Fix</option>';
    new_div +='</select>';
    new_div +='</td>';
    new_div +="<td><a onclick='remove_product("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
    $(new_div).insertBefore("#update_product");
    counter++;
    member++;

  } 
});
function remove_product(id)
{
    alert('Are you sure you want to delete this element');
    if(counter == 0)
    {
        alert("No record to delete");
    }
    else
    {
        counter--;
        member--;
        $("#rohit"+id).remove(); 
       
    }
} 

function remove_updateproduct(id)
{
    var strconfirm=confirm("Are you sure want to delete?");
    if (strconfirm==true) {
        counter--;
        member--;
        $("#prabal"+id).remove(); 
    }
} 

function remove_updateproductraw(id)
{
    alert('Are you sure you want to delete this element');
      counter--;
        member--;
        $("#prabal"+id).remove(); 
} 

function remove_updatecontact(id)
{
    alert('Are you sure you want to delete this element');
      counter--;
        member--;
        $("#prabalcontact"+id).remove(); 
} 

function remove_updatepayment(id)
{
    alert('Are you sure you want to delete this element');
      counter--;
        member--;
        $("#prabalpayment"+id).remove(); 
} 



$(document).ready(function () {

    $("body").on("click",".expensesaudaok",function(){
        $(".cash").focus();
    })

    $('.printa').click(function(e){
        e.preventDefault();
        var link = $(this).attr('href');
        var printwindow = window.open(link, "Print Sauda", "width=1100, height=600");
    })

    $(".fstable").click(function () {
        if (typeof document.cancelFullScreen != 'undefined' && document.fullScreenEnabled === true) {
            /* do fullscreen stuff */
        }
        gofullscreen("tableportlet");
    })


	var dropdownMenu;
                             
	$(window).on('show.bs.dropdown', function (e) {

		dropdownMenu = $(e.target).parent('td').find('.dropdown-menu');

		$('body').append(dropdownMenu.detach());

		// grab the new offset position
		var eOffset = $(e.target).offset();

		dropdownMenu.css({
			'display': 'block',
			'top': eOffset.top + $(e.target).outerHeight(),
			'right': 0
		});

	});                                                
	$(window).on('hide.bs.dropdown', function (e) {
		$(e.target).append(dropdownMenu.detach());
		dropdownMenu.hide();
    });
    
    $("body").on("click",".delbutton",function(e){
        e.preventDefault();
        var link = $(this).attr("href");
        return swal({
            title:"Confirm",
            text:"Are you Sure you want to delete it?",
            icon:"warning",
            buttons: ["Cancel","Confirm"],
            dangerMode: true
        }).then(function(valu){
            if(valu)
                window.location.href = link;
        }).catch(function(){
            return false;
        })


    })

    $(".discountcredit").bootstrapSwitch();

    $(".partymasterbuttons button").click(function(){
        var dval = $(this).attr('data-value');
        var buyer = $('button[data-value="B"]');
        var seller = $('button[data-value="S"]');
        if($(this).attr("data-active") == "no"){
            $(this).css({'background-color':"#4b77be",'color':"#fff"});
            $(this).attr("data-active","yes");
            updatepartymasterbuttons();
        }
        else{
            $(this).css({'background-color':"#fff",'color':'rgb(51,51,51)'});
            $(this).attr("data-active","no");
            updatepartymasterbuttons();
        }
    })

    /* select2 Data format */
    /* Ajax */
    // {
    //     "results": [
    //       {
    //         "id": 1,
    //         "text": "Option 1"
    //       },
    //       {
    //         "id": 2,
    //         "text": "Option 2"
    //       }
    //     ],
    //     "pagination": {
    //       "more": true
    //     }
    //   }

    /* For array */
    var data = [
        {
            id: 0,
            name: 'enhancement'
        },
        {
            id: 1,
            name: 'bug'
        },
        {
            id: 2,
            name: 'duplicate'
        },
        {
            id: 3,
            name: 'invalid'
        },
        {
            id: 4,
            name: 'wontfix'
        }
    ];

    addselect2('.select2');


    
    $('.city').select2({
        placeholder: 'Please select city',
        maximumSelectionLength: 3,
        allowClear: true,
        ajax:{
            type: "GET",
            url: '/add_city/getcity',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
               
            }
        }
    });
    $('.getfgname').select2({
        placeholder: 'Please Select Product Name',
        maximumSelectionLength: 3,
        allowClear: true,
        ajax:{
            type: "GET",
            url: '/bomof_jw/getfgname',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
               
            }
        }
    });
    $('.getrmname').select2({
        placeholder: 'Please Select Consumption',
        maximumSelectionLength: 3,
        allowClear: true,
        ajax:{
            type: "GET",
            url: '/bomof_jw/getrmname',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
               
            }
        }
    });
    $('.groupdown').select2({
        placeholder: 'Please Select Group',
        maximumSelectionLength: 3,
        allowClear: true,
        ajax:{
            type: "GET",
            url: '/group_mast/getgroupmast',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
               
            }
        }
    });
    $('.partyypdrop').select2({
        placeholder: 'Please Select Party Type',
        maximumSelectionLength: 3,
        allowClear: true,
        ajax:{
            type: "GET",
            url: '/party_type_mast/getpartyp',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
               
            }
        }
    });
    $('.rmstockdescription').select2({
        placeholder: 'Product Description',
        maximumSelectionLength: 3,
        allowClear: true,
        ajax:{
            type: "GET",
            url: '/stock_opening_module_rm/getshortdesciption',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
               
            }
        }
    }); 
    $('.rmstockdescriptionfg').select2({
        placeholder: 'Product Description',
        maximumSelectionLength: 3,
        allowClear: true,
        ajax:{
            type: "GET",
            url: '/stock_opening_module_fg/getshortdesciption',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
               
            }
        }
    });
    $('.cashbankname').select2({
        placeholder: 'Please Select Bank',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/cash_bank/cashbankname',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        templateResult: formatcity,
        // templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });


    $('.color').select2({
        placeholder: 'Select Color',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/product_raw_master/rowmatname',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        templateResult: formatcity,
        // templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });
    // cashac_name
    
    $('.cashac_name').select2({
        placeholder: 'Please Select Account Name',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/cash_bank/accountname',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        templateResult: formatcity,
        // templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });

    $('.cashac_namejv').select2({
        placeholder: 'Please Select Bank',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/journal_entry/journalname',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        templateResult: formatcity,
        // templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });
   
    $('.party').select2({
        placeholder: 'Please select Party',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/contract_sauda/getparty',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        // processResults: function (data) {
        //     console.log(data);
        //     return {
        //         results: data.format
        //     };
        // },
        templateResult: formatcity,
        templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });
    $('.sbparty').select2({
        placeholder: 'Please select Party',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/contract_sauda/sbparty',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        // processResults: function (data) {
        //     console.log(data);
        //     return {
        //         results: data.format
        //     };
        // },
        templateResult: formatcity,
        templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });
    $('.brparty').select2({
        placeholder: 'Please select Party',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/contract_sauda/brparty',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        // processResults: function (data) {
        //     console.log(data);
        //     return {
        //         results: data.format
        //     };
        // },
        templateResult: formatcity,
        templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });
    $('.brprod').select2({
        placeholder: 'Select Product',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/contract_sauda/getproductname',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        // processResults: function (data) {
        //     console.log(data);
        //     return {
        //         results: data.format
        //     };
        // },
        templateResult: formatcity,
        templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });

    $('.bbparty').select2({
        placeholder: 'Please select Party',
        allowClear: true,
        // minimumInputLength: 3,
        ajax:{
            type: "GET",
            url: '/contract_sauda/bbparty',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
            },
        },
        // processResults: function (data) {
        //     console.log(data);
        //     return {
        //         results: data.format
        //     };
        // },
        templateResult: formatcity,
        templateSelection: formatcity,
        escapeMarkup: function (m) { return m; }
    });
    //   $('.city').select2({
    //     data: data,
    //     placeholder: 'Please select city'
    //     // ajax: {
    //     //   url: 'https://api.github.com/search/repositories',
    //     //   dataType: 'json'
    //     //   // Additional AJAX parameters go here; see the end of this chapter for the full code of this example
    //     // }
    //   });
    function State(){
        var city = $('#ac_city').val();
        alert(city)
        $.ajax({
            url:'/customer11/chngstate',
            method:'GET',
            dataType: 'json',
            data:city,
            success: function(data){
            }
        });    
    }

      $('.addbank').on('click','',function(){
            addselect2('.bankrow:last-child select');
      })

      $('.addcontact').on('click','',function(){
            addselect2('.contactrow:last-child select');
      })

      $("select").on("change.select2", function (e) {  
        $(this).valid(); 
      });

      var formvalid = $('.validate').validate({
        ignore: [],
        messages:{
            "p_type[]" : "Please select atleast 1 Party type"
        },
        errorPlacement: function(error, element) {
            if (element.hasClass('select2')) {
                // error.appendTo(element.parent().parent());
                error.appendTo(element.parents('.col-md-9'));
            }
            else if (element.hasClass('party') || element.hasClass('brparty')) {
                // error.appendTo(element.parent().parent());
                error.appendTo(element.parents('.col-md-9'));
            }
            else {
                error.insertAfter(element);
            }
        }
      });

    //   $(".contractpartycheckbox").click(function(){
    //         if($(this).prop('checked') == true)
    //         $(this).parents(".input-group").find('select').removeAttr('disabled');
    //         else
    //         $(this).parents(".input-group").find('select').attr('disabled','true');
    //   })

    //   checkcontractpartytypeonedit();
 
// for blank page only for demo
    jQuery('.dtable').DataTable({
        // "dom": "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
        "dom": "<'row'<'col-md-4 col-sm-12 col-xs-12'B><'col-md-4 col-sm-6 col-xs-12'l><'col-md-4 col-sm-6 col-xs-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
        "lengthChange": true,
        "processing": true,
        "serverSide": true,
        "ajax": "/userright/data",
        "buttons": [
            {
                extend: 'excel',
                className: 'btn-default btn-excel'
            },
            {
                extend: 'pdf',
                className: 'btn-default btn-pdf'
            },
            {
                extend: 'print',
                className: 'btn-default btn-print'
            },
        ],
        "columns": [
            { "data": "id" },
            { "data": "name" },
            { "data": "position" },
            { "data": "office" },
            { "data": "extn" },
            { "data": "start_date" },
            { "data": "salary" }
        ]
    })

    // $(document).on('focus','input',function(){
    //     var e = $.Event('kepress');
    //     e.which = 48;
    //     e.keycode = 48;
    //     $(document).trigger(e);
    // })

    $(document).on("keypress", 'form', function (e) {
        var code = e.keyCode || e.which;
        if (code == 13) {
            e.preventDefault();
            return false;
        }
    });
    /* open select on focus instead of enter */
    $('body').on('select2:select','.select2',function(){
            $(this).select2('close');
            $(this).focus();
    })  
    $('body').on('keydown', 'input, select:visible, .select2-container, textarea, .shiftfocus', function(e) {
        var self = $(this)
          , form = self.parents('form:eq(0)')
          , focusable
          , next
          ;
          if (e.keyCode == 13) {
            focusable = form.find('input,a,select, select:visible,button:not(".isprop"), .select2-container,.shiftfocus, textarea').not('.nofocus').filter(':visible');
            if($(this).hasClass('.select2-container')){
                ol = $(this).siblings('select');
                next = focusable.eq(focusable.index(ol)+1);
            }
            else
            next = focusable.eq(focusable.index(this)+1);
            
            if (next.length) {
                // next.hasClass('select2') ||
                if( next.hasClass('prbank'))
                    $(next).select2('open');
                else
                    next.focus();
                // console.log(next.focus());
            }
            return false;
        }
    });   
     
    $('body').on('keydown','.amountfocusinsizegro',function(e){
        var tr = $(this).parents('tr').index();
        if (e.keyCode == 13) {
            var answer = true; //confirm('Do you want to add new Row?')
            if(answer){
                $('#addsize').trigger('click');
                $('.adjustmentstablein').scrollLeft(0);
            }else{
                var lasttr = $('.adjustmentstablein tr:nth-last-child(2)').index();
                if( tr == lasttr)
                    $('.delv_load').focus();
                else{
                    $('.adjustmentstablein').scrollLeft(0);
                    setTimeout(function(){ $('.adjustmentstablein tr:nth-child('+ (tr+2) +')').find('.selectproductfocusin').focus(); }, 100);
                }
            }
        }
    })
    $('body').on('keydown','.amountfocus',function(e){
        var tr = $(this).parents('tr').index();
        if (e.keyCode == 13) {
            var answer = true; //confirm('Do you want to add new Row?')
            if(answer){
                $('#add').trigger('click');
                $('.adjustmentstable').scrollLeft(0);
            }else{
                var lasttr = $('.adjustmentstable tr:nth-last-child(2)').index();
                if( tr == lasttr)
                    $('.delv_load').focus();
                else{
                    $('.adjustmentstable').scrollLeft(0);
                    setTimeout(function(){ $('.adjustmentstable tr:nth-child('+ (tr+2) +')').find('.selectproductfocus').focus(); }, 100);
                }
            }
        }
    })
    ///fg input group
    $('body').on('keydown','.amountfocusin',function(e){
        var tr = $(this).parents('tr').index();
        if (e.keyCode == 13) {
            var answer = true; //confirm('Do you want to add new Row?')
            if(answer){
                $('#addin').trigger('click');
                $('.adjustmentstablein').scrollLeft(0);
                setTimeout(function(){ $('.adjustmentstablein tr:nth-child('+ (tr+2) +')').find('.selectproductfocusin').focus(); }, 100);
            }else{
                var lasttr = $('.adjustmentstablein tr:nth-last-child(2)').index();
                if( tr == lasttr)
                    $('.delv_load').focus();
                else{
                    $('.adjustmentstablein').scrollLeft(0);
                    setTimeout(function(){ $('.adjustmentstablein tr:nth-child('+ (tr+2) +')').find('.selectproductfocusin').focus(); }, 100);
                }
            }
        }
    })
///rohit
    $('body').on('keydown','.productplace + .select2-container',function(event){
        if(event.keyCode == 27){
            $(this).parents('tr').remove();
            calfg(0);
            $('.delv_load').focus();
            
            
        }
    })
    $('body').on('keydown','.amountfocusbullet',function(e){
        var tr = $(this).parents('tr').index();
        if (e.keyCode == 13) {
            var answer = true; //confirm('Do you want to add new Row?')
            if(answer){
                $('#bullet').trigger('click');
                $('.adjustmentstablebullet').scrollLeft(0);
            }else{
                var lasttr = $('.adjustmentstablebullet tr:nth-last-child(2)').index();
                if( tr == lasttr)
                    $('.delv_load').focus();
                else{
                    $('.adjustmentstablebullet').scrollLeft(0);
                    setTimeout(function(){ $('.adjustmentstablebullet tr:nth-child('+ (tr+2) +')').find('.selectproductfocus').focus(); }, 100);
                }
            }
        }
    })
    $('body').on('keydown','.amountaddportalmap',function(e){
        var tr = $(this).parents('tr').index();
        if (e.keyCode == 13) {
            var answer = true; //confirm('Do you want to add new Row?')
            if(answer){
                $('#onlinemapp').trigger('click');
                $('.adjustmentonlinemapping').scrollLeft(0);
            }else{
                var lasttr = $('.adjustmentonlinemapping tr:nth-last-child(2)').index();
                if( tr == lasttr)
                    $('.delv_load').focus();
                else{
                    $('.adjustmentonlinemapping').scrollLeft(0);
                    setTimeout(function(){ $('.adjustmentonlinemapping tr:nth-child('+ (tr+2) +')').find('.selectproductfocus').focus(); }, 100);
                }
            }
        }
    })
    $('body').on('keydown','.onfocusdebotor',function(e){
        var tr = $(this).parents('tr').index();
        if (e.keyCode == 13) {
            var answer = true; //confirm('Do you want to add new Row?')
            if(answer){
                $('#adddebitor').trigger('click');
                $('.adjustdebitoralias').scrollLeft(0);
            }else{
                var lasttr = $('.adjustdebitoralias tr:nth-last-child(2)').index();
                if( tr == lasttr)
                    $('.delv_load').focus();
                else{
                    $('.adjustdebitoralias').scrollLeft(0);
                    setTimeout(function(){ $('.adjustdebitoralias tr:nth-child('+ (tr+2) +')').find('.selectproductfocus').focus(); }, 100);
                }
            }
        }
    })
    
    ///fg input group
    $('body').on('keydown','.productplacein + .select2-container',function(event){
        if(event.keyCode == 27){
            $(this).parents('tr').remove();
            calccombo(0);
            $('.delv_load').focus();
            
            
        }
    })
    $('body').on('keydown','.removesizegrp',function(event){
        if(event.keyCode == 27){
            $(this).parents('tr').remove();
            $('.size_load').focus();
            getbomcalc(0);
        }
    })
    $('body').on('keydown','.reminput',function(event){
        if(event.keyCode == 27){
            $(this).parents('tr').remove();
            $('.delv_load').focus();
            getjwcalc(0);
        }
    })
    $('body').on('keydown','.reminputbullet',function(event){
        if(event.keyCode == 27){
            $(this).parents('tr').remove();
            $('.online_load').focus();
        }
    })
    $('body').on('keydown','.remionlinemap',function(event){
        if(event.keyCode == 27){
            $(this).parents('tr').remove();
            $('.ledger_load').focus();
        }
    })
    $('body').on('keydown','.remidebitor',function(event){
        if(event.keyCode == 27){
            $(this).parents('tr').remove();
            $('.delvload').focus();
        }
    })
    $(".save-form").click(function(ev){
        ev.preventDefault();  
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
            $.ajax({
                url:'/party/city_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                    // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "City",
                                text: "City Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                            }) 
                    }else{
                        swal({
                                title: "City",
                                text: "City Not Saved, Please Try Again",
                                icon: "error",
                                timer: 2000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })
    // $(".save-party").click(function(ev){
    //     ev.preventDefault();  
    //     if($(this).closest('form').valid()){
    //         var data = $(this).closest('form').serialize();
    //         $.ajax({
    //             url:'/customer11/customer_add',
    //             method:'POST',
    //             dataType: 'json',
    //             data:data,
    //             success: function(dat){
    //            alert(dat)
    //            alert(dat.success);
    //                 if(dat.success == true){
    //                     $('#addcity').modal('hide');
    //                     swal({
    //                             title: "Customer",
    //                             text: "Customer Saved",
    //                             icon: "success",
    //                             timer: 2000,
    //                             buttons: false
                             
    //                         }) 
    //                         window.location.href = "/customer11/customer_list";
    //                 }else{
    //                     swal({
    //                             title: "Customer",
    //                             text: "Duplicate customer with same city is not allowed",
    //                             icon: "error",
    //                             timer: 4000,
    //                             buttons: false
    //                         }) 
    //                 }
    //             }
    //         })
    //     }
    // })

    // $(".update-party").click(function(ev){
    //     //alert("p")
    //     ev.preventDefault();  
    //     if($(this).closest('form').valid()){
    //         var data = $(this).closest('form').serialize();
    //        var id = $("#vhpxcustomer").val();
    //      //   alert(id)
    //         $.ajax({
    //             url:'/customer11/customer_update_submit/'+id+'',
    //             method:'POST',
    //             dataType: 'json',
    //             data:data,
    //             success: function(dat){
    //           //     alert(dat)
    //            //  alert(dat.success);
    //                 if(dat.success == true){
    //                     $('#addcity').modal('hide');
    //                     swal({
    //                             title: "Customer",
    //                             text: "Customer Saved",
    //                             icon: "success",
    //                             timer: 2000,
    //                             buttons: false
                             
    //                         }) 
    //                         window.location.href = "/customer11/customer_list";
    //                 }else{
    //                     swal({
    //                             title: "Customer",
    //                             text: "Duplicate customer with same city is not allowed",
    //                             icon: "error",
    //                             timer: 4000,
    //                             buttons: false
    //                         }) 
    //                       //  window.location.href = "/customer/customer_list";
    //                 }
    //             }
    //         })
    //     }
    // })
    $(".lock_supplier").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          //  alert("data")
            var data = $(this).closest('form').serialize();
            //alert(data)
            $.ajax({
                url:'/supplier_mast/s_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert(dat)
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Supplier",
                                text: "Supplier Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/supplier_mast/supplier_mast";
                    }else{
                        swal({
                                title: "Supplier",
                                text: "Duplicate supplier with same city is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })


    // save customer
    $(".lock_customer").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          //  alert("data")
            var data = $(this).closest('form').serialize();
            //alert(data)
            $.ajax({
                url:'/customer11/customer_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert(dat)
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Customer",
                                text: "Customer Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/customer11/customer";
                    }else{
                        swal({
                                title: "Customer",
                                text: "Duplicate Customer with same city is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })

    //end save customer

   
    //add brand
    $(".lock_brand").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          //  alert("data")
            var data = $(this).closest('form').serialize();
            //alert(data)
            $.ajax({
                url:'/brand_mast/brand_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert(dat)
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Brand",
                                text: "Brand Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/brand_mast/brand_mast";
                    }else{
                        swal({
                                title: "Brand",
                                text: "Duplicate Brand is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })
    //end add brand

    // add model mast
    $(".lock_model").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          //  alert("data")
            var data = $(this).closest('form').serialize();
            //alert(data)
            $.ajax({
                url:'/model_mast/model_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert(dat)
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Model",
                                text: "Model Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/model_mast/model_mast";
                    }else{
                        swal({
                                title: "Model",
                                text: "Duplicate Model is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })
    //end model mast
    //add payment term
    $(".lock_payment").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          //  alert("data")
            var data = $(this).closest('form').serialize();
            //alert(data)
            $.ajax({
                url:'/payment_term_mast/payment_term_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert(dat)
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Payment Term",
                                text: "Payment Term Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }else{
                        swal({
                                title: "Payment Term",
                                text: "Duplicate Payment Term is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })
    //end add payment term
    // add subquality
    $(".lock_subquality").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          //  alert("data")
            var data = $(this).closest('form').serialize();
            //alert(data)
            $.ajax({
                url:'/sub_quality_mast/sub_quality_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert(dat)
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Sub Quality",
                                text: "Sub Quality Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/sub_quality_mast/sub_quality_mast";
                    }else{
                        swal({
                                title: "Sub Quality",
                                text: "Duplicate Sub Quality is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })
    // end add subquality


    $(".update-supplier").click(function(ev){
        //alert("p")
        ev.preventDefault();  
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
           var id = $("#vhpxsupplier").val();
         //   alert(id)
            $.ajax({
                url:'/supplier_mast/update/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //     alert(dat)
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Supplier",
                            text: "Supplier Updated",
                            icon: "success",
                            timer: 2000,
                            buttons: false
                             
                            }) 
                            window.location.href = "/supplier_mast/supplier_mast";
                    }else{
                        swal({
                            title: "Supplier",
                            text: "Duplicate supplier with same city is not allowed",
                            icon: "error",
                            timer: 4000,
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
    })


    $(".lock-account").click(function(ev){
        ev.preventDefault();
     

        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxaccount").val();
            
            if(id ==""|| id ==undefined){
                
            $.ajax({
                
                url:'/account_mast/amast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  //  alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Account",
                                text: "Account Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/account_mast/account_mast";
                    }else{
                        swal({
                                title: "Account",
                                text: "Duplicate account with same city is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/account_mast/edit_amast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Account",
                                text: "Account Entry Updated",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                            }) 
                            window.location.href = "/account_mast/account_mast";
                    }else{
                        swal({
                            title: "Account",
                            text: "Duplicate account with same city is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-transport").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxtransport").val();
          // alert("p"+id)
          if(id ==""|| id ==undefined){

            $.ajax({
                
                url:'/transport_mast/add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Transport",
                                text: "Transport Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/transport_mast/transport_mast";
                    }
                else{
                        swal({
                                title: "Transport",
                                text: "Duplicate transporter name with same city is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/transport_mast/edit_transport/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Transport",
                            text: "Transport Entry Updated",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/transport_mast/transport_mast";
                    }else{
                        swal({
                            title: "Transport",
                                text: "Duplicate transporter name with same city is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })


    $(".lock-transport").keydown(function(ev){
        ev.preventDefault();
    if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxtransport").val();
          // alert("p"+id)
          if(id ==""|| id ==undefined){

            $.ajax({
                
                url:'/transport_mast/add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Transport",
                                text: "Transport Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/transport_mast/transport_mast";
                    }
                else{
                        swal({
                                title: "Transport",
                                text: "Duplicate transporter name with same city is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/transport_mast/edit_transport/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Transport",
                            text: "Transport Entry Updated",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/transport_mast/transport_mast";
                    }else{
                        swal({
                            title: "Transport",
                                text: "Duplicate transporter name with same city is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })


    $(".lock-group").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxgroup").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
               $.ajax({
                
                url:'/group_mast/gmast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Group",
                                text: "Group Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/group_mast/group_mast";
                    }
                else{
                        swal({
                                title: "Group",
                                text: "Duplicate group name  is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/group_mast/edit_gmast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Group",
                            text: "Group Entry Updated",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/group_mast/group_mast";
                    }else{
                        swal({
                            title: "Group",
                            text: "Duplicate group name with same city is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-group").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxgroup").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
               $.ajax({
                
                url:'/group_mast/gmast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Group Master",
                                text: "Group Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/group_mast/group_mast";
                    }
                else{
                        swal({
                                title: "Group Master",
                                text: "Duplicate group name  is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/group_mast/edit_gmast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Group Master",
                            text: "Group Entry Updated",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/group_mast/group_mast";
                    }else{
                        swal({
                            title: "Group Master",
                            text: "Error in Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })




    $(".lock-transaction").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxtransac").val();
            //
            // alert("p"+id)
            if(id ==""|| id ==undefined){
               $.ajax({
                
                url:'/trans_mast/tm_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Transaction Master",
                                text: "Transaction Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/trans_mast/trans_mast";
                    }
                else{
                        swal({
                                title: "Transaction Master",
                                text: "Duplicate transaction entry  is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/trans_mast/edit_tm/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
            //   alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Transaction Master",
                            text: "Transaction Entry Updated",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/trans_mast/trans_mast";
                    }else{
                        swal({
                            title: "Transaction Master",
                            text: "Duplicate transaction entry  is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })


    $(".lock-finishgoods").on('keydown',function(ev){
        ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            console.log(data);
            $.ajax({
                url:'/product_mast/product_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Finish Goods Master",
                                text: "Finish Goods Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/product_mast/add_product";
                    }
                    else{
                        swal({
                                title: "Finish Goods Master",
                                text: "Duplicate Finish Goods  with same name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
           
            })
        }
        }
    })
    $(".lock-product").click(function(ev){
        ev.preventDefault();
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
            console.log(data);
            $.ajax({
                url:'/product_mast/product_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Finish Goods Master",
                                text: "Finish Goods Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                            }) 
                            window.location.href = "/product_mast/add_product";
                    }
                    else{
                        swal({
                                title: "Finish Goods Master",
                                text: "Duplicate Finish Goods  with same name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                        }
                    }
                })
            }
        })

    $(".lock-productraw").click(function(ev){
        ev.preventDefault();
        
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            console.log(data);
            $.ajax({
                url:'/product_raw_master/product_raw_master_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Product Raw Master",
                                text: "Product Raw Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/product_raw_master/product_raw_master_add";
                    }
                    else{
                        swal({
                                title: "Product Raw Master",
                                text: "Duplicate Product  with same name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
           
            })
        }
        
    })

    //work master
    $(".lock-workadd").click(function(ev){
        ev.preventDefault();
        
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            console.log(data);
            $.ajax({
                url:'/work_master/work_master_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Work Master",
                                text: "Work Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/work_master/work_master_add";
                    }
                    else{
                        swal({
                                title: "Work Master",
                                text: "Duplicate Work  with same name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
           
            })
        }
        
    })

    // end work master

    //job master
  
    $(".lock-product1").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
           alert(id)
            $.ajax({
                url:'/product_master/edit_product_master/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Product Master",
                               text: "Product Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/product_master/product_master";
                   }
               else{
                       swal({
                               title: "Product Master",
                               text: "Duplicate Product  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    })
   

    //end edit product master

    $(".lock-inquiry1").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          //  alert(id)
            $.ajax({
                url:'/inquiry_master/edit_inquiry_master/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Inquiry Master",
                               text: "Inquiry Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/inquiry_master/inquiry_master";
                   }
               else{
                       swal({
                               title: "Inquiry Master",
                               text: "Duplicate Inquiry  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    })
   
    //end edit inquiry master
   
    //edit complaint master
    $(".lock-complaint1").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          //  alert(id)
            $.ajax({
                url:'/complaint_master/edit_complaint_master/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Complaint Master",
                               text: "Complaint Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/complaint_master/complaint_master";
                   }
               else{
                       swal({
                               title: "Complaint Master",
                               text: "Duplicate Complaint  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    })
   

    //end edit complaint master


    // $(".lock-inquiry").click(function(ev){
    //     ev.preventDefault();
     
    //     if($(this).closest('form').valid()){
          
    //         var data = $(this).closest('form').serialize();
    //         var id = $("#vhpxproduct").val();
    //       //  alert(id)
    //         $.ajax({
    //             url:'/inquiry_master/edit_inquiry_master/'+id+'',  
    //             method:'POST',
    //             dataType: 'json',
    //             data:data,
    //            success: function(dat){
    //           //  alert("data")
    //           // alert(dat.success);
    //                if(dat.success == true){
    //                    $('#addcity').modal('hide');
    //                    swal({
    //                            title: "Inquiry Master",
    //                            text: "Inquiry Updated",
    //                            icon: "success",
    //                            timer: 4000,
    //                            buttons: false
                            
    //                        }) 
    //                        window.location.href = "/inquiry_master/inquiry_master";
    //                }
    //            else{
    //                    swal({
    //                            title: "Inquiry Master",
    //                            text: "Duplicate Inquiry  with same name is not allowed",
    //                            icon: "error",
    //                            timer: 4000,
    //                            buttons: false
    //                        }) 
    //                }
    //            }
          
    //        })
           
    //     }
    // })
    //end edit inquiry master

    // add product
    $(".lock-productadd").click(function(ev){
        ev.preventDefault();
        
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            console.log(data);
            $.ajax({
                url:'/product_master/product_master_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Product Master",
                                text: "Product Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/Product_master/Product_master";
                    }
                    else{
                        swal({
                                title: "Product Master",
                                text: "Duplicate Product  with same name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
           
            })
        }
        
    })

    //end add product

    //inquiry add
    $(".lock-inquiryadd").click(function(ev){
        ev.preventDefault();
        
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            console.log(data);
            $.ajax({
                url:'/inquiry_master/inquiry_master',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Inquiry Master",
                                text: "Inquiry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/inquiry_master/inquiry_master";
                    }
                    else{
                        swal({
                                title: "Inquiry Master",
                                text: "Duplicate Inquiry  with same name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
           
            })
        }
        
    })

    //end inquiry add

    //add complaint
    $(".lock-complaintadd").click(function(ev){
        ev.preventDefault();
        
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            console.log(data);
            $.ajax({
                url:'/complaint_master/complaint_master',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Complaint Master",
                                text: "Complaint Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/complaint_master/complaint_master";
                    }
                    else{
                        swal({
                                title: "Complaint Master",
                                text: "Duplicate Complaint  with same name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
           
            })
        }
        
    })

    //end add complaint



    $(".lock-upproduct").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          //  alert(id)
            $.ajax({
                url:'/product_mast/edit_product_mast/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Finish Goods Master",
                               text: "Finish Goods Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/product_mast/product_mast";
                   }
               else{
                       swal({
                               title: "Finish Goods Master",
                               text: "Duplicate Finish Goods  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    })
    
    $(".lock-upproduct").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          //  alert(id)
            $.ajax({
                url:'/product_mast/edit_product_mast/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Finish Goods Master",
                               text: "Finish Goods Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/product_mast/product_mast";
                   }
               else{
                       swal({
                               title: "Finish Goods Master",
                               text: "Duplicate Finish Goods  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    }
    })

    $(".lock-complaint").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          //  alert(id)
            $.ajax({
                url:'/complaint_master/edit_complaint_master/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Complaint Master Master",
                               text: "Complaint Master Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/complaint_master/complaint_master";
                   }
               else{
                       swal({
                               title: "Complaint Master",
                               text: "Duplicate Finish Goods  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    }
    })



    $(".lock-upproduct1").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          //  alert(id)
            $.ajax({
                url:'/product_raw_master/edit_product_raw_master/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "product Raw Master",
                               text: "product Raw Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/product_raw_master/product_raw_master";
                   }
               else{
                       swal({
                               title: "Product Raw Master",
                               text: "Duplicate Product Raw  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    })
    
// edit workmaster
$(".lock-work").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxproduct").val();
      //  alert(id)
        $.ajax({
            url:'/work_master/edit_work_master/'+id+'',  
            method:'POST',
            dataType: 'json',
            data:data,
           success: function(dat){
          //  alert("data")
          // alert(dat.success);
               if(dat.success == true){
                   $('#addcity').modal('hide');
                   swal({
                           title: "Work Master",
                           text: "Work Updated",
                           icon: "success",
                           timer: 4000,
                           buttons: false
                        
                       }) 
                       window.location.href = "/work_master/work_master";
               }
           else{
                   swal({
                           title: "Work Master",
                           text: "Duplicate Work  with same name is not allowed",
                           icon: "error",
                           timer: 4000,
                           buttons: false
                       }) 
               }
           }
      
       })
       
    }
})

//end edit workmaster

    //edit job master
    $(".lock-job").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          //  alert(id)
            $.ajax({
                url:'/job_master/edit_job_master/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Job Master",
                               text: "Job Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/job_master/job_master";
                   }
               else{
                       swal({
                               title: "Job Master",
                               text: "Duplicate Job  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    })
    
    //end edit job master



    $(".lock-upproduct").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          //  alert(id)
            $.ajax({
                url:'/product_mast/edit_product_mast/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:data,
               success: function(dat){
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Finish Goods Master",
                               text: "Finish Goods Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/product_mast/product_mast";
                   }
               else{
                       swal({
                               title: "Finish Goods Master",
                               text: "Duplicate Finish Goods  with same name is not allowed",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        }
    }
    })

    $(".lock-product").click(function(ev){
        ev.preventDefault();
        
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            console.log(data);
            $.ajax({
                url:'/product_raw_master/product_raw_master_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Finish Goods Master",
                                text: "Finish Goods Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/product_raw_master/product_raw_master_add";
                    }
                    else{
                        swal({
                                title: "Finish Goods Master",
                                text: "Duplicate Finish Goods  with same name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
           
            })
        }
        
    })

    $(".update-gsetup").on("click",function(ev){
        // ev.preventDefault();
        var id = $("#group_id").val();
        
        // if($(this).closest('form').valid()){
        var group = $("#group").val();
        var garry = $("#garry").val();
            // var data = $(this).closest('form').serialize();
            console.log(group)
            console.log(garry)
            var id = $("#group_id").val();
            // alert(id)
            $.ajax({
                url:'/group_setup_mast/group_setup_mast_update/'+id+'',  
                method:'POST',
                dataType: 'json',
                data:{group, garry},
               success: function(dat){
                   console.log(dat)
              //  alert("data")
              // alert(dat.success);
                   if(dat.success == true){
                       $('#addcity').modal('hide');
                       swal({
                               title: "Group Setup Master",
                               text: "Group Setup Updated",
                               icon: "success",
                               timer: 4000,
                               buttons: false
                            
                           }) 
                           window.location.href = "/group_setup_mast/group_setup_mast";
                   }
               else{
                       swal({
                               title: "Group Setup Master",
                               text: "Error in Update",
                               icon: "error",
                               timer: 4000,
                               buttons: false
                           }) 
                   }
               }
          
           })
           
        // }
   
    })

    $(".lock-skumaster").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxskuunit").val();
           //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/stock_unit_mast/StockUnit_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "SKU Master",
                                text: "SKU Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/stock_unit_mast/stock_unit_mast";
                    }
                else{
                        swal({
                                title: "SKU Master",
                                text: "Duplicate unit name with same symbol is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/stock_unit_mast/su_update/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                 //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "SKU Master",
                            text: "SKU Entry Upadate Succesfull",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/stock_unit_mast/stock_unit_mast";
                    }else{
                        swal({
                            title: "SKU Master",
                            text: "Error In Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-skumaster").on("keydown",function(ev){
        // ev.preventDefault();
       if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxskuunit").val();
           //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/stock_unit_mast/StockUnit_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "SKU Master",
                                text: "SKU Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/stock_unit_mast/stock_unit_mast";
                    }
                else{
                        swal({
                                title: "SKU Master",
                                text: "Duplicate unit name with same symbol is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/stock_unit_mast/su_update/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                 //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "SKU Master",
                            text: "SKU Entry Upadate Succesfull",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/stock_unit_mast/stock_unit_mast";
                    }else{
                        swal({
                            title: "SKU Master",
                            text: "Error In Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })


    //category add
    $(".lock-category1").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxskuunit").val();
           //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/category_mast/category_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Category Master",
                                text: "Category Master Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/category_mast/category_mast";
                    }
                else{
                        swal({
                                title: "Category Master",
                                text: "Duplicate Category name with same symbol is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/category_mast/edit_category_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                 //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Category Master",
                            text: "Category Upadate Succesfull",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/category_mast/category_mast";
                    }else{
                        swal({
                            title: "Category Master",
                            text: "Error In Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-category1").on("keydown",function(ev){
        // ev.preventDefault();
       if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxskuunit").val();
           //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/category_mast/category_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Category Master",
                                text: "Category Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/category_mast/category_mast";
                    }
                else{
                        swal({
                                title: "Category Master",
                                text: "Duplicate Category name with same symbol is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/category_mast/edit_category_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                 //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Category Master",
                            text: "Category Entry Upadate Succesfull",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/category_mast/category_mast";
                    }else{
                        swal({
                            title: "Category Master",
                            text: "Error In Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })
    //end category add

    //add payment term
    $(".lock-payment1").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxskuunit").val();
           //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/payment_term_mast/payment_term_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Payment Term Master",
                                text: "Payment Term Master Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }
                else{
                        swal({
                                title: "Payment Term Master",
                                text: "Duplicate Payment Term name with same symbol is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/payment_term_mast/edit_payment_term_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                 //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Payment Term Master",
                            text: "Payment Term Upadate Succesfull",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }else{
                        swal({
                            title: "Payment Term Master",
                            text: "Error In Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-payment1").on("keydown",function(ev){
        // ev.preventDefault();
       if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxskuunit").val();
           //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/payment_term_mast/payment_term_mast',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Payment Term Master",
                                text: "Payment Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }
                else{
                        swal({
                                title: "Payment Term Master",
                                text: "Duplicate Payment Term name with same symbol is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/payment_term_mast/edit_payment_term_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                 //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Payment Term Master",
                            text: "Payment Term Entry Upadate Succesfull",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }else{
                        swal({
                            title: "Payment Term Master",
                            text: "Error In Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })
    //end add payment term

      //ADD SUB QUALITY MAST
    //   $(".lock_subquality1").click(function(ev){
    //     ev.preventDefault();
     
    //     if($(this).closest('form').valid()){
          
    //         var data = $(this).closest('form').serialize();
    //         var id = $("#vhpxskuunit").val();
    //        //alert("p"+id)
    //        if(id ==""|| id ==undefined){
    //          $.ajax({
                
    //             url:'/sub_quality_mast/sub_quality_mast_add',
    //             method:'POST',
    //             dataType: 'json',
    //             data:data,
    //             success: function(dat){
    //             //    alert("data")
    //            //  alert(dat.success);
    //                 if(dat.success == true){
    //                     $('#addcity').modal('hide');
    //                     swal({
    //                             title: "Sub Quality Master",
    //                             text: "Sub Quality Master Saved",
    //                             icon: "success",
    //                             timer: 4000,
    //                             buttons: false
                             
    //                         }) 
    //                         window.location.href = "/sub_quality_mast/sub_quality_mast";
    //                 }
    //             else{
    //                     swal({
    //                             title: "Sub Quality Master",
    //                             text: "Duplicate Sub Quality name with same symbol is not allowed",
    //                             icon: "error",
    //                             timer: 4000,
    //                             buttons: false
    //                         }) 
    //                 }
    //             }
    //         })
    //     }else{
    //         $.ajax({
    //             url:'/sub_quality_mast/edit_sub_quality_mast/'+id+'',
    //             method:'POST',
    //             dataType: 'json',
    //             data:data,
                
    //             success: function(dat){
    //                 // console.log(data);
    //               alert("updata")
    //            //  alert(dat.success);
    //                 if(dat.success == true){
    //                     $('#addcity').modal('hide');
    //                     swal({
    //                         title: "Sub Quality Master",
    //                         text: "Sub Quality Upadate Succesfull",
    //                         icon: "success",
    //                         timer: 4000,
    //                         buttons: false
    //                         }) 
    //                         window.location.href = "/sub_quality_mast/sub_quality_mast";
    //                 }else{
    //                     swal({
    //                         title: "Sub Quality Master",
    //                         text: "Error In Update",
    //                         icon: "error",
    //                         timer: 4000,
    //                         buttons: false
    //                         }) 
    //                       //  window.location.href = "/customer/customer_list";
    //                 }
    //             }
    //         })
    //     }
    //     }
    // })
    // $(".lock_subquality1").on("keydown",function(ev){
    //     // ev.preventDefault();
    //    if(ev.keyCode == 13){
    //     if($(this).closest('form').valid()){
          
    //         var data = $(this).closest('form').serialize();
    //         var id = $("#vhpxskuunit").val();
    //        //alert("p"+id)
    //        if(id ==""|| id ==undefined){
    //          $.ajax({
                
    //             url:'/sub_quality_mast/sub_quality_mast',
    //             method:'POST',
    //             dataType: 'json',
    //             data:data,
    //             success: function(dat){
    //           //      alert("data")
    //            //  alert(dat.success);
    //                 if(dat.success == true){
    //                     $('#addcity').modal('hide');
    //                     swal({
    //                             title: "Sub Quality Master",
    //                             text: "Sub Quality Entry Saved",
    //                             icon: "success",
    //                             timer: 4000,
    //                             buttons: false
                             
    //                         }) 
    //                         window.location.href = "/sub_quality_mast/sub_quality_mast";
    //                 }
    //             else{
    //                     swal({
    //                             title: "Sub Quality Master",
    //                             text: "Duplicate Sub Quality Term name with same symbol is not allowed",
    //                             icon: "error",
    //                             timer: 4000,
    //                             buttons: false
    //                         }) 
    //                 }
    //             }
    //         })
    //     }else{
    //         $.ajax({
    //             url:'/sub_quality_mast/edit_sub_quality_mast/'+id+'',
    //             method:'POST',
    //             dataType: 'json',
    //             data:data,
    //             success: function(dat){
    //              //  alert("updata")
    //            //  alert(dat.success);
    //                 if(dat.success == true){
    //                     $('#addcity').modal('hide');
    //                     swal({
    //                         title: "Sub Quality Master",
    //                         text: "Sub Quality Entry Upadate Succesfull",
    //                         icon: "success",
    //                         timer: 4000,
    //                         buttons: false
    //                         }) 
    //                         window.location.href = "/sub_quality_mast/sub_quality_mast";
    //                 }else{
    //                     swal({
    //                         title: "Sub Quality Master",
    //                         text: "Error In Update",
    //                         icon: "error",
    //                         timer: 4000,
    //                         buttons: false
    //                         }) 
    //                       //  window.location.href = "/customer/customer_list";
    //                 }
    //             }
    //         })
    //     }
    //     }
    // }
    // })
    
    //END ADD SUB QUALITY MAST

    //add raw mat sub type mast
    $(".lock-rmatsubtyp").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxskuunit").val();
           //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Raw Mat Type Master",
                                text: "Raw Mat Type Master Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast";
                    }
                else{
                        swal({
                                title: "Raw Mat Type Master",
                                text: "Duplicate Raw Mat Type name with same symbol is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/raw_mat_sub_typ_mast/edit_raw_sub/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                 //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Raw Mat Type Master",
                            text: "Raw Mat Type Upadate Succesfull",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast";
                    }else{
                        swal({
                            title: "Raw Mat Type Master",
                            text: "Error In Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-rmatsubtyp").on("keydown",function(ev){
        // ev.preventDefault();
       if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxskuunit").val();
           //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Raw Mat Type Master",
                                text: "Raw Mat Type Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast";
                    }
                else{
                        swal({
                                title: "Raw Mat Type Master",
                                text: "Duplicate Raw Mat Type Term name with same symbol is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/raw_mat_sub_typ_mast/edit_raw_sub/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                 //  alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Raw Mat Type Master",
                            text: "Raw Mat Type Entry Upadate Succesfull",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast";
                    }else{
                        swal({
                            title: "Raw Mat Type Master",
                            text: "Error In Update",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })
    //end add raw mat sub type mast

    $(".lock-city").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcity").val();
          //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/add_city/city_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "City Master",
                                text: "City Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/add_city/add_city";
                    }
                else{
                        swal({
                                title: "City Master",
                                text: "Duplicate city name  is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/add_city/edit_city/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //   alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "City Master",
                            text: "City Successfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/add_city/add_city";
                    }else{
                        swal({
                            title: "City Master",
                                text: "Error In Update",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-city").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcity").val();
          //alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/add_city/city_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  // alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "City Master",
                                text: "City Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/add_city/add_city";
                    }
                else{
                        swal({
                                title: "City Master",
                                text: "Duplicate city name  is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/add_city/edit_city/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //   alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "City Master",
                            text: "City Successfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/add_city/add_city";
                    }else{
                        swal({
                            title: "City Master",
                                text: "Error In Update",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })



    $(".lock-state").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxstate").val();
        //  alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/state_master/state_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
             //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "State Master",
                                text: "State Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/state_master/state_master";
                    }
                else{
                        swal({
                                title: "State Master",
                                text: "Duplicate state name with same country is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/state_master/edit_state/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
            //   alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "State Master",
                                text: "State Succefully Update",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                            }) 
                            window.location.href = "/state_master/state_master";
                    }else{
                        swal({
                            title: "State Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-state").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxstate").val();
        //  alert("p"+id)
           if(id ==""|| id ==undefined){
             $.ajax({
                
                url:'/state_master/state_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
             //   alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "State Master",
                                text: "State Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/state_master/state_master";
                    }
                else{
                        swal({
                                title: "State Master",
                                text: "Duplicate state name with same country is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/state_master/edit_state/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
            //   alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "State Master",
                                text: "State Update SuccesFully",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                            }) 
                            window.location.href = "/state_master/state_master";
                    }else{
                        swal({
                            title: "State Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    $(".lock-country").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/district_mast/district_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Distrct Master",
                                text: "Distrct Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/district_mast/district_mast";
                    }
                else{
                        swal({
                                title: "Distrct Master",
                                text: "Duplicate Distrct name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/district_mast/edit_district/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Distrct Master",
                            text: "Distrct Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/district_mast/district_mast";
                    }else{
                        swal({
                            title: "Distrct Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-country").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/district_mast/district_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Distrct Master",
                                text: "Distrct Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/district_mast/district_mast";
                    }
                else{
                        swal({
                                title: "Distrct Master",
                                text: "Duplicate Distrct name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/district_mast/edit_district/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Distrct Master",
                            text: "Distrct Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/district_mast/district_mast";
                    }else{
                        swal({
                            title: "Distrct Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })
    $(".lock-country1").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/employee_mast/employee_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Employee Master",
                                text: "Employee Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/employee_mast/employee_mast";
                    }
                else{
                        swal({
                                title: "Employee Master",
                                text: "Duplicate Employee name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/employee_mast/edit_employee_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("updata")
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Employee Master",
                            text: "Employee Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/employee_mast/employee_mast";
                    }else{
                        swal({
                            title: "Employee Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })
    $(".lock-country1").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/employee_mast/employee_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Employee Master",
                                text: "Employee Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/employee_mast/employee_mast";
                    }
                else{
                        swal({
                                title: "Employee Master",
                                text: "Duplicate Employee name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/employee_mast/edit_employee_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Employee Master",
                            text: "Employee Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/employee_mast/employee_mast";
                    }else{
                        swal({
                            title: "Employee Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })


    //subqulaity_master
    $(".subquality").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/sub_quality_mast/sub_quality_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Sub Quality Master",
                                text: "Sub Quality Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/sub_quality_mast/sub_quality_mast";
                    }
                else{
                        swal({
                                title: "Sub Quality Master",
                                text: "Duplicate Sub Quality name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/sub_quality_mast/edit_sub_quality_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Sub Quality Master",
                            text: "Sub Quality Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/sub_quality_mast/sub_quality_mast";
                    }else{
                        swal({
                            title: "Sub Quality Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".subquality").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/sub_quality_mast/sub_quality_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Sub Quality Master",
                                text: "Sub Quality Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/sub_quality_mast/sub_quality_mast";
                    }
                else{
                        swal({
                                title: "Sub Quality Master",
                                text: "Duplicate Sub Quality name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/sub_quality_mast/edit_sub_quality_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Sub Quality Master",
                            text: "Sub Quality Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/sub_quality_mast/sub_quality_mast";
                    }else{
                        swal({
                            title: "Sub Quality Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end subquality_master

    //product master

    $(".lock-productadd1").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
        //   alert("p"+id)
        // alert(vhpxproduct);
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/product_master/product_master_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Product Master",
                                text: "Product Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/product_master/product_master";
                    }
                else{
                        swal({
                                title: "Product Master",
                                text: "Duplicate Product name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/product_master/edit_product_master/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        // alert(aa)
                        $('#addcity').modal('hide');
                        swal({
                            title: "Product Master",
                            text: "Product Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/product_master/product_master";
                    }else{
                        // console.log(dat.errors)
                        swal({
                            title: "Product Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".lock-productadd1").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/product_master/product_master_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Product Master",
                                text: "Product Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/product_master/product_master";
                    }
                else{
                        swal({
                                title: "Product Master",
                                text: "Duplicate Product name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/product_master/edit_product_master/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Product Master",
                            text: "Product Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/product_master/product_master";
                    }else{
                        swal({
                            title: "Product Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end product master

    //job allotment
    $(".lock-joballotment").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
        //   alert("p"+id)
        // alert(vhpxproduct);
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/job_allotment/job_allotment_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Job Allotment",
                                text: "Job Allotment Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/job_allotment/job_allotment";
                    }
                else{
                        swal({
                                title: "Job Allotment",
                                text: "Duplicate Job Allotment is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/job_allotment/edit_job_allotment/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Job Allotment",
                            text: "Job Allotment Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/job_allotment/job_allotment";
                    }else{
                        swal({
                            title: "Job Allotment",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".lock-joballotment").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/job_allotment/job_allotment_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Job Allotment",
                                text: "Job Allotment Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/job_allotment/job_allotment";
                    }
                else{
                        swal({
                                title: "Job Allotment",
                                text: "Duplicate Job Allotment is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/job_allotment/edit_job_allotment/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Job Allotment",
                            text: "Job Allotment Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/job_allotment/job_allotment";
                    }else{
                        swal({
                            title: "Job Allotment",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end job allotment

    //project entry
    $(".lock-projectentry").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
        //   alert("p"+id)
        // alert(vhpxproduct);
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/project_entry/project_entry_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Project Entry",
                                text: "Project Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/project_entry/project_entry_add";
                    }
                else{
                        swal({
                                title: "Project Entry",
                                text: "Duplicate Project Entry is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/project_entry/edit_project_entry/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                   alert("updata")
                   console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Project Entry",
                            text: "Project Entry Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/project_entry/project_entry";
                    }else{
                        swal({
                            title: "Project Entry",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".lock-projectentry").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxproduct").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/project_entry/project_entry_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Project Entry",
                                text: "Project Entry Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/project_entry/project_entry_add";
                    }
                else{
                        swal({
                                title: "Project Entry",
                                text: "Duplicate Project Entry is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/project_entry/edit_project_entry/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Project Entry",
                            text: "Project Entry Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/project_entry/project_entry";
                    }else{
                        swal({
                            title: "Project Entry",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end project entry


    //party type master

    $(".partytype").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/party_type_mast/ptype_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Party Type Master",
                                text: "Party Type Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/party_type_mast/party_type_mast";
                    }
                else{
                        swal({
                                title: "Party Type Master",
                                text: "Duplicate Party Type name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/party_type_mast/edit_ptype_mat/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Party Type Master",
                            text: "Party Type Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/party_type_mast/party_type_mast";
                    }else{
                        swal({
                            title: "Party Type Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".partytype").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/party_type_mast/ptype_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Party Type Master",
                                text: "Party Type Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/party_type_mast/party_type_mast";
                    }
                else{
                        swal({
                                title: "Party Type Master",
                                text: "Duplicate Party Type name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/party_type_mast/edit_ptype_mat/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Party Type Master",
                            text: "Party Type Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/party_type_mast/party_type_mast";
                    }else{
                        swal({
                            title: "Party Type Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end party type master

    //designation agency master

    $(".lock_agency").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/designation_agency_mast/designation_agency_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Designation Agency Master",
                                text: "Designation Agency Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/designation_agency_mast/designation_agency_mast";
                    }
                else{
                        swal({
                                title: "Designation AgencyMaster",
                                text: "Duplicate Designation Agency name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/designation_agency_mast/edit_designation_agency_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Designation Agency Master",
                            text: "Designation Agency Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/designation_agency_mast/designation_agency_mast";
                    }else{
                        swal({
                            title: "Designation Agency Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".lock_agency").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/designation_agency_mast/designation_agency_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Designation Agency Master",
                                text: "Designation Agency Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/designation_agency_mast/designation_agency_mast";
                    }
                else{
                        swal({
                                title: "Designation Agency Master",
                                text: "Duplicate Designation Agency name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/designation_agency_mast/edit_designation_agency_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Designation Agency Master",
                            text: "Designation Agency Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/designation_agency_mast/designation_agency_mast";
                    }else{
                        swal({
                            title: "Designation Agency Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end designation agency master


    //job master

    $(".lock-jobadd").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/job_master/job_master',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Job Master",
                                text: "Job Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/job_master/job_master";
                    }
                else{
                        swal({
                                title: "Job Master",
                                text: "Duplicate Job name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/job_master/edit_job_master/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Job Master",
                            text: "Job Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/edit_job_master/edit_job_master";
                    }else{
                        swal({
                            title: "Job Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".lock-jobadd").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/job_master/job_master',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Job Master",
                                text: "Job Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/job_master/job_master";
                    }
                else{
                        swal({
                                title: "Job Master",
                                text: "Duplicate Job name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/job_master/edit_job_master/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Job Master",
                            text: "Job Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/job_master/job_master";
                    }else{
                        swal({
                            title: "Job Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end job master

    //Quality master
    $(".lock_quality").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/quality_mast/quality_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Quality Master",
                                text: "Quality Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/quality_mast/quality_mast";
                    }
                else{
                        swal({
                                title: "Quality Master",
                                text: "Duplicate Quality name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/quality_mast/edit_quality_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Quality Master",
                            text: "Quality Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/quality_mast/quality_mast";
                    }else{
                        swal({
                            title: "Quality Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".lock_quality").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/quality_mast/quality_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Quality Master",
                                text: "Quality Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/quality_mast/quality_mast";
                    }
                else{
                        swal({
                                title: "Quality Master",
                                text: "Duplicate Quality name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/quality_mast/edit_quality_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Quality Master",
                            text: "Quality Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/quality_mast/quality_mast";
                    }else{
                        swal({
                            title: "Quality Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end quality master


    // raw mat sub type master

    $(".lock_rmatsubtyp").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Raw Mat Sub Type Master",
                                text: "Raw Mat Sub Type Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast";
                    }
                else{
                        swal({
                                title: "Raw Mat Sub Type Master",
                                text: "Duplicate Raw Mat Sub Type name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/raw_mat_sub_typ_mast/edit_raw_sub/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Raw Mat Sub Type Master",
                            text: "Raw Mat Sub Type Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast";
                    }else{
                        swal({
                            title: "Raw Mat Sub Type Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".lock_rmatsubtyp").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Raw Mat Sub Type Master",
                                text: "Raw Mat Sub Type Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast";
                    }
                else{
                        swal({
                                title: "Raw Mat Sub Type Master",
                                text: "Duplicate Raw Mat Sub Type name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/raw_mat_sub_typ_mast/edit_raw_sub/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Raw Mat Sub Type Master",
                            text: "Raw Mat Sub Type Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast";
                    }else{
                        swal({
                            title: "Raw Mat Sub Type Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    // end raw mat sub type master


    //category master

    $(".lock_category").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/category_mast/category_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
               
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Category Master",
                                text: "Category Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/category_mast/category_mast";
                    }
                else{
                        swal({
                                title: "Category Master",
                                text: "Duplicate Category name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/category_mast/edit_category_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
               
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Category Master",
                            text: "Category Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/category_mast/category_mast";
                    }else{
                        swal({
                            title: "Category Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".lock_category").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/category_mast/category_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Category Master",
                                text: "Category Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/category_mast/category_mast";
                    }
                else{
                        swal({
                                title: "Category Master",
                                text: "Duplicate Category name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/category_mast/edit_category_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                  
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Category Master",
                            text: "Category Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/category_mast/category_mast";
                    }else{
                        swal({
                            title: "Category Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })

    //end category master


    // payment term master

    $(".paymentterm").click(function(ev){
        ev.preventDefault();
     
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
        //   alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/payment_term_mast/payment_term_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                //    alert("data")
                // alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Payment Term Master",
                                text: "Payment Term Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }
                else{
                        swal({
                                title: "Payment Term Master",
                                text: "Duplicate Payment Term name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/payment_term_mast/edit_payment_term_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                
                success: function(dat){
                //    alert("updata")
                //    console.log(data);
                // alert(data);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Payment Term Master",
                            text: "Payment Term Succesfully Update",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }else{
                        swal({
                            title: "Payment Term Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    })

    

    $(".paymentterm").on("keydown",function(ev){
        // ev.preventDefault();
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
          
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxcountry").val();
          // alert("p"+id)
           if(id ==""|| id ==undefined){
            $.ajax({
                
                url:'/payment_term_mast/payment_term_mast_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
              //      alert("data")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Payment Term Master",
                                text: "Payment Term Saved",
                                icon: "success",
                                timer: 4000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }
                else{
                        swal({
                                title: "Payment Term Master",
                                text: "Duplicate Payment Term name is not allowed",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }else{
            $.ajax({
                url:'/payment_term_mast/edit_payment_term_mast/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                   //alert("updata")
               //  alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                            title: "Payment Term Master",
                            text: "Payment Term Update Succesfully",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                            }) 
                            window.location.href = "/payment_term_mast/payment_term_mast";
                    }else{
                        swal({
                            title: "Payment Term Master",
                            text: "Error",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                            }) 
                          //  window.location.href = "/customer/customer_list";
                    }
                }
            })
        }
        }
    }
    })
    // end payment term master




    $(".save-journal").click(function(ev){
        ev.preventDefault();  
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
            $.ajax({
                url:'/journal_entry/add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
               // alert(dat)
               //alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Journal",
                                text: "Journal Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/journal_entry/journal_entry_list";
                    }else{
                        swal({
                                title: "Journal",
                                text: "Total Debit amount and Credit amount should be same",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })
    $(".save-journal").on('keydown',function(ev){
        if(ev.keyCode == 13){
        // ev.preventDefault();  
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
            $.ajax({
                url:'/journal_entry/add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
               // alert(dat)
               //alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Journal",
                                text: "Journal Saved",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/journal_entry/journal_entry_list";
                    }else{
                        swal({
                                title: "Journal",
                                text: "Total Debit amount and Credit amount should be same",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    }
    })

    $(".update-journal").click(function(ev){
        ev.preventDefault();  
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxjournal").val();
           // alert("p"+id)
            $.ajax({
                url:'/journal_entry/update/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
               // alert(dat)
               //alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Journal",
                                text: "Journal Entry Updated",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/journal_entry/journal_entry_list";
                    }else{
                        swal({
                                title: "Journal",
                                text: "Total Debit amount and Credit amount should be same",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
    })
    $(".update-journal").on('keydown',function(ev){
        // ev.preventDefault();  
        if(ev.keyCode == 13){
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
            var id = $("#vhpxjournal").val();
           // alert("p"+id)
            $.ajax({
                url:'/journal_entry/update/'+id+'',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
               // alert(dat)
               //alert(dat.success);
                    if(dat.success == true){
                        $('#addcity').modal('hide');
                        swal({
                                title: "Journal",
                                text: "Journal Entry Updated",
                                icon: "success",
                                timer: 2000,
                                buttons: false
                             
                            }) 
                            window.location.href = "/journal_entry/journal_entry_list";
                    }else{
                        swal({
                                title: "Journal",
                                text: "Total Debit amount and Credit amount should be same",
                                icon: "error",
                                timer: 4000,
                                buttons: false
                            }) 
                    }
                }
            })
        }
        }
    })
    // add customer

    $(".save-customer").click(function(ev){
        ev.preventDefault();  
        if($(this).closest('form').valid()){
            var data = $(this).closest('form').serialize();
            $.ajax({
                url:'/customer11/customer_add',
                method:'POST',
                dataType: 'json',
                data:data,
                success: function(dat){
                    // alert(dat.success);
                    if(dat.success == true){
                        // $('#addparty').modal('hide');
                        // swal({
                        //     title: "Party",
                        //     text: "Party Saved",
                        //     icon: "success",
                        //     timer: 2000,
                        //     buttons: false
                        //     }) 
                    }else if(dat.success=="city_name"){
                        swal({
                            title: "Customer",
                            text: "Customer Name And City Name Allready Exits",
                            icon: "error",
                            timer: 2000,
                            buttons: false
                            }) 
                    }
                }
            })
        }
    })
    // end add customer
    $(".addpartylink").click(function(){
        var partytype =  $(this).attr('data-party-type');
        $(".partymasterbuttons button").each(function(){
            if($(this).attr('data-value') == partytype){
                $(this).attr('data-active','yes');
            }else{
                $(this).attr('data-active','no');
            }
        })
        onupdate_masterbuttons();
    })


    if($('#bars').length == 1){
        google.charts.load('current', {packages: ['corechart','bar']});
        google.charts.setOnLoadCallback(drawCharts);
    }

$(".cancelmaster").click(function(){
    var action = $(this).attr('data-form-ad-action');
    $('#formheading span').text('Add');
    $(this).parents('form').attr('action',action);
})


$(".mastercheckbox input").click(function(){
    var table = $(this).parents("table");
    if($(this).is(":checked")){
        table.find('input[type="checkbox"]').prop("checked",true);
    }
    else{
        table.find('input[type="checkbox"]').prop("checked",false);
    }
})

$("table").on("click",".trowcheck",function(){
    if($(this).is(":checked")){
        $(this).parent().siblings().attr('style', 'background-color: #337ab7 !important');
        $(this).parent().siblings().css({"color":"#fff"});
    }
    else{
        if($(this).parents('tr').hasClass('odd')){
            $(this).parent().siblings().attr('style', 'background-color: #f2f2f2 !important');
            $(this).parent().siblings().css({"background-color":"#f2f2f2","color":"#333"});
        }else{
            $(this).parent().siblings().attr('style', 'background-color: #fff !important');
            $(this).parent().siblings().css({"background-color":"#fff","color":"#333"});
        }
    }
})

jQuery.validator.addMethod("alphas", function(value, element) 
{
return this.optional(element) || /^[a-z," "]+$/i.test(value);
}, "Letters and spaces only please");

$(".editaction").click(function(e){
    e.preventDefault();
    var checked = $('td input:checked');
    if(checked.length != 1){

        swal({
            title:'Improper Selection',
            text:'Please select Atlest/only one',
            buttons:false,
            timer:1500
        })
        return;
    }
    var id = $('td input:checked').first().val();
    var link = $(this).data("link");
    window.location.href = link+id;
})

$(".printaction").click(function(e){
    e.preventDefault();
    var checked = $('td input:checked');
    if(checked.length < 1){

        swal({
            title:'Improper Selection',
            text:'Please select Atlest/only one',
            buttons:false,
            timer:1500
        })
        return;
    }
    var firstchecked = $('td input:checked').first();
    var id = firstchecked.val();
    var comp = firstchecked.data("comp");
    var link = $(this).data("link");
    window.location.href = link+id+"&amp;compid="+comp;
})

$(".deleteaction").click(function(e){
    e.preventDefault();
    var link = $(this).data("link");
    var checked = $('td input:checked');
    var deleteallid = [];
    var sauda2id = [];
    checked.each(function(x,y){
        deleteallid.push($(y).val());
        sauda2id.push($(y).data("sauda2"));
    })    
    var ides = encodeURI(deleteallid.toString());
    var sauda2 = encodeURI(sauda2id.toString());

    
    // var firstchecked = $('td input:checked').first();
    // var id = firstchecked.val();
    // var vouc = firstchecked.data("vouc");
    var goto = link + ides;
    if(sauda2 != ''){
        goto += "&sauda2=" + sauda2;
    }
    $.ajax({
        'url':goto + "&del=no",
        success:function(data){
            if(data.success){
                swal({
                    title:"Confirm",
                    text:"Are you Sure you want to delete it?",
                    icon:"warning",
                    buttons: ["Cancel","Confirm"],
                    dangerMode: true
                }).then(function(isConfirm){
                    if (isConfirm){
                        $.ajax({
                            'url':goto + "&del=yes",
                            success:function(data){
                                if(data.success){
                                    swal({
                                        title:'Success',
                                        text:'Records Deleted Succesfully',
                                        buttons:false,
                                        timer:1500
                                    })
                                    // location.reload();
                                    checked.parents("tr").remove();

                                }else{
                                    swal({
                                        title:'Error!',
                                        text:data.message,
                                        buttons:false,
                                        timer:1500
                                    })
                                }
                            }
                        })
                    }
                })
            }else{
                swal({
                    title:'Error!',
                    text:data.message,
                    buttons:false,
                    timer:1500
                })
            }
        }
    })
 
})
$(".prevdef").click(function(e){
    e.preventDefault();
})

$("#searchmenu").keydown(function(e){
    if(e.keyCode == 27){
        $(this).slideToggle();
    }
})
$("#savedev").click(function(){
    $.ajax({
        type: 'GET',
        url: '/delivery_entry/productname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                var product = data['product_mast'];
                var brand = data['brand'];
                var main_loop_id = 0;
                var result='';
                var tot_bags = $('#tot_bags').val();
                var tot_wght = $('#tot_wght').val();
                var tot_ammount = $('#tot_ammount').val();
                for(i = 1; i <=glbitidx; i++)
                {
                    var inp_code = $('#inp_code'+i).val();
                    var brand_name =$("#brand_name"+i).val();
                    var bag = $('#bag'+i).val();
                    var pck = $('#pck' + i).val();
                    var inbrnd_code = $('#inbrnd_code').val();
                    var wght = $('#wght' + i).val();
                    var sel_rate = $('#sel_rate' + i).val();
                    var seler_rate = $('#seler_rate' + i).val();
                    var buy_rate = $('#buy_rate' + i).val();
                    var w_q = $('#w_q' + i).val();
                    var wghtunit = $('#wghtunit' + i).val();
                    var rateper = $('#rateper' + i).val();
                    var amount = $('#amount' + i).val();
                    var pcktype = $('#pcktype' + i).val();
                    var g_n = $('#g_n' + i).val();
                    var ipack = $('#ipack' + i).val();
                    var slbrk_type = $('#slbrk_type' + i).val();
                    var slbrk_rt = $('#slbrk_rt' + i).val();
                    var slbrk_amt = $('#slbrk_amt' + i).val();
                    var brbrk_rt = $('#brbrk_rt' + i).val();
                    var brbrk_typ = $('#brbrk_typ' + i).val();
                    var brbrk_amt = $('#brbrk_amt' + i).val();
                    main_loop_id=i;
                        result+= '<tr class="delivery-wrapper" id="rohit' + main_loop_id + '">';
                        result += '<td><select disabled name="contract_sauda_group[' + main_loop_id + '][p_code]"  id="inp_code' + main_loop_id + '" onchange="chgcombo(' + main_loop_id + ')"  class="form-control" style="width:102px;">';
                        for (p = 0; p < product.length; p++) {
                            if (inp_code == product[p]['_id']) {
                                result += "<option value='" + product[p]['_id'] + "' data-product_id='" + product[p]['_id'] + "' selected>" + product[p]['product_name'] + "</option>";
                            }
                            else
                            {
                                result += "<option value='" + product[p]['_id'] + "' data-product_id='" + product[p]['_id'] + "'>" + product[p]['product_name'] + "</option>";
                            }
                        }
                        result += '</select></td><td><select disabled name="contract_sauda_group[' + main_loop_id + '][brand_code]" id="brand_name' + i + '" class="form-control brand_name" style="width: 102px;">';
                        for (b = 0; b < brand.length; b++) {
                            if (brand_name == brand[b]['_id']) {
                                result += "<option value='" + brand[b]['_id'] + "' selected>" + brand[b]['brand_name'] + "</option>";
                            } else {
                                result += "<option value='" + brand[b]['_id'] + "'>" + brand[b]['brand_name'] + "</option>";
                            }
                        }
                        result += '</select></td>';
                        result += '<td>';
                        result += '<input type="number" name="contract_sauda_group[' + main_loop_id + '][bag]" id="bag_dlv' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" value="'+bag+'" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                        result += '<td><input type="number" readonly name="contract_sauda_group[' + main_loop_id + '][pck]" step="0.0001"  id="pck_dlv' + main_loop_id + '" onchange="chgpck(' + main_loop_id + ')" oninput="calc(' + main_loop_id + ')"  value="' + pck + '" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                        result += '<td><select disabled name="contract_sauda_group[' + main_loop_id + '][pck_unit]" id="inbrnd_code' + main_loop_id + '" class="form-control" style="width: 72px;"><option value="KG">KG</option></select></td>';
                        result += '<td><input type="number" readonly step="0.0001" name="contract_sauda_group[' + main_loop_id + '][wght]" id="wght_dlv' + main_loop_id + '" value="'+wght+'" oninput="calc(' + main_loop_id + ')" class="form-control wght" style="width: 82px;text-align: -webkit-right;"></td>';
                        result += '<td><input type="number"  step="0.0001" name="contract_sauda_group[' + main_loop_id + '][sd_rate]" id="sel_rate_dlv' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" value="'+sel_rate+'"  class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                        result += '<td><input type="number" readonly step="0.0001" name="contract_sauda_group[' + main_loop_id + '][s_rate]" id="seler_rate_dlv' + main_loop_id + '" value="'+seler_rate+'" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                        result += '<td><input type="number" readonly name="contract_sauda_group[' + main_loop_id + '][b_rate]" id="buy_rate_dlv' + main_loop_id + '" value="'+buy_rate+'" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                        result += '<td><select disabled name="contract_sauda_group[' + main_loop_id + '][w_q]" id="w_q_dlv' + main_loop_id + '" class="form-control w_q" style="width: 72px;">';
                        if(w_q=='W')result += '<option value="W" selected>W</option>';
                        else result += '<option value="W">W</option>';
                        if(w_q=='Q')result += '<option value="Q" selected>Q</option>';
                        else result += '<option value="Q">Q</option>';
                        result += '</select></td>';
                        result += '<td><select disabled name="contract_sauda_group[' + main_loop_id + '][wghtunit]" id="wghtunit' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 72px;">';
                        if(wghtunit=="Qtl")result += '<option value="Qtl" selected>Qtl</option>';
                        else result += '<option value="Qtl">Qtl</option>';
                        if(wghtunit=="Tons")result += '<option value="Tons" selected>Tons</option>';
                        else result += '<option value="Tons">Tons</option>';
                        if(wghtunit=="Kg")result += '<option value="Kg" selected>Kg</option>';
                        else result += '<option value="Kg">Kg</option>';
                        result += '</select></td>';
                        result += '<td><select disabled name="contract_sauda_group[' + main_loop_id + '][rateper]" id="rateper' + main_loop_id + '" class="form-control" style="width: 62px;text-align: -webkit-right;">';
                        if(rateper=="1")result += '<option value="1" selected>1</option>';
                        else result += '<option value="1">1</option>';
                        if(rateper=="10")result += '<option value="10" selected>10</option>';
                        else result += '<option value="10">10</option>';
                        if(rateper=="100")result += '<option value="100" selected>100</option>';
                        else result += '<option value="100">100</option>';
                        result += '</select></td>';
                        result += '<td><input type="number" readonly step="0.0001" name="contract_sauda_group[' + main_loop_id + '][amount]" id="amount_dlv' + main_loop_id + '" value="'+amount+'" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                        result += '<td><select disabled name="contract_sauda_group[' + main_loop_id + '][pcktype]" id="pcktype" class="form-control" style="width: 102px;">';
                        if(pcktype=="Gross")result += '<option value="Gross" selected>Gross</option>';
                        else result += '<option value="Gross">Gross</option>';
                        if(pcktype=="Net")result += '<option value="Net" selected>Net</option>';
                        else result += '<option value="Net">Net</option>';
                        result += '</select></td>';
                        result += '<td><select disabled name="contract_sauda_group[' + main_loop_id + '][g_n]" id="g_n' + main_loop_id + '" class="form-control" style="width: 102px;">';
                        if(g_n=='O')result += '<option value="O" selected>O</option>';
                        else result += '<option value="O">O</option>'; 
                        if(g_n=='N')result += '<option value="N" selected>N</option>';
                        else result += '<option value="N">N</option>';
                        result += '</select></td>';
                        result += '<td><input type="number" readonly  step="0.0001" name="contract_sauda_group[' + main_loop_id + '][ipack]" value="'+ipack+'" id="ipack' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                        result += '<td><input type="number" readonly name="contract_sauda_group[' + main_loop_id + '][slbrk_rt]" id="slbrk_rt_dlv' + main_loop_id + '" value="'+slbrk_rt+'" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                        result += '<td><select disabled name="contract_sauda_group[' + main_loop_id + '][slbrk_type]" id="slbrk_type_dlv' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;">';
                    
                        if(slbrk_type=='%')result += '<option value="%" selected>%</option>';
                        else result += '<option value="%">%</option>';
                        if(slbrk_type=='PBag')result += '<option value="PBag" selected>PBag</option>';
                        else result += '<option value="PBag">PBag</option>';
                        if(slbrk_type=='PQtl')result += '<option value="PQtl" selected>PQtl</option>';
                        else result += '<option value="PQtl">PQtl</option>';
                        if(slbrk_type=='Fix')result += '<option value="Fix" selected>Fix</option>';
                        else result += '<option value="Fix">Fix</option>';
                        result += '</select></td>';
                        result += '<td><input type="number" readonly step="0.0001" name="contract_sauda_group[' + main_loop_id + '][slbrk_amt]" id="slbrk_amt_dlv' + main_loop_id + '" value="'+slbrk_amt+'" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                        result += '<td><input type="number" readonly  name="contract_sauda_group[' + main_loop_id + '][brbrk_rt]" oninput="calc(' + main_loop_id + ')" value="'+brbrk_rt+'" id="brbrk_rt_dlv' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                        result += '<td>';
                        result += '<select disabled name="contract_sauda_group[' + main_loop_id + '][brbrk_typ]" oninput="calc(' + main_loop_id + ')" id="brbrk_typ_dlv' + main_loop_id + '" class="form-control" style="width: 102px;">';
                        if(brbrk_typ=='%')result += '<option value="%" selected>%</option>';
                        else result += '<option value="%">%</option>';
                        if(brbrk_typ=='PBag')result += '<option value="PBag" selected>PBag</option>';
                        else result += '<option value="PBag">PBag</option>';
                        if(brbrk_typ=='PQtl')result += '<option value="PQtl" selected>PQtl</option>';
                        else result += '<option value="PQtl">PQtl</option>';
                        if(brbrk_typ=='Fix')result += '<option value="Fix" selected>Fix</option>';
                        else result += '<option value="Fix">Fix</option>';
                        result += '</select></td>';
                        result += '<td><input readonly type="number" step="0.0001" name="contract_sauda_group[' + main_loop_id + '][brbrk_amt]" oninput="calc(' + main_loop_id + ')" value="'+brbrk_amt+'"  id="brbrk_amt_dlv' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                        
                        result += '</td>';
                        result += '</tr>';
                    
                }
                result += '<tr id="contract_div">';
                    result += '<th>Total</th>';
                    result += '<td></td>';
                    result += '<td><input name="tot_bags" value="'+tot_bags+'" id="tot_bags_dlv" placeholder="Total Bags" value="" class="form-control nofocus" readonly  tabindex="-1"></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td> <input type="text" name="tot_wght" value="'+tot_wght+'" id="tot_wght_dlv" placeholder="Total tot_wght" class="form-control item_name nofocus" readonly  tabindex="-1"></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td> <input type="text" name="tot_ammount" value="'+tot_ammount+'" id="tot_ammount_dlv" placeholder="Total Amount" class="form-control tot_ammount nofocus"  readonly  tabindex="-1"></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '<td></td>';
                    result += '</tr>';
                    $("#deliverysupport .modal-body .modalappend").html(result);
                }
                

            }

        // }
    }); 
   
    // var cont = $(".delvcopy").concat();
    // $("#deliverysupport .modal-body .modalappend").html(cont);
})

// to run on party master update
    onupdate_masterbuttons();

})
function drawCharts()
{
    totalsauda();
    barchart();
}
function totalsauda() {

    var data = google.visualization.arrayToDataTable([
      ['Sauda', 'total'],
      ['Completed', 11],
      ['Pending', 2],
      ['In Process', 6],
    ]);

    var options = {
      title: "Total Sauda's",
      is3D: true,
      legend:'left',
      legendposition:'center',
      width:'100%',
      height:'100%',
      chartArea: {
          left: "3%",
          top: "3%",
          height: "94%",
          width: "94%"
      },
      pieSliceText: 'value',
    };

    var totalsaudapie = new google.visualization.PieChart(document.getElementById('totalsauda'));
    google.visualization.events.addListener(totalsaudapie, 'select', totalsaudaclick);
    
    totalsaudapie.draw(data, options);

    function totalsaudaclick() {
        var selectedItem = totalsaudapie.getSelection()[0];

        if (selectedItem) 
        {
          var topping = data.getValue(selectedItem.row, 0);
          alert('The user selected ' + topping);
        }
    }

}

function barchart() {

    var data = google.visualization.arrayToDataTable([
      ['Sauda', 'total'],
      ['Completed', 11],
      ['Pending', 2],
      ['In Process', 6],
    ]);

    var options = {
      title: "Total Bars",
      is3D: true,
      legend:'bottom',
      legendposition:'center',
      width:'100%',
      height:'100%',
      bars: 'vertical',
      chartArea: {
          left: "3%",
          top: "3%",
          height: "94%",
          width: "94%"
      },
      pieSliceText: 'value',
    };

    var bars = new google.charts.Bar(document.getElementById('bars'));
    google.visualization.events.addListener(bars, 'select', barsclick);
    
    bars.draw(data, options);

    function barsclick() {
        var selectedItem = bars.getSelection()[0];

        if (selectedItem) 
        {
          var topping = data.getValue(selectedItem.row, 0);
          alert('The user selected ' + topping);
        }
    }

}
    

// function checkcontractpartytypeonedit(){
//     $(".contractpartycheckbox").each(function(){
//         if($(this).prop('checked') == true)
//         $(this).parents(".input-group").find('select').removeAttr('disabled');
//         else
//         $(this).parents(".input-group").find('select').attr('disabled','true');
//     })
// }

var company = [
    {id:0, comp: 'Huseini Indorewala', city:'Indore'},
    {id:1, comp: 'Alias', city:'Mumbai'}
]

function formatcity(data){
    var divided = data['text'].split(',');
    if(typeof (divided[1]) == 'undefined'){
        divided[1] = '';
    }
    var ret = $('<div class="clearfix"><div class="pull-left">'+ divided[0] +'</div><div class="pull-right">' + divided[1] + '</div></div>');
    return ret; 
}


function addselect2(selec){
    $(selec).each(function(){
        var plach = $(this).attr('placeholder');
        $(this).select2({
            placeholder: plach,
            allowClear:true
        }).on('selct2-select', function(){
            alert('hi');
        })
    })
}

function updatepartymasterbuttons(){
    var v = '';
    $(".partymasterbuttons button").each(function(i){
        if($(this).attr('data-active') == 'yes'){
            if(v != ''){
                    v = v + ',';
            }
            v = v + $(this).attr('data-value');
        }
        $("#bsrt").val(v);
        $("#bsrt").valid();
    })
}

// function for update page
function onupdate_masterbuttons(){
    var v = '';
    $(".partymasterbuttons button").each(function(i){
        if($(this).attr('data-active') == 'yes'){
            if(v != ''){
                    v = v + ',';
            }
            v = v + $(this).attr('data-value');
            $(this).css({'background-color':"#4b77be",'color':"#fff"});
        }else{
            $(this).css({'background-color':"#fff",'color':"#333"});
        }
        $("#bsrt").val(v);
        $("#bsrt").valid();
    })
}

function gofullscreen(elementid) {

    var elem = document.getElementById(elementid);
    if (elem.requestFullscreen) {
        elem.requestFullscreen();
    } else if (elem.mozRequestFullScreen) {
        elem.mozRequestFullScreen();
    } else if (elem.webkitRequestFullscreen) {
        elem.webkitRequestFullscreen();
    }

}


Mousetrap.bind('p m', function () {
    var link = 'http://' + window.location.host + '/party/party_list';
    window.location.replace(link);
});

Mousetrap.bind('c m', function () {
    var link = 'http://' + window.location.host + '/add_city/add_city';
    window.location.replace(link);
});


// Mousetrap.bind('home', function () {
//     var link = 'http://' + window.location.host + '/userright/index';
//     window.location.replace(link);
// });

Mousetrap.bind('F', function () {
    gofullscreen("body");
    $("body").css('overflow', "scroll");
});

Mousetrap.bind('ctrl + t', function () {
    $(".panel-body").css('overflow', "auto");
    gofullscreen("portletbody");
});

Mousetrap.bind('ctrl+b', function () {
    $("#searchmenu").slideDown();
    $("#searchmenu").focus();
});

Mousetrap.bind('f6', function (e) {
    e.preventDefault();
    $('.panel').find('form').submit();
});


Mousetrap.bind('f2', function (e) {
    $('.btn-link').trigger("click");
});

Mousetrap.bind('f1', function (e) {
    $('#shortcuts').modal("show");
});
Mousetrap.prototype.stopCallback = function () {
    return false;
}
$(".partyform").submit(function(ev){
    ev.preventDefault();
    if($(this).closest('form').valid()){
        var data = $(this).closest('form').serialize();
        $.ajax({
            url:'/party/party_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            if(dat.success == true)
            {
                window.location.href='/party/party_list';
            }
            else if(dat.success == "city_name")
            {
                swal({
                        title: "Party",
                        text: "Party Name And City Name Allready Exits",
                        icon: "error",
                        timer: 2000,
                        buttons: false
                    }) 
            }
                else if(dat.success=="partyusername")
                {
                    swal({
                            title: "Party",
                            text: "Mobile Username Already Exits",
                            icon: "error",
                            timer: 2000,
                            buttons: false
                        }) 
                }
            }
        })
    }
})
$(document).on("click", "#delivery_contractsauda", function () {
    $.ajax({
        type: 'GET',
        url: '/delivery_entry/productname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                var product = data['product_mast'];
                var brand = data['brand'];
                var main_loop_id = 0;
                var bno = $('#bno').val();
                var bdt = $('#bdt').val();
                var mot_no = $('#mot_no').val();
                var tptcode = $('#tptcode').val();
                var tpt_col = $('#tpt_col').val();
                var frght = $('#frght').val();
                var frght_rt = $('#frght_rt').val();
                var frght_adv = $('#frght_adv').val();
                var result = '<input type="text" name="bdt" value="'+bdt+'">';
                result += '<input type="text" name="mot_no" value="'+mot_no+'">';
                result += '<input type="text" name="tptcode" value="'+tptcode+'">';
                result += '<input type="text" name="tpt_col" value="'+tpt_col+'">';
                result += '<input type="text" name="frght" value="'+frght+'">';
                result += '<input type="text" name="frght_rt" value="'+frght_rt+'">';
                result += '<input type="text" name="frght_adv" value="'+frght_adv+'">';
                result += '<input type="text" name="bno" value="'+bno+'">';
                // var html='';
                var tot_bags_dlv = $('#tot_bags_dlv').val();
                var tot_wght_dlv = $('#tot_wght_dlv').val();
                var tot_ammount_dlv = $('#tot_ammount_dlv').val();
                for(i = 1; i <=glbitidx; i++)
                {
                    var inp_code = $('#inp_code'+i).val();
                    var brand_name =$("#brand_name"+i).val();
                    var bag_dlv = $('#bag_dlv'+i).val();
                    var pck = $('#pck' + i).val();
                    var inbrnd_code = $('#inbrnd_code').val();
                    var wght_dlv = $('#wght_dlv' + i).val();
                    var sel_rate_dlv = $('#sel_rate_dlv' + i).val();
                    var seler_rate = $('#seler_rate' + i).val();
                    var buy_rate = $('#buy_rate' + i).val();
                    var w_q = $('#w_q' + i).val();
                    var wghtunit = $('#wghtunit' + i).val();
                    var rateper = $('#rateper' + i).val();
                    var amount_dlv = $('#amount_dlv' + i).val();
                    var pcktype = $('#pcktype' + i).val();
                    var g_n = $('#g_n' + i).val();
                    var ipack = $('#ipack' + i).val();
                    var slbrk_type = $('#slbrk_type' + i).val();
                    var slbrk_rt = $('#slbrk_rt' + i).val();
                    var slbrk_amt_dlv = $('#slbrk_amt_dlv' + i).val();
                    var brbrk_rt = $('#brbrk_rt' + i).val();
                    var brbrk_typ = $('#brbrk_typ' + i).val();
                    var brbrk_amt_dlv = $('#brbrk_amt_dlv' + i).val();
                   
                    main_loop_id=i;
                    result+= '<tr class="delivery-wrapper" id="rohit' + main_loop_id + '">';
                    result += '<td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][p_code]"  id="inp_code' + main_loop_id + '" onchange="chgcombo(' + main_loop_id + ')"  class="form-control" style="width:102px;">';
                    for (p = 0; p < product.length; p++) {
                        if (inp_code == product[p]['_id']) {
                            result += "<option value='" + product[p]['_id'] + "' data-product_id='" + product[p]['_id'] + "' selected>" + product[p]['product_name'] + "</option>";
                        }
                        else
                        {
                            result += "<option value='" + product[p]['_id'] + "' data-product_id='" + product[p]['_id'] + "'>" + product[p]['product_name'] + "</option>";
                        }
                    }
                    result += '</select></td><td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][brand_code]" id="brand_name' + i + '" class="form-control brand_name" style="width: 102px;">';
                    for (b = 0; b < brand.length; b++) {
                        if (brand_name == brand[b]['_id']) {
                            result += "<option value='" + brand[b]['_id'] + "' selected>" + brand[b]['brand_name'] + "</option>";
                        } else {
                            result += "<option value='" + brand[b]['_id'] + "'>" + brand[b]['brand_name'] + "</option>";
                        }
                    }
                    result += '</select></td>';
                    result += '<td>';
                    result += '<input type="number" name="contract_sauda_group_dlv[' + main_loop_id + '][bag]" id="bag_dlv' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" value="'+bag_dlv+'" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                    result += '<td><input type="number" readonly name="contract_sauda_group_dlv[' + main_loop_id + '][pck]" step="0.0001"  id="pck_dlv' + main_loop_id + '" onchange="chgpck(' + main_loop_id + ')" oninput="calc(' + main_loop_id + ')"  value="' + pck + '" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                    result += '<td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][pck_unit]" id="inbrnd_code' + main_loop_id + '" class="form-control" style="width: 72px;"><option value="KG">KG</option></select></td>';
                    result += '<td><input type="number" readonly step="0.0001" name="contract_sauda_group_dlv[' + main_loop_id + '][wght]" id="wght_dlv' + main_loop_id + '" value="'+wght_dlv+'" oninput="calc(' + main_loop_id + ')" class="form-control wght" style="width: 82px;text-align: -webkit-right;"></td>';
                    result += '<td><input type="number"  step="0.0001" name="contract_sauda_group_dlv[' + main_loop_id + '][sd_rate]" id="sel_rate_dlv' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" value="'+sel_rate_dlv+'"  class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                    result += '<td><input type="number" readonly step="0.0001" name="contract_sauda_group_dlv[' + main_loop_id + '][s_rate]" id="seler_rate_dlv' + main_loop_id + '" value="'+seler_rate+'" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                    result += '<td><input type="number" readonly name="contract_sauda_group_dlv[' + main_loop_id + '][b_rate]" id="buy_rate_dlv' + main_loop_id + '" value="'+buy_rate+'" class="form-control" style="width: 72px;text-align: -webkit-right;"></td>';
                    result += '<td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][w_q]" id="w_q_dlv' + main_loop_id + '" class="form-control w_q" style="width: 72px;">';
                    if(w_q=='W')result += '<option value="W" selected>W</option>';
                    else result += '<option value="W">W</option>';
                    if(w_q=='Q')result += '<option value="Q" selected>Q</option>';
                    else result += '<option value="Q">Q</option>';
                    result += '</select></td>';
                    result += '<td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][wghtunit]" id="wghtunit' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 72px;">';
                    if(wghtunit=="Qtl")result += '<option value="Qtl" selected>Qtl</option>';
                    else result += '<option value="Qtl">Qtl</option>';
                    if(wghtunit=="Tons")result += '<option value="Tons" selected>Tons</option>';
                    else result += '<option value="Tons">Tons</option>';
                    if(wghtunit=="Kg")result += '<option value="Kg" selected>Kg</option>';
                    else result += '<option value="Kg">Kg</option>';
                    result += '</select></td>';
                    result += '<td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][rateper]" id="rateper' + main_loop_id + '" class="form-control" style="width: 62px;text-align: -webkit-right;">';
                    if(rateper=="1")result += '<option value="1" selected>1</option>';
                    else result += '<option value="1">1</option>';
                    if(rateper=="10")result += '<option value="10" selected>10</option>';
                    else result += '<option value="10">10</option>';
                    if(rateper=="100")result += '<option value="100" selected>100</option>';
                    else result += '<option value="100">100</option>';
                    result += '</select></td>';
                    result += '<td><input type="number" readonly step="0.0001" name="contract_sauda_group_dlv[' + main_loop_id + '][amount]" id="amount_dlv' + main_loop_id + '" value="'+amount_dlv+'" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                    result += '<td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][pcktype]" id="pcktype" class="form-control" style="width: 102px;">';
                    if(pcktype=="Gross")result += '<option value="Gross" selected>Gross</option>';
                    else result += '<option value="Gross">Gross</option>';
                    if(pcktype=="Net")result += '<option value="Net" selected>Net</option>';
                    else result += '<option value="Net">Net</option>';
                    result += '</select></td>';
                    result += '<td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][g_n]" id="g_n' + main_loop_id + '" class="form-control" style="width: 102px;">';
                    if(g_n=='O')result += '<option value="O" selected>O</option>';
                    else result += '<option value="O">O</option>'; 
                    if(g_n=='N')result += '<option value="N" selected>N</option>';
                    else result += '<option value="N">N</option>';
                    result += '</select></td>';
                    result += '<td><input type="number" readonly  step="0.0001" name="contract_sauda_group_dlv[' + main_loop_id + '][ipack]" value="'+ipack+'" id="ipack' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                    result += '<td><input type="number" readonly  name="contract_sauda_group_dlv[' + main_loop_id + '][slbrk_rt]" id="slbrk_rt_dlv' + main_loop_id + '" value="'+slbrk_rt+'" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                    result += '<td><select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][slbrk_type]" id="slbrk_type_dlv' + main_loop_id + '" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;">';
                
                    if(slbrk_type=='%')result += '<option value="%" selected>%</option>';
                    else result += '<option value="%">%</option>';
                    if(slbrk_type=='PBag')result += '<option value="PBag" selected>PBag</option>';
                    else result += '<option value="PBag">PBag</option>';
                    if(slbrk_type=='PQtl')result += '<option value="PQtl" selected>PQtl</option>';
                    else result += '<option value="PQtl">PQtl</option>';
                    if(slbrk_type=='Fix')result += '<option value="Fix" selected>Fix</option>';
                    else result += '<option value="Fix">Fix</option>';
                    result += '</select></td>';
                   
                    result += '<td><input type="number" readonly step="0.0001" name="contract_sauda_group_dlv[' + main_loop_id + '][slbrk_amt]" id="slbrk_amt_dlv' + main_loop_id + '" value="'+slbrk_amt_dlv+'" oninput="calc(' + main_loop_id + ')" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                    result += '<td><input type="number" readonly  name="contract_sauda_group_dlv[' + main_loop_id + '][brbrk_rt]" oninput="calc(' + main_loop_id + ')" value="'+brbrk_rt+'" id="brbrk_rt_dlv' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                    result += '<td>';
                    result += '<select disabled name="contract_sauda_group_dlv[' + main_loop_id + '][brbrk_typ]" oninput="calc(' + main_loop_id + ')" id="brbrk_typ_dlv' + main_loop_id + '" class="form-control" style="width: 102px;">';
                    if(brbrk_typ=='%')result += '<option value="%" selected>%</option>';
                    else result += '<option value="%">%</option>';
                    if(brbrk_typ=='PBag')result += '<option value="PBag" selected>PBag</option>';
                    else result += '<option value="PBag">PBag</option>';
                    if(brbrk_typ=='PQtl')result += '<option value="PQtl" selected>PQtl</option>';
                    else result += '<option value="PQtl">PQtl</option>';
                    if(brbrk_typ=='Fix')result += '<option value="Fix" selected>Fix</option>';
                    else result += '<option value="Fix">Fix</option>';
                    result += '</select></td>';
                    result += '<td><input readonly type="number" step="0.0001" name="contract_sauda_group_dlv[' + main_loop_id + '][brbrk_amt]" oninput="calc(' + main_loop_id + ')" value="'+brbrk_amt_dlv+'"  id="brbrk_amt_dlv' + main_loop_id + '" class="form-control" style="width: 102px;text-align: -webkit-right;"></td>';
                    
                    result += '</td>';
                    result += '</tr>';
                
            }
            result += '<tr id="contract_div">';
                result += '<th>Total</th>';
                result += '<td></td>';
                result += '<td><input name="tot_bags_dlv" value="'+tot_bags_dlv+'" id="tot_bags_dlv" placeholder="Total Bags" value="" class="form-control nofocus" readonly  tabindex="-1"></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td> <input type="text" name="tot_wght_dlv" value="'+tot_wght_dlv+'" id="tot_wght_dlv" placeholder="Total tot_wght" class="form-control item_name nofocus" readonly  tabindex="-1"></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td> <input type="text" name="tot_ammount_dlv" value="'+tot_ammount_dlv+'" id="tot_ammount_dlv" placeholder="Total Amount" class="form-control tot_ammount nofocus"  readonly  tabindex="-1"></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '<td></td>';
                result += '</tr>';
                    // alert(html)
                    // $(".deliverdeatils").html(html);
                    $('#deliverysupport').modal('hide');
                   $('.delivery_contract').html(result);
                }
                

            }

        // }
    }); 
}) 

function myFunction() {
    window.print();
}
$(document).on('click', '.edit_company_master', function () {
    var compid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/company_master/' + compid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                console.log(response);
                var com_name = response['company'].com_name;
                var sdate = response['company'].sdate;
                var smomdt = moment(sdate).tz("Asia/Kolkata").format('DD/MM/YYYY');
                var edate = response['company'].edate;
                var emomdt = moment(edate).tz("Asia/Kolkata").format('DD/MM/YYYY');
                var mast_nm = response['company'].mast_nm;
                var Dealer_miscsno = response['company'].Dealer_miscsno;
                var Q_T_K = response['company'].Q_T_K;
                var compid = response['company']._id;
                $('.com_name').val(com_name);
                $('.sdate').val(smomdt);
                $('.edate').val(emomdt);
                $('.mast_nm').val(mast_nm);
                $('.Dealer_miscsno').val(Dealer_miscsno);
                $('.Q_T_K').val(Q_T_K);
                $('#companyadd').hide();
                $('#formheading').hide();
                $('#editformheading').show();
                $('#companyedit').show();
                $("#companyedit").attr("action", "/company_master/update/" + compid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.edit_division_master', function () {
    var divid = $(this).attr('data-id');
    console.log(divid);
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/division_master/' + divid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                var div_mast = response['division'].div_mast;
                var ac_cin = response['division'].ac_cin;
                var div_code = response['division'].div_code;
                var ac_add2 = response['division'].ac_add2;
                var ac_place = response['division'].ac_place;
                var ac_state = response['division'].ac_state;
                var ac_pin = response['division'].ac_pin;
                var propreietor = response['division'].propreietor;
                var ac_pan = response['division'].ac_pan;
                var ac_pho = response['division'].ac_pho;
                var ac_phfax = response['division'].ac_phfax;
                var ac_mobno = response['division'].ac_mobno;
                var ac_gstin = response['division'].ac_gstin;
                var prvyr_datafile = response['division'].prvyr_datafile;
                var ac_wbsite = response['division'].ac_wbsite;
                var ac_email = response['division'].ac_email;
                var ac_interfclanguge = response['division'].ac_interfclanguge;
                var ssevadomain = response['division'].ssevadomain;
                var ssevausr = response['division'].ssevausr;
                var ssevapwd = response['division'].ssevapwd;
                var sms_port_no = response['division'].sms_port_no;
                var smttp_client = response['division'].smttp_client;
                var email_user = response['division'].email_user;
                var email_pwd = response['division'].email_pwd;
                var email_port = response['division'].email_port;
                var jurisdiction = response['division'].jurisdiction;
                var ac_topline = response['division'].ac_topline;
                var ac_midline = response['division'].ac_midline;
                var ac_bottline = response['division'].ac_bottline;
                var contract_qty = response['division'].contract_qty;
                var weight_calcution = response['division'].weight_calcution;
                var character_case = response['division'].character_case;
                var bank_name = response['division'].bank1;
                var bank_ac = response['division'].bank2;
                var bank_add = response['division'].bank_add;
                var bank_city = response['division'].bank_city;
                var bank_fax = response['division'].bank_fax;
                var bank3 = response['division'].bank3;
                var bank_code = response['division'].bank_code;
                var swift_code = response['division'].swift_code;
                var fix = response['division'].fix;
                var filepath = response['division'].filepath;
                var divid = response['division']._id;
                $('.bank1').val(bank_name);
                $('.ac_cin').val(ac_cin);
                $('.bank2').val(bank_ac);
                $('.bank_add').val(bank_add);
                $('.bank_city').val(bank_city).trigger('change');
                $('.bank_fax').val(bank_fax);
                $('.bank3').val(bank3);
                $('.bank_code').val(bank_code);
                $('.swift_code').val(swift_code);
                $('.div_mast').val(div_mast);
                $('.div_code').val(div_code);
                $('.ac_add2').val(ac_add2);
                $('.ac_place').val(ac_place).trigger('change');
                $('.ac_state').val(ac_state).trigger('change');
                $('.ac_pin').val(ac_pin);
                $('.propreietor').val(propreietor);
                $('.ac_pan').val(ac_pan);
                $('.ac_pho').val(ac_pho);
                $('.ac_phfax').val(ac_phfax);
                $('.ac_mobno').val(ac_mobno);
                $('.ac_gstin').val(ac_gstin);
                $('.prvyr_datafile').val(prvyr_datafile);
                $('.ac_wbsite').val(ac_wbsite);
                $('.ac_email').val(ac_email);
                $('.ac_interfclanguge').val(ac_interfclanguge);
                $('.ssevadomain').val(ssevadomain);
                $('.ssevausr').val(ssevausr);
                $('.ssevapwd').val(ssevapwd);
                $('.sms_port_no').val(sms_port_no);
                $('.smttp_client').val(smttp_client);
                $('.email_user').val(email_user);
                $('.weight_calcution').val(weight_calcution);
                $('.email_port').val(email_port);
                $('.email_pwd').val(email_pwd);
                $('.jurisdiction').val(jurisdiction);
                $('.ac_topline').val(ac_topline);
                $('.ac_midline').val(ac_midline);
                $('.ac_bottline').val(ac_bottline);
                $('.contract_qty').val(contract_qty);
                $('.character_case').val(character_case);
                $('.fix').val(fix);

                $('.edit_filename').val(filepath);
                $('.edit_div_img').attr("src",filepath);
                $('#divisionadd').hide();
                $('.btn_add').hide();
                $('#add').hide();
                $('#edit').show();
                $('#divisionedit').show();
                $('.div_mast').focus();
                $("#divisionedit").attr("action", "/division_master/update/" + divid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on("click", "#billregsubmit", function (event) {
    event.preventDefault();
    $('.loader').show();
    var period = $('#contractrange').val();
    var start_date = period.substr(0,10);
    var end_date = period.substr(14,10);
    $.ajax({
        type: "POST",
        url: '/bill_ragister/billregdetail',
        dataType: 'json',
        data: {
            start_date: start_date,
            end_date: end_date,
        },
        success: function (data) {
            if (data['success'] == true) {
                var contract = data['hhtml'];
                console.log(contract);
            }
            if ( $.fn.DataTable.isDataTable( '.adsearch' ) ) {
                tablename.destroy();
            }            
            $('.billreg_detail_body').html(contract);
            $('table.table.adsearch tfoot:visible th').not('.excludesearch').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class="form-control" placeholder="Search ' + title + '" autocomplete="false" />');
            });
            $('table.table.adsearch tfoot:visible').insertBefore('table.table.adsearch thead:visible');
            basicdatatable('.adsearch');
            $('.loader').hide();
        }
    });
});
function getbill()
{
    var billno = $('#billno').val();
    // alert(billno);
    $.ajax({
        type: "POST",
        url: '/bill_ragister/getbillsauda2',
        dataType: 'json',
        data: {
            billno: billno,
        },
        success: function (data) {
            if (data['success'] == true) {
                var bill = data['hhtml'];
                var sauda2 = data['sauda2'];
                var bldate = '<input type="text" class="form-control" name="bldate"';
                for (let i = 0; i < sauda2.length; i++)
                {
                    var filterstartdate = moment(sauda2[0]['bldate']).tz("Asia/Kolkata").format('DD/MM/YYYY');
                    bldate+='value="'+filterstartdate+'"';
                }
                bldate+='>';
                var blfromdate = '<input type="text" class="form-control" name="blfromdate"';
                for (let i = 0; i < sauda2.length; i++)
                {
                    var filterform = moment(sauda2[0]['blfromdate']).tz("Asia/Kolkata").format('DD/MM/YYYY');
                    blfromdate+='value="'+filterform+'"';
                }
                blfromdate+='>';
                var bltodate = '<input type="text" class="form-control" name="bltodate"';
                for (let i = 0; i < sauda2.length; i++)
                {
                    var filterform = moment(sauda2[0]['bltodate']).tz("Asia/Kolkata").format('DD/MM/YYYY');
                    bltodate+='value="'+filterform+'"';
                }
                bltodate+='>';
                var partyname = '<input type="text" class="form-control" name="partyname"';
                for (let i = 0; i < sauda2.length; i++)
                {
                    if(sauda2[0]['pcode']!=null)partyname+='value="'+sauda2[0]['pcode']['party_name']+'"';
                    else partyname+='value=""';
                    // console.log(sauda2[0]['pcode']['party_name'])
                    // 
                }
                partyname+='>';
            }
            if ( $.fn.DataTable.isDataTable( '.adsearch' ) ) {
                tablename.destroy();
            }           
            $('.billview_detail_body').html(bill);
            $('#bldate').html(bldate);
            $('#blfromdate').html(blfromdate);
            $('#bltodate').html(bltodate);
            $('#partyname').html(partyname);
            $('table.table.adsearch tfoot:visible th').not('.excludesearch').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class="form-control" placeholder="Search ' + title + '" autocomplete="false" />');
            });
            $('table.table.adsearch tfoot:visible').insertBefore('table.table.adsearch thead:visible');
            basicdatatable('.adsearch');
            $('.loader').hide();
        }
    });
}
$(document).on("click", "#dealfiltersubmit", function (event) {
    event.preventDefault();
    $('.loader').show();
    var period = $('#contractrange').val();
    var start_date = period.substr(0,10);
    var end_date = period.substr(14,10);
    var sl_code = $('#sl_code').val();
    var sb_code = $('#sbcode').val();
    var br_code = $('#brcode').val();
    var bb_code = $('#bbcode').val();
    var sl_brok = $("input[name='formfilter']:checked").val();
    $.ajax({
        type: "POST",
        url: '/deal_register/contractdetail',
        dataType: 'json',
        data: {
            start_date: start_date,
            end_date: end_date,
            sl_code: sl_code,
            sb_code: sb_code,
            br_code: br_code,
            bb_code: bb_code,
            sl_brok: sl_brok,
        },
        success: function (data) {
            if (data['success'] == true) {
                var contract = data['hhtml'];
            }
            if ( $.fn.DataTable.isDataTable( '.adsearch' ) ) {
                tablename.destroy();
            }            
            $('.deal_detail_body').html(contract);
            $('table.table.adsearch tfoot:visible th').not('.excludesearch').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class="form-control" placeholder="Search ' + title + '" autocomplete="false" />');
            });
            $('table.table.adsearch tfoot:visible').insertBefore('table.table.adsearch thead:visible');
            basicdatatable('.adsearch');
            $('.loader').hide();
        }
    });
});

////deal entry
var s = 0;
var member = s + 1;
var limit = 1000;
$(document).on('click', '.addworksheet', function () {
    lstidx = $("input[name*='cntr']").length + 1;
    member = lstidx;
    if (s == limit) {
        alert("You have reached the limit of adding " + s + " inputs");
    } else {;
        $.ajax({
            type: 'POST',
            url: '/worksheet_entry/productname',
            dataType: 'json',
            
            success: function (data) {
                if (data['success']) {
                    var product = data['product'];
                    var newdiv = document.createElement('div');
                    new_div = "<tr class='contract_wrapper' id='rohit" + lstidx + "'>";
                    new_div += '<td>';
                    new_div += '<input type="hidden" name="cntr" id="cntr'+lstidx+'" value="'+lstidx+'">';
                    new_div += '<select name="work_sheet_group['+lstidx+'][w_pname]" class="form-control selectproductfocus productplace" style="width:162px" onchange="getproduct('+lstidx+')" id="wpname'+lstidx+'" placeholder="Select Product">';
                    new_div += '<option value=""></option>';
                    for (let i = 0 ; i < product.length; i++)
                    {
                        new_div += '<option value="'+product[i]['_id']+'">'+product[i]['prdt_desc']+'</option>';

                    }
                    new_div += '</td>';
                    new_div += '<td id="innerqty'+lstidx+'">';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][in_qty]"oninput="calc('+lstidx+')"';
                    new_div += 'id="inqty'+lstidx+'"';
                    new_div += 'class="form-control " style="width: 142px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td id="cmblprt'+lstidx+'">';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][perc_cbm]"';
                    new_div += 'id="perccbm'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 135px;text-align: -webkit-right;"';
                    new_div += ' required>';
                    new_div += '</td>';                
                    new_div += ' <td id="orqtytrtr'+lstidx+'">';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][or_qty]"';
                    new_div += 'id="orqty'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 92px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td id="wcostrtrt'+lstidx+'">';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_cost]"';
                    new_div += 'id="wcost'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 87px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_profit]"';
                    new_div += 'id="wprofit'+lstidx+'" value="10"  oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control "style="width: 72px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_profitamt]"';
                    new_div += 'id="wprofitamt'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control" style="width: 92px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';                    
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_sellprice]"';
                    new_div += 'id="wsellprice'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 84px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    // new_div += '<td>';
                    // new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_doller]"';
                    // new_div += 'id="wdoller'+lstidx+'" oninput="calc('+lstidx+')"';
                    // new_div += 'class="form-control " style="width: 102px;text-align: -webkit-right;"';
                    // new_div += 'required>';
                    // new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_sellpriceD]"';
                    new_div += 'id="wsellpriceD'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control "style="width: 115px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_boxpricedoller]"';
                    new_div += 'id="boxpricedoller'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 129px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    // new_div += ' <td>';
                    // new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_totaFr]"';
                    // new_div += 'id="wtotaFr'+lstidx+'" oninput="calc('+lstidx+')"';
                    // new_div += 'class="form-control " style="width: 102px;text-align: -webkit-right;"';
                    // new_div += 'required>';
                    // new_div += '</td>';
                    new_div += '<td id="boxpercontainer'+lstidx+'">';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_boxperC]"';
                    new_div += 'id="wboxperC'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control "style="width: 142px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_boxperFR]"';
                    new_div += 'id="perbxfrghtrs'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control "style="width: 142px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_boxperFD]"';
                    new_div += 'id="wboxperFD'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 132px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    // new_div += '<td>';
                    // new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_overseasFPB]"';
                    // new_div += 'id="woverseasFPB'+lstidx+'" oninput="calc('+lstidx+')"';
                    // new_div += 'class="form-control "  style="width: 162px;text-align: -webkit-right;"';
                    // new_div += 'required>';
                    // new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_finalb]"';
                    new_div += 'id="wfinalb'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control "  style="width: 152px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_finalc]"';
                    new_div += 'id="wfinalc'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 87px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_fobAmt]"';
                    new_div += 'id="wfobAmt'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 108px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][w_cnfAmt]"';
                    new_div += 'id="wcnfAmt'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control "  style="width: 112px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][tot_cbm]"';
                    new_div += 'id="totelcbm'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control " style="width: 102px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="work_sheet_group['+lstidx+'][fr_cbm]"';
                    new_div += 'id="frcbm'+lstidx+'" oninput="calc('+lstidx+')"';
                    new_div += 'class="form-control  amountfocus"  style="width: 112px;text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += "<td> <a data-repeater-delete='inner-field-"+lstidx+"' onclick='delemrn("+lstidx+")' data-brand-index='" + member + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    // new_div += "<td> <a  onclick='delemrn("+lstidx+")'  class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#contract_div");
                    s++;
                    lstidx--;
                    member++;
                    $(".productplace").select2({
                        placeholder: "Select Product",
                        allowClear: true,
                    });
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                }
            }
        });
    
    }
});
//Cash/Bank Entry
function delemrn(index){
    $("#rohit"+index).remove();
}

var n= 0;
var membern = n + 1;
var limitn = 1000;
$(document).on('click', '.addcashbank', function () {
    lstidx = $("input[name*='cashtrn']").length + 1;
    membern = lstidx;
    if (n == limitn) {
        alert("You have reached the limit of adding " + n + " inputs");
    } else {
        
                    var newdiv = document.createElement('div');
                    new_div = "<tr class='contract_wrapper' id='rohit" + lstidx + "'>";
                    new_div +='<td>';
                   new_div +='<input type="hidden" name="cashtrn" value="'+lstidx+'" id="cashtrn '+lstidx+'"';
                   new_div +='class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                   new_div +='<select name="cashac_name" id="cashac_name" class="form-control productplace selectproductfocus cashacname">';
                   new_div +='<option value=""></option>';
                   new_div +='</select>';
                   
                    new_div +='</td>'; 
                    new_div +='<td>';
                    new_div +='<input type="text" name="cash_chequeno" id="cashchequeno'+lstidx+'"';
                    new_div +='class="form-control" style="text-align: -webkit-right;"';
                    new_div +='/>';
                    new_div +='</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="cash_chequedate"';
                    new_div +='id="cashchequedate'+lstidx+'"';
                    new_div +='class="form-control datepicker" autocomplete="off" style="text-align: -webkit-right;"';
                    new_div +='/>';
                    new_div +='</td>';
                    new_div +='<td>';
                    new_div +='<input type="number" name="cash_amount"   required oninput="calcashbank('+lstidx+')"';
                    new_div +='id="cashamount'+lstidx+'"';
                    new_div +='class="form-control" style="text-align: -webkit-right;"';
                    new_div +='/>';
                    new_div +='</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="cash_narrone"';
                    new_div +='id="cashnarrone'+lstidx+'"';
                    new_div +='class="form-control"  style="text-align: -webkit-right;"';
                    new_div +='>';
                    new_div +='</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="cash_narrtwo"';
                    new_div +='id="cashnarrtwo'+lstidx+'" ';
                    new_div +='class="form-control amountfocus" style="text-align: -webkit-right;"';
                    new_div +='/>';
                    new_div +='</td>';
                    
                    new_div += "<td> <a data-repeater-delete='inner-field-"+lstidx+"' data-brand-index='" + membern + "' class='cashentry-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#contract_div");
                    n++;
                    lstidx--;
                    membern++;
                    $('.cashacname').select2({
                        placeholder: 'Please Select Account Name',
                        allowClear: true,
                        // minimumInputLength: 3,
                        ajax:{
                            type: "GET",
                            url: '/cash_bank/accountname',
                            dataType: 'json',
                            data: function (term) {
                                return {
                                    term: term
                                };
                            },            
                            success: function (data) {
                            },
                        },
                        templateResult: formatcity,
                        // templateSelection: formatcity,
                        escapeMarkup: function (m) { return m; }
                    });
                    $('.datepicker').datepicker({ format : 'dd/mm/yyyy', autoclose: true,});
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
         
    
    }
});

$(document).on('click', '.addjournal', function () {
    lstidx = $("input[name*='jourtrn']").length + 1;
    membern = lstidx;
   
    if (n == limitn) {
        alert("You have reached the limit of adding " + n + " inputs");
    } else {
                    var newdiv = document.createElement('div');
                    new_div = "<tr class='contract_wrapper' id='rohit" + lstidx + "'>";
                    new_div +='<td>';
                    new_div +='<input type="hidden" name="jourtrn" value="'+lstidx+'" id="jourtrn '+lstidx+'"';
                    new_div +='class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                    new_div +='<select class="form-control  productplace selectproductfocus prbank select2"  name="cash_type" onchange="checkvalue('+lstidx+')" id="cashtypejv'+lstidx+'" placeholder="Select Type"';
                    new_div +='style="width: 150px;text-align: -webkit-right;">';
                    new_div +='<option value=""></option>';
                    new_div +='<option value="Debit" >Debit</option>';
                    new_div +='<option value="Credit">Credit</option>';
                    new_div +='</select>';
                    new_div +='</td>'; 
                    new_div +='<td>';
                    new_div +='<select name="cashac_name" id="cashac_name'+lstidx+'" class="form-control cashac_namejv"';
                    new_div +='required>';
                    new_div +=' <option value=""></option>';
                    new_div +='</select>';
                    new_div +='</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="cash_debitamount"  value="0" required oninput="journal('+lstidx+')"';
                    new_div +='id="cashamountjv'+lstidx+'"';
                    new_div +='class="form-control" style="text-align: -webkit-right;"';
                    new_div +='/>';
                    new_div +='</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="cash_creditamount"  value="0" required oninput="journal('+lstidx+')"';
                    new_div +='id="cashamountcr'+lstidx+'"';
                    new_div +='class="form-control" style="text-align: -webkit-right;"';
                    new_div +='/>';
                    new_div +='</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="cash_narrone"';
                    new_div +='id="cashremark'+lstidx+'"';
                    new_div +='class="form-control"  style="text-align: -webkit-right;"';
                    new_div +='>';
                    new_div +='</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="cash_narrtwo"';
                    new_div +='id="cashnarrtwo'+lstidx+'" ';
                    new_div +='class="form-control amountfocus" style="text-align: -webkit-right;"';
                    new_div +='/>';
                    new_div +='</td>';

                    new_div += "<td> <a data-repeater-delete='inner-field-"+lstidx+"' data-brand-index='" + membern + "' class='cashentry-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#contract_div");
                    n++;
                    lstidx--;
                    membern++;
                    $(".productplace").select2({
                        placeholder: "Select type",
                        allowClear: true,
                    });
                    $('.cashac_namejv').select2({
                        placeholder: 'Please Select Account Name',
                        allowClear: true,
                        ajax:{
                            type: "GET",
                            url: '/journal_entry/journalname',
                            dataType: 'json',
                            data: function (term) {
                                return {
                                    term: term
                                };
                            },            
                            success: function (data) {
                            },
                        },
                        templateResult: formatcity,
                        escapeMarkup: function (m) { return m; }
                    });
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
    
    }
});

function DubAlert(){
    if($("#dubalert").val() != ''){
        alert('Dublicate');
    }
}

var v = 1;
var memberp = v + 1;
var limitp = 1000;
$(document).on('click', '.adddomesinvoice', function () {

    lstidx = $("input[name*='dsirn']").length + 1;
    var values = $("input[name='dsirn']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    
    if (v == limitp) {
        alert("You have reached the limit of adding " + v + " inputs");
    } else {
        $.ajax({
            type: 'Get',
            url: '/domes_salesinvoice/productname',
            dataType: 'json',
            success: function (data) {
        
                if (data['success']) {
                    
                   var product = data['product'];
                   console.log(product)
                   var newdiv = document.createElement('div');
                   var  new_div = "<tr class='contract_wrapper' id='rohit"+ lstidx +"'>";
                    new_div += '<td>';
                    new_div += '<input type="hidden" name="dsirn" value="'+lstidx+'" id="dsirn'+lstidx+'" class="form-control" style="width: 102px;text-align: -webkit-right;">';
                            
                    new_div += '<input type="text" name="sales_or_group['+lstidx+'][so_sno]" id="dsiitem_no'+lstidx+'" value="'+lstidx+'" class="form-control prodtiem selectproductfocus" style="text-align: -webkit-right;" />';
                    new_div += ' </td>';         
                    new_div += '<td>';
                    new_div += '<select  name="sales_or_group['+lstidx+'][so_disc]"id="dsiname'+lstidx+'" onchange="getdsi('+lstidx+')" class="form-control selectproductfocus productplace  productitem select2" style="width:100%" placeholder="Select Product">'; 
                    new_div += '<option value=""></option>';
                    for (let i = 0; i < product.length; i++)
                    {
                        new_div += '<option value="'+product[i]['_id']+'">'+product[i]['Fg_Des']+'</option>';

                    }
                    new_div += '</select>';

                    // new_div += '</td>';
                    // new_div += '<td id="innerqtydsi'+lstidx+'">';
                    // new_div += '<input required type="number" name="sales_or_group['+lstidx+'][outin_qty]" id="inqtydsi'+lstidx+'" oninput="caldsi('+lstidx+')"  class="form-control" style="text-align: -webkit-right;"/>';
                    // new_div += '</td>';
                   
                    new_div += '<td>';
                    new_div += ' <input type="hidden" name="sales_or_group['+lstidx+'][so_div]" id="so_div'+lstidx+'">';
                    new_div += '<input type="text" required name="sales_or_group['+lstidx+'][so_qty]" id="orqtydsi'+lstidx+'" oninput="caldsi('+lstidx+')" class="form-control" style="text-align: -webkit-right;" />';
                    new_div += '</td>';
                  
                    new_div += '<td id="ratedsi'+lstidx+'">';
                    new_div += '<input type="number" required name="sales_or_group['+lstidx+'][ocrate]" id="dsirate'+lstidx+'" oninput="caldsi('+lstidx+')" class="form-control" style="text-align: -webkit-right;">';
                    new_div += '</td>';
                    
                    new_div += '<td>';
                    new_div += '<input type="number" required name="sales_or_group['+lstidx+'][so_discount]" id="dsidiscount'+lstidx+'" oninput="caldsi('+lstidx+')" class="form-control amountfocus"  style="text-align: -webkit-right;" value="'+0+'">';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][so_gstrate]"';
                    new_div += 'id="so_gstrate'+lstidx+'" oninput="caldsi('+lstidx+')"';
                    new_div += 'class="form-control" style="text-align: -webkit-right;"';
                    new_div += '>';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][so_taxvalue]"';
                    new_div += 'id="so_taxvalue'+lstidx+'" oninput="calgst('+lstidx+')"';
                    new_div += 'class="form-control" style="text-align: -webkit-right;"';
                    new_div += 'value="'+0+'">';
                    new_div += '</td>';

                    new_div += '<td>';
                    new_div += '<input type="number" name="sales_or_group['+lstidx+'][total_amt]" id="dsitotalAmount'+lstidx+'" oninput="caldsi('+lstidx+')" class="form-control" style="text-align: -webkit-right;" readonly="true"/>';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][so_beforedisamt]"';
                    new_div += 'id="so_beforedisamt'+lstidx+'" oninput="caldsi('+lstidx+')"';
                    new_div += ' >';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][so_afttaxvalue]"';
                    new_div += 'id="so_afttaxvalue'+lstidx+'" oninput="caldsi('+lstidx+')"';
                    new_div += 'value="'+0+'">';
                    new_div += '</td>';
                 
                    new_div += "<td><a data-repeater-delete='inner-field-"+lstidx+"' data-brand-index='" + memberp + "' class='contract-delete-btn' style='cursor:pointer;width: 4em'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#contract_div");
                    v++;
                    lstidx++;
                    memberp++;
                    $(".productitem").select2({
                        placeholder: "Select Product",
                        allowClear: true,
                    });
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                }
            }
        });
    
    }
});

////Proforma Entry
// var v = 1;
// var memberp = v + 1;
// var limitp = 1000;
// $(document).on('click', '.addproforma', function () {

//     lstidx = $("input[name*='cntr']").length + 1;
//     memberp = lstidx;
    
//     if (v == limitp) {
//         alert("You have reached the limit of adding " + v + " inputs");
//     } else {
//         $.ajax({
//             type: 'Get',
//             url: '/profarma/productname',
//             dataType: 'json',
//             success: function (data) {
        
//                 if (data['success']) {
                    
//                      var product = data['product'];
//                     var newdiv = document.createElement('div');
//                     new_div = "<tr class='contract_wrapper' id='rohit"+ lstidx +"'>";
//                     new_div += '<td>';
//                     // new_div += '<input type="hidden" name="cntr" id="cntr'+lstidx+'" value="'+lstidx+'">';
//                     new_div += '<select name="pro_forma_group['+lstidx+'][item_name]"';
//                     new_div += 'class="form-control selectproductfocus productplace"';
//                     new_div += 'style="width:162px"  onchange="getproduct('+lstidx+')" id="iname'+lstidx+'" placeholder="Select Item">';
//                     new_div += '<option value=""></option>';
//                     for (let i = 0; i < product.length; i++)
//                     {
//                         new_div += '<option value="'+product[i]['_id']+'">'+product[i]['prdt_desc']+'</option>';

//                     }
//                     new_div += '</select>';
//                     new_div += '</td>';
//                     new_div += '<td id="innerqty'+lstidx+'">';
//                     new_div += '<input type="text" name="pro_forma_group['+lstidx+'][in_qty]"oninput="calc('+lstidx+')"';
//                     new_div += 'id="inqty'+lstidx+'"';
//                     new_div += 'class="form-control " style="width: 100%;text-align: -webkit-right;"';
//                     new_div += 'required>';
//                     new_div += '</td>';
//                     // new_div += '<td id="cmblprt'+lstidx+'">';
//                     // new_div += '<input type="text" name="pro_forma_group['+lstidx+'][perc_cbm]"';
//                     // new_div += 'id="perccbm'+lstidx+'" oninput="calc('+lstidx+')"';
//                     // new_div += 'class="form-control " style="width: 142px;text-align: -webkit-right;"';
//                     // new_div += ' required>';
//                     // new_div += '</td>';                
//                     new_div += '<td>';
//                     new_div += '<input type="text" name="pro_forma_group['+lstidx+'][or_qty]"';
//                     new_div += 'id="orqty'+lstidx+'" oninput="calc('+lstidx+')"';
//                     new_div += 'class="form-control " style="width: 100%;text-align: -webkit-right;"';
//                     new_div += 'required>';
//                     new_div += '</td>';
//                     new_div += '<td>';
//                     new_div += '<input type="text" name="pro_forma_group['+lstidx+'][cbm_perItem]"';
//                     new_div += 'id="cbmperItem'+lstidx+'" oninput="calc('+lstidx+')"';
//                     new_div += 'class="form-control "style="width:100%;text-align: -webkit-right;"';
//                     new_div += 'required>';
//                     new_div += '</td>';
//                     new_div += '<td>';
//                     new_div += '<input type="text" name="pro_forma_group['+lstidx+'][carton_price]"';
//                     new_div += 'id="cartonPrice'+lstidx+'" oninput="calc('+lstidx+')"';
//                     new_div += 'class="form-control" style="width:100%;text-align: -webkit-right;"';
//                     new_div += 'required>';
//                     new_div += '</td>';                    
//                     new_div += '<td>';
//                     new_div += '<input type="text" name="pro_forma_group['+lstidx+'][total_amount]"';
//                     new_div += 'id="totalAmount'+lstidx+'" oninput="calc('+lstidx+')"';
//                     new_div += 'class="form-control " style="width:100%;text-align: -webkit-right;"';
//                     new_div += ' amountfocus>';
//                     new_div += '</td>';
                  
                    
//                     new_div += "<td><a data-repeater-delete='inner-field-"+lstidx+"' data-brand-index='" + memberp + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
//                     $(new_div).insertBefore("#contract_div");
//                     v++;
//                     lstidx--;
//                     memberp++;
//                     $(".productplace").select2({
//                         placeholder: "Select item",
//                         allowClear: true,
//                     });
//                     $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
//                 }
//             }
//         });
    
//     }
// });


$(document).on("click", ".cashentry-delete-btn", function () {
    var str = confirm('Are you sure you want to delete this element');
    if (str == true) {
        var parent_id = $(this).closest('.contract_wrapper').prop('id');
        $("#" + parent_id).remove();
        calcashbank(1);
    }
 
});
///SalesOrder Entry
var z = 1;
var membern = z+ 1;
var limitz = 1000;
$(document).on('click', '.addMrn', function () {
    lstidx = $("input[name*='buyrn']").length;
    // alert(lstidx)
    membern = lstidx;
    if (z== limitz) {
        alert("You have reached the limit of adding " + z + " inputs");
    } else {
        $.ajax({
            type: 'Get',
            url:'/mrn_challan/productname',
            dataType: 'json',
            success: function (data) {
                console.log(data)
               if (data['success']) {
                    var product = data['product'];
                    var newdiv = document.createElement('div');
                    new_div = "<tr class='contract_wrapper' id='rohit"+ lstidx +"'>";
                    new_div += '<td>';
                    new_div += '<input type="hidden" name="buyrn" id="buyrn'+lstidx+'" value="'+lstidx+'">';
                    new_div += '<select name="sales_or_group['+lstidx+'][so_disc]"';
                    new_div += 'class="form-control selectproductfocus productplace"';
                    new_div += 'onchange="getpriMrn('+lstidx+')" id="descpso'+lstidx+'" placeholder="Select Item"  style="text-align: -webkit-right;">';
                    new_div += '<option value=""></option>';
                    for (let i = 0; i < product.length; i++)
                    {
                        new_div += '<option value="'+product[i]['_id']+'">'+product[i]['Rm_Des']+'</option>';

                    }
                    new_div += '</select>';
                    new_div += '</td>';
                    new_div += '<td id="orderpriceso'+lstidx+'">';
                    new_div += '<input type="number" name="sales_or_group['+lstidx+'][order_price]"oninput="calsalesorder('+lstidx+')"';
                    new_div += 'id="orderprice'+lstidx+'"';
                    new_div += 'class="form-control " style="text-align: -webkit-right;"';
                    new_div += 'required>';

                    new_div += ' <td  id="pacincso'+lstidx+'" style="display: none">';
                    new_div += '<input type="text" name="sales_or_group['+lstidx+'][unit]"';
                    new_div += 'id="sopacpercarten'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control " style="text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';

                    new_div += '<td style="display:none;" id="sodivpso'+lstidx+'">';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][so_div]"';
                    new_div += 'id="so_div'+lstidx+'"  oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control" style="text-align: -webkit-right;"/>';                      
                    new_div += '</td>';

                    new_div += '<td>';
                    new_div += '<input type="number" name="sales_or_group['+lstidx+'][so_qty]"';
                    new_div += 'id="so_qty'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control "style="text-align: -webkit-right;"';
                    new_div += '>';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][po_qty_blc]"';
                    new_div += 'id="po_qty_blc'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control "style="text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][po_qty_exe]"';
                    new_div += 'id="po_qty_exe'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control "style="text-align: -webkit-right;"';
                    new_div += 'value="'+0+'">';
                    new_div += '</td>';

                    new_div += '<td>';
                    new_div += '<input type="number" name="sales_or_group['+lstidx+'][so_discount]"';
                    new_div += 'id="so_discount'+lstidx+'" value=0 oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control amountfocus" style="text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';                    
                    new_div += '<td>';
                    new_div +='<input type="hidden" name="sales_or_group['+lstidx+'][total_amt_before]" id="total_amt_before'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    new_div +='class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                    new_div += '<input type="number" name="sales_or_group['+lstidx+'][total_amt]"';
                    new_div += 'id="total_amt'+lstidx+'" oninput="calsalesorder('+lstidx+')" readonly="true"';
                    new_div += 'class="form-control amountfocus" style="text-align: -webkit-right;"';
                    new_div += ' amountfocus>';
                    new_div += '</td>';
                  
                    new_div += "<td><a data-repeater-delete='inner-field-"+lstidx+"'  data-brand-index='" +membern + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    // new_div += "<td><a data-brand-index='" + membern + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#contract_div_po");
                    z++;
                    lstidx--;
                    membern++;
                    $(".productplace").select2({
                        placeholder: "Select Product",
                        allowClear: true,
                    });
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                }
            }
        });
    
    }
});

function purdel(index){
    $("#salesorder_row-"+index).remove();
    // setTimeout(function() { 
        // var lstidx = $("input[name*='buyrn']").length;
        // alert(lstidx) 
    // }, 500); 
    // for(var i=0; i<=lstidx-1; i++){
    //     $('#buyrn'+i).attr('id', 'buyrn');
    // }
    
}

$(document).on('click', '.addSales', function () {
    lstidx = $("input[name*='buyrn']").length + 1;
    
    membern = lstidx;
    
    if (z== limitz) {
        alert("You have reached the limit of adding " + z + " inputs");
    } else {
        $.ajax({
            type: 'Get',
            url:'/sales_order_mast/productname',
            dataType: 'json',
            success: function (data) {
               if (data['success']) {
                    
                     var product = data['product'];
                    var newdiv = document.createElement('div');
                    new_div = "<tr class='contract_wrapper' id='rohit"+ lstidx +"'>";
                    new_div += '<td>';
                    new_div += '<input type="hidden" name="buyrn" id="buyrn'+lstidx+'" value="'+lstidx+'">';
                    new_div += '<select name="sales_or_group['+lstidx+'][so_fg_disc]"';
                    new_div += 'class="form-control selectproductfocus productplace"';
                    new_div += 'onchange="getdec('+lstidx+')" id="descpso'+lstidx+'" placeholder="Select Item"  style="text-align: -webkit-right;">';
                    new_div += '<option value=""></option>';
                    for (let i = 0; i < product.length; i++)
                    {
                        new_div += '<option value="'+product[i]['_id']+'">'+product[i]['Fg_Des']+'</option>';

                    }
                    new_div += '</select>';
                    new_div += '</td>';
                    new_div += '<td id="orderpriceso'+lstidx+'">';
                    new_div += '<input type="text" name="sales_or_group['+lstidx+'][order_price]"oninput="calsalesorder('+lstidx+')"';
                    new_div += 'id="orderprice'+lstidx+'"';
                    new_div += 'class="form-control " style="text-align: -webkit-right;"';
                    new_div += 'required>';
                    // new_div += ' <td  id="pacincso'+lstidx+'">';
                    // new_div += '<input type="text" name="sales_or_group['+lstidx+'][sopacper_carten]"';
                    // new_div += 'id="sopacpercarten'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    // new_div += 'class="form-control " style="text-align: -webkit-right;"';
                    // new_div += 'required>';
                    // new_div += '</td>';
                    new_div += '<td style="display:none;" id="sodivpso'+lstidx+'">';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][so_div]"';
                    new_div += 'id="so_div'+lstidx+'"  oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control" style="text-align: -webkit-right;"/>';                      
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="sales_or_group['+lstidx+'][so_qty]"';
                    new_div += 'id="so_qty'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control "style="text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';
                    new_div += '<td>';
                    new_div += '<input type="text" name="sales_or_group['+lstidx+'][so_discount]"';
                    new_div += 'id="so_discount'+lstidx+'" value=0 oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control" style="text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '</td>';                    
                    new_div += '<td>';
                    new_div +='<input type="hidden" name="sales_or_group['+lstidx+'][total_amt_before]" id="total_amt_before'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    new_div +='class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                    new_div += '<input type="text" name="sales_or_group['+lstidx+'][total_amt]"';
                    new_div += 'id="total_amt'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    new_div += 'class="form-control amountfocus" style="text-align: -webkit-right;"';
                    new_div += ' amountfocus>';
                    new_div += '</td>';
                  
                    
                    new_div += "<td><a data-repeater-delete='inner-field-"+lstidx+"'  data-brand-index='" + membern + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#contract_div");
                    z++;
                    lstidx--;
                    membern++;
                    $(".productplace").select2({
                        placeholder: "Select Product",
                        allowClear: true,
                    });
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                }
            }
        });
    
    }
});



$(document).on('click', '.addSalesOrder', function () {
    lstidx = $("input[name*='buyrn']").length;
    var values = $("input[name='buyrn']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    membern = lstidx;
    
    if (z== limitz) {
        alert("You have reached the limit of adding " + z + " inputs");
    } else {
        $.ajax({
            type: 'Get',
            url:'/sales_order_mast/productname',
            dataType: 'json',
            success: function (data) {
               if (data['success']) {
                    
                    var product = data['product'];
                    var newdiv = document.createElement('div');
                    new_div = "<tr class='contract_wrapper' id='rohit"+ lstidx +"'>";
                    new_div += '<td>';
                    new_div += '<input type="hidden" name="buyrn" id="buyrn'+lstidx+'" value="'+lstidx+'">';
                    new_div += '<select name="sales_or_group['+lstidx+'][so_fg_disc]"';
                    new_div += 'class="form-control selectproductfocus productplace"';
                    new_div += 'onchange="getdec('+lstidx+')" id="descpso'+lstidx+'" placeholder="Select Item"  style="text-align: -webkit-right; width: 100%">';
                    new_div += '<option value=""></option>';
                    for (let i = 0; i < product.length; i++)
                    {
                        new_div += '<option value="'+product[i]['_id']+'">'+product[i]['Fg_Des']+'</option>';
                    }
                    new_div += '</select>';
                    new_div += '</td>';

                    // new_div += '<td id="orderpriceso'+lstidx+'">';
                    // new_div += '<input type="text" name="sales_or_group['+lstidx+'][order_price]"oninput="calslsorder('+lstidx+')"';
                    // new_div += 'id="orderprice'+lstidx+'"';
                    // new_div += 'class="form-control " style="text-align: -webkit-right;"';
                    // new_div += 'required>';

                    // new_div += ' <td  id="pacincso'+lstidx+'">';
                    // new_div += '<input type="text" name="sales_or_group['+lstidx+'][sopacper_carten]"';
                    // new_div += 'id="sopacpercarten'+lstidx+'" oninput="calslsorder('+lstidx+')"';
                    // new_div += 'class="form-control " style="text-align: -webkit-right;"';
                    // new_div += 'required>';
                    // new_div += '</td>';

            

                    new_div += '<td>';
                    new_div += '<input type="number" name="sales_or_group['+lstidx+'][so_qty]"';
                    new_div += 'id="so_qty'+lstidx+'" oninput="calslsorder('+lstidx+')"';
                    new_div += 'class="form-control amountfocus" style="text-align: -webkit-right;"';
                    new_div += 'required>';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][so_qty_blc]"';
                    new_div += 'id="so_qty_blc'+lstidx+'" oninput="calslsorder('+lstidx+')"';
                    new_div += 'class="form-control "style="text-align: -webkit-right;"';
                    new_div += '>';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][so_qty_exe]"';
                    new_div += 'id="so_qty_exe'+lstidx+'" oninput="calslsorder('+lstidx+')"';
                    new_div += 'class="form-control "style="text-align: -webkit-right;"';
                    new_div += 'value="'+0+'">';
                    new_div += '<input type="hidden" name="sales_or_group['+lstidx+'][gst]"';
                    new_div += 'id="so_div'+lstidx+'"  oninput="calslsorder('+lstidx+')"';
                    new_div += 'class="form-control" style="text-align: -webkit-right;"/>';
                    new_div += '</td>';

                    // new_div += '<td>';
                    // new_div += '<input type="text" name="sales_or_group['+lstidx+'][so_discount]"';
                    // new_div += 'id="so_discount'+lstidx+'" value=0 oninput="calslsorder('+lstidx+')"';
                    // new_div += 'class="form-control" style="text-align: -webkit-right;"';
                    // new_div += 'required>';
                    // new_div += '</td>';                    
                    // new_div += '<td>';

                    // new_div +='<input type="hidden" name="sales_or_group['+lstidx+'][total_amt_before]" id="total_amt_before'+lstidx+'" oninput="calsalesorder('+lstidx+')"';
                    // new_div +='class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                    // new_div += '<input type="text" name="sales_or_group['+lstidx+'][total_amt]"';
                    // new_div += 'id="total_amt'+lstidx+'" oninput="calslsorder('+lstidx+')" readonly="true"' ; 
                    // new_div += 'class="form-control amountfocus" style="text-align: -webkit-right;"';
                    // new_div += ' amountfocus>';
                    // new_div += '</td>';
                  
                    
                    new_div += "<td><a onclick='deletesalesorder("+lstidx+")' data-repeater-delete='inner-field-"+lstidx+"'  data-brand-index='" + membern + "' class='aa-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#contract_div");
                    z++;
                    lstidx--;
                    membern++;
                    $(".productplace").select2({
                        placeholder: "Select Product",
                        allowClear: true,
                    });
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                }
            }
        });
    }
});
function deletesalesorder(id){
    var strconfirm = confirm('Are you sure you want to delete this element');
    // var lstidx = $("input[name*='dsirn']").length;
    console.log(lstidx,id)
    if(strconfirm == true)$("#rohit"+id).remove();
}


// 16-03-2019


$(document).ready(function(){
    $('#sl_code').change(function(){
        sval =  $(this).val();
        bval =  $("#brcont").val();
        if(sval == bval){
            alert("oops same");
        }
    })
})




// demo Datatable for col reorder

$(document).ready(function(){
    dattable = jQuery('#demotable').DataTable({
        // "dom": "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
        "dom": "<'row'<'col-md-4 col-sm-12 col-xs-12'B><'col-md-4 col-sm-6 col-xs-12'l><'col-md-4 col-sm-6 col-xs-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
        "lengthChange": true,
        "processing": false,
        "serverSide": false,
        "colReorder": true, 
        "autoWidth": false,
        "columnDefs": [
            { "width": "80px", "targets": 0 },
            { "width": "60%", "targets": 1 },
            { "width": "20%", "targets": 2 }
        ],
        "buttons": [
            {
                extend: 'excel',
                className: 'btn-default btn-excel',
                exportOptions: {
                    columns: "thead th:not(.noExport)"
                }
            },
            {
                extend: 'pdf',
                className: 'btn-default btn-pdf',
                exportOptions: {
                    modifier: {
                        page: 'current'
                    },
                    columns: "thead th:not(.noExport)"
                },
                orientation:'landscape',
                customize: function ( doc ) {
                    // Splice the image in after the header, but before the table
                    doc.content.splice( 0, 0, {
                        margin: [ 0, 0, 0, 12 ],
                        alignment: 'center',
                        // image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA9lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wUmlnaHRzPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvcmlnaHRzLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxN2FlYzk4Yy0zMjgzLTExZGEtYTIzOC1lM2UyZmFmNmU5NjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUYzODU5RTYxNDNCMTFFNTlBNjVCOTY4NjAwQzY5QkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUYzODU5RTUxNDNCMTFFNTlBNjVCOTY4NjAwQzY5QkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODgwMTE3NDA3MjA2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'
                        text:'Soft Sauda'
                    } );
                },
                messageBottom:'Exported from Soft Sauda'
            },
            {
                extend: 'print',
                className: 'btn-default btn-print',
                exportOptions: {
                    columns: "thead th:not(.noExport)"
                }
            },
        ],
        "order": [],
        "columnDefs":[{
               "targets": [0],
               "orderable": false,
               "searchable": false
            }
        ],
        initComplete: function () {
            var api = this.api();

            // Apply the search
            api.columns().every(function () {
                var that = this;

                $('input', this.footer()).on('keyup change', function () {
                    if (that.search() !== this.value) {
                        that
                            .search(this.value)
                            .draw();
                    }
                });
            });
        },
        footerCallback: function(row, data, start, end, display) {
            var api = this.api();   
            api.columns('.sum', {
              page: 'all'
            }).every(function() {
              var asum = this
                .data()
                .reduce(function(a, b) {
                  var x = parseFloat(a) || 0;
                  var y = parseFloat(b) || 0;
                  return x + y;
                }, 0);
                $('div.gtotal', this.footer()).html("Grand Total = " + asum);
            });

          }
    })

})

$(document).on('click', '.delete-category', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/category_mast/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/category_mast/category_mast';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });

});
$(document).on('click', '.edit_category_tax_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/category_tax_mast/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var category_tax_name = response['categorytax'].category_tax_name;
                var ctgid = response['categorytax']._id;
                $('.category_tax_name').val(category_tax_name);
                $('#formheading span').text('EDIT');
                $("#addtaxcategory").attr("action", "/category_tax_mast/edit_category_tax/" + ctgid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete-category-tax', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/category_tax_mast/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/category_tax_mast/category_tax_mast';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });

});
$(document).on('keyup', '.dealdlvrd_no', function(){
    var id = $(this).attr('data-id');
    var dealdlvrdsrno = $(this).attr('data-dealdlvrdsrno');
    var dealdlvrdno = $('#dealdlvrdno'+dealdlvrdsrno).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/dealdlvrd_no/'+id,
        dataType:'json',
        data:
        {
            dealdlvrdno: dealdlvrdno,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
}); 
$(document).on('keyup', '.dealbill_no', function(){
    var id = $(this).attr('data-id');
    var dealbillnodsrno = $(this).attr('data-dealbillnodsrno');
    var dealbillno = $('#dealbillno'+dealbillnodsrno).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/dealbill_no/'+id,
        dataType:'json',
        data:
        {
            dealbillno: dealbillno,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
}); 
$(document).on('keyup', '.dealfright_no', function(){
    var id = $(this).attr('data-id');
    var dealfrightnodsrno = $(this).attr('data-dealfrightnodsrno');
    var dealfrightno = $('#dealfrightno'+dealfrightnodsrno).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/dealfright_no/'+id,
        dataType:'json',
        data:
        {
            dealfrightno: dealfrightno,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
}); 
$(document).on('keyup', '.dealloory_no', function(){
    var id = $(this).attr('data-id');
    var dealloorynodsrno = $(this).attr('data-dealloorynodsrno');
    var deallooryno = $('#deallooryno'+dealloorynodsrno).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/dealloory_no/'+id,
        dataType:'json',
        data:
        {
            deallooryno: deallooryno,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
}); 
$(document).on('keyup', '.deallorydrive_no', function(){
    var id = $(this).attr('data-id');
    var deallorydrivenodsrno = $(this).attr('data-deallorydrivenodsrno');
    var deallorydriveno = $('#deallorydriveno'+deallorydrivenodsrno).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/deallorydrive_no/'+id,
        dataType:'json',
        data:
        {
            deallorydriveno: deallorydriveno,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
});
$(document).on('keyup', '.pament_amt', function(){
    var id = $(this).attr('data-id');
    var pamentamtdsrno = $(this).attr('data-pamentamtdsrno');
    var datebargamt = $(this).attr('data-amt');
    
    var pamentamt = $('#pamentamt'+pamentamtdsrno).val();
    
    $('#dealrecvamt'+pamentamtdsrno).val(Number(datebargamt)-Number(pamentamt));
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/pament_amt/'+id,
        dataType:'json',
        data:
        {
            pamentamt: pamentamt,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
});
$(document).on('keyup', '.dealrecv_amt', function(){
    var id = $(this).attr('data-id');
    var datadealrecvamt = $(this).attr('data-dealrecvamt');
    var dealrecvamt = $('#dealrecvamt'+datadealrecvamt).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/dealrecv_amt/'+id,
        dataType:'json',
        data:
        {
            dealrecvamt: dealrecvamt,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
});
$(document).on('keyup', '.pament_amt', function(){
    var id = $(this).attr('data-id');
    var pamentamtdsrno = $(this).attr('data-pamentamtdsrno');
    var pamentamt = $('#pamentamt'+pamentamtdsrno).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/pament_amt/'+id,
        dataType:'json',
        data:
        {
            pamentamt: pamentamt,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
});
$(document).on('keyup', '.payment_no', function(){
    var id = $(this).attr('data-id');
    var paymentnodsrno = $(this).attr('data-paymentnodsrno');
    var paymentno = $('#paymentno'+paymentnodsrno).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/payment_no/'+id,
        dataType:'json',
        data:
        {
            paymentno: paymentno,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
});
$(document).on('keyup', '.payment_narrtion', function(){
    var id = $(this).attr('data-id');
    var paymentnarrtionsrno = $(this).attr('data-paymentnarrtionsrno');
    var paymentnarrtion = $('#paymentnarrtion'+paymentnarrtionsrno).val();
    //console.log(commit_date)
    $.ajax({
        type:'POST',
        url: '/deal_register/payment_narrtion/'+id,
        dataType:'json',
        data:
        {
            paymentnarrtion: paymentnarrtion,
        },
        success: function(response) {
            if(response['success'] == true) {
                   

            }
        }
    })
});
$(".admincheckbox").click(function(){
    var table = $(this).parents("table");
    if($(this).is(":checked")){
        table.find('input[type="checkbox"]').prop("checked",true);
    }
    else{
        table.find('input[type="checkbox"]').prop("checked",false);
    }
})
$(".save-dealentry").submit(function(ev){
    //alert('rohit');
    ev.preventDefault();
    if($(this).closest('form').valid()){
        var data = $(this).closest('form').serialize();
        $.ajax({
            url:'/deal_entry/add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            if(dat.success == true)
            {
                window.location.href='/deal_entry/deal_entry';
            }
            else
            {
                swal({
                    title: "Deal Entry",
                    text: "Seller Name And Bill Number Already Exists",
                    icon: "error",
                    timer: 2000,
                    buttons: false
                    }) 
            }
            }
        })
    }
})
$(document).on("click", "#reportfiltersubmit", function () {
    $('.loader').show();
    var period = $('#contractrange').val();
    var start_date = period.substr(0,10);
    var end_date = period.substr(14,10);
    var checkvaluname = $("input[name='formfilter']:checked").val();
    var partygroup = $('#partygroup').val();
    var partycategorytax = $('#partycategorytax').val();
    var partycategory = $('#partycategory').val();
    $.ajax({
        type: "POST",
        url: '/sauda_report/getlist',
        dataType: 'json',
        data: {
            start_date: start_date,
            end_date: end_date,
            partygroup: partygroup,
            partycategorytax: partycategorytax,
            partycategory: partycategory,
            checkvaluname: checkvaluname,
        },
        success: function (data) {
            if (data['success'] == true) {
                var saudalist = data['hhtml'];
            }
            $('.sauda_detail_body').html(saudalist);
            dattable = jQuery('#demotable').DataTable({
                // "dom": "<'row' <'col-md-12'B>><'row'<'col-md-6 col-sm-12'l><'col-md-6 col-sm-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
                "dom": "<'row'<'col-md-4 col-sm-12 col-xs-12'B><'col-md-4 col-sm-6 col-xs-12'l><'col-md-4 col-sm-6 col-xs-12'f>r><'table-scrollable't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
                "lengthChange": true,
                "processing": false,
                "serverSide": false,
                "colReorder": true, 
                "autoWidth": false,
                "columnDefs": [
                    { "width": "80px", "targets": 0 },
                    { "width": "60%", "targets": 1 },
                    { "width": "20%", "targets": 2 }
                ],
                "buttons": [
                    {
                        extend: 'excel',
                        className: 'btn-default btn-excel',
                        exportOptions: {
                            columns: "thead th:not(.noExport)"
                        }
                    },
                    {
                        extend: 'pdf',
                        className: 'btn-default btn-pdf',
                        exportOptions: {
                            modifier: {
                                page: 'current'
                            },
                            columns: "thead th:not(.noExport)"
                        },
                        orientation:'landscape',
                        customize: function ( doc ) {
                            // Splice the image in after the header, but before the table
                            doc.content.splice( 0, 0, {
                                margin: [ 0, 0, 0, 12 ],
                                alignment: 'center',
                                // image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA9lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wUmlnaHRzPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvcmlnaHRzLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxN2FlYzk4Yy0zMjgzLTExZGEtYTIzOC1lM2UyZmFmNmU5NjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUYzODU5RTYxNDNCMTFFNTlBNjVCOTY4NjAwQzY5QkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUYzODU5RTUxNDNCMTFFNTlBNjVCOTY4NjAwQzY5QkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODgwMTE3NDA3MjA2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'
                                text:'Soft Sauda'
                            } );
                        },
                        messageBottom:'Exported from Soft Sauda'
                    },
                    {
                        extend: 'print',
                        className: 'btn-default btn-print',
                        exportOptions: {
                            columns: "thead th:not(.noExport)"
                        }
                    },
                ],
                "order": [],
                "columnDefs":[{
                       "targets": [0],
                       "orderable": false,
                       "searchable": false
                    }
                ],
                initComplete: function () {
                    var api = this.api();
        
                    // Apply the search
                    api.columns().every(function () {
                        var that = this;
        
                        $('input', this.footer()).on('keyup change', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                },
                footerCallback: function(row, data, start, end, display) {
                    var api = this.api();   
                    api.columns('.sum', {
                      page: 'all'
                    }).every(function() {
                      var asum = this
                        .data()
                        .reduce(function(a, b) {
                          var x = parseFloat(a) || 0;
                          var y = parseFloat(b) || 0;
                          return x + y;
                        }, 0);
                        $('div.gtotal', this.footer()).html("Total = " + asum);
                    });
        
                  }
            })
            $('.loader').hide();
        }
    });
});
$(document).on('click', '.edit_product_tax_btn', function () {
    var prdtid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/product_tax_mast/' + prdtid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var product_tax_name = response['producttax'].product_tax_name;
                var prdtid = response['producttax']._id;
                $('.product_tax_name').val(product_tax_name);
                $('#formheading span').text('EDIT');
                $("#addtaxproduct").attr("action", "/product_tax_mast/edit_category_tax/" + prdtid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete-product-tax', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/product_tax_mast/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/product_tax_mast/product_tax_mast';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });

});

// $('.getprdt').select2({
//     placeholder: 'Please select Product',
//     allowClear: true,
//     ajax:{
//         type: "GET",
//         url: '/contract_sauda/getproductname',
//         dataType: 'json',
//         data: function (term) {
//             return {
//                 term: term
//             };
//         },            
//         success: function (data) {
//             console.log(data)
//         },
//     },
//     // processResults: function (data) {
//     //     console.log(data);
//     //     return {
//     //         results: data.format
//     //     };
//     // },
//     // templateResult: formatcity,
//     // templateSelection: formatcity,
//     escapeMarkup: function (m) { return m; }
// });
$(document).on("click", "#dealentryfiltersubmit", function (event) {
    event.preventDefault();
    $('.loader').show();
    var period = $('#contractrange').val();
    var start_date = period.substr(0,10);
    var end_date = period.substr(14,10);
    var sl_code = $('#sl_code').val();
    var sb_code = $('#sbcode').val();
    var br_code = $('#brcode').val();
    var bb_code = $('#bbcode').val();
    var sl_brok = $("input[name='formfilter']:checked").val();
    $.ajax({
        type: "POST",
        url: '/deal-register-2/contractdetail',
        dataType: 'json',
        data: {
            start_date: start_date,
            end_date: end_date,
            sl_code: sl_code,
            sb_code: sb_code,
            br_code: br_code,
            bb_code: bb_code,
            sl_brok: sl_brok,
        },
        success: function (data) {
            if (data['success'] == true) {
                var contract = data['hhtml'];
            }
            if ( $.fn.DataTable.isDataTable( '.adsearch' ) ) {
                tablename.destroy();
            }            
            $('.deal_detail_body').html(contract);
            $('#product_detail_table tfoot th').not('.excludesearch').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" class="form-control" placeholder="Search ' + title + '" autocomplete="false" />');
            });
             $('#product_detail_table tfoot').insertBefore('#product_detail_table thead');
            var table;
            table = $('.product_detail_table').DataTable({
                "dom": "<'row'<'col-md-4 col-sm-12 col-xs-12'B><'col-md-4 col-sm-6 col-xs-12'l><'col-md-4 col-sm-6 col-xs-12'f>r><'table-scrollable table-responsive't><'row'<'col-md-5 col-sm-12'i><'col-md-7 col-sm-12'p>>",
                "lengthChange": true,
                "colReorder": true,
                // "ajax": "",
                "buttons": [
                    {
                        extend: 'excel',
                        className: 'btn-default btn-excel'
                    },
                    {
                        extend: 'pdf',
                        className: 'btn-default btn-pdf'
                    },
                    {
                        extend: 'print',
                        className: 'btn-default btn-print'
                    },
                ],
                "columnDefs": [
                    {
                        "className": "actioncell",
                        "orderable": false,
                        "searchable": false,
                        "sortable": false,
                        "targets": [0]
                    }
                ],
                initComplete: function () {
                    var api = this.api();
                    api.columns().every(function () {
                        var that = this;
        
                        $('input', this.footer()).on('keyup change', function () {
                            if (that.search() !== this.value) {
                                that
                                    .column($(this).parent().index()+':visible')
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                }
            });
            $('.loader').hide();
        }
    });
});
$(document).on('click', '.edit_rawtypmast_tbtn', function () {
    var cityid = $(this).attr('data-id');
    $('.loader').show();
    // alert(cityid)
    // alert(brandid);
    $.ajax({
        type: 'GET',
        url: '/raw_mat_typ_mast/' + cityid,
        dataType: 'json',
        success: function (response) {

            // alert(response);
            if (response['success'] == true) {
                // //console.log(response);
                var type_descr = response['raw_mat_typ_mast']. type_descr;
                var rawid = response['raw_mat_typ_mast']._id;
                var type_Code = response['raw_mat_typ_mast'].type_Code;
               $('.Description').val(type_descr);
                $('.Code').val(type_Code);
                $("#rawmatmst").attr("action", "/raw_mat_typ_mast/edit_raw_mat/" + rawid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.delete_rawtypemast_btn', function () {
    // $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/raw_mat_typ_mast/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/raw_mat_typ_mast/raw_mat_typ_mast';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
})
$(document).on('click', '.edit_rmstsub_btn', function () {
    var cityid = $(this).attr('data-id');
    $('.loader').show();
    // alert(cityid)
    // alert(brandid);
    $.ajax({
        type: 'GET',
        url: '/raw_mat_sub_typ_mast/' + cityid,
        dataType: 'json',
        success: function (response) {

            // alert(response);
            if (response['success'] == true) {
                // //console.log(response);
                var sub_descr = response['raw_mast'].sub_descr;
                var rawid = response['raw_mast']._id;
                var sub_Code = response['raw_mast'].sub_Code;
               $('.Description').val(sub_descr);
                $('.Code').val(sub_Code);
                $("#rawmatmst").attr("action", "/raw_mat_sub_typ_mast/edit_raw_sub/" + rawid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    })
})


    $(document).on('click', '.delete_rmstsub_btn', function () {
        // $('.loader').show();
        let id = $(this).attr('data-id');
        swal({
            icon:'warning',
            title: "Sure",
            text:'Are you sure you want to delete it?',
            buttons: ["Cancel","Confirm"],
            dangerMode:true
        }).then((willDelete) => {
            if (willDelete) {
                $.ajax({
                    type: 'DELETE',
                    url: '/raw_mat_sub_typ_mast/' + id,
                    success: function (response) {
                        // $('.loader').hide();
                        window.location.href = '/raw_mat_sub_typ_mast/raw_mat_sub_typ_mast';
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            }
          });
    });
    $(document).on('click', '.edit_loc_mast', function () {
        var cityid = $(this).attr('data-id');
        $('.loader').show();
        // alert(cityid)
        // alert(brandid);
        $.ajax({
            type: 'GET',
            url: '/gowdown_location_mast/' + cityid,
            dataType: 'json',
            success: function (response) {
    
                // alert(response);
                if (response['success'] == true) {
                    // //console.log(response);
                   
                    var location_name = response['gowdown_mast'].location_name;
                    var rawid = response['gowdown_mast']._id;
                    var row_no = response['gowdown_mast'].row_no;
                    var rack_no = response['gowdown_mast'].rack_no;
                    var qty_cap = response['gowdown_mast'].qty_cap;
                    var remark = response['gowdown_mast'].remark;
                    
                   $('.location_name').val(location_name);
                   $('.rack_no').val(rack_no);
                   $('.row_no').val(row_no);
                    $('.qty_cap').val(qty_cap);
                    $('.remark').val(remark);
                    $("#rawmatmst").attr("action", "/gowdown_location_mast/edit_location/" + rawid);
                } else {
                    $('.branddanger').html(response['message']);
                    $('.branddanger').show();
                    $('.brandsuccess').hide();
                }
                $('.loader').hide();
            },
            error: function (err) {
                console.log(err);
            }
        })
    })
        $(document).on('click', '.delete_loc_mast', function () {
            // $('.loader').show();
            let id = $(this).attr('data-id');
            swal({
                icon:'warning',
                title: "Sure",
                text:'Are you sure you want to delete it?',
                buttons: ["Cancel","Confirm"],
                dangerMode:true
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        type: 'DELETE',
                        url: '/gowdown_location_mast/' + id,
                        success: function (response) {
                            // $('.loader').hide();
                            window.location.href = '/gowdown_location_mast/gowdown_location_mast';
                            $('.loader').hide();
                        },
                        error: function (err) {
                            console.log(err);
                        }
                    });
                }
              });
        });
    
        // $(document).on('click', '.edit_mat_mast', function () {
        //     var cityid = $(this).attr('data-id');
        //     alert(cityid);
        //     $('.loader').show();
        //     // alert(cityid)
        //     // alert(brandid);
        //     $.ajax({
        //         type: 'GET',
        //         url: '/raw_material_mast/' + cityid,
        //         dataType: 'json',
        //         success: function (response) {
        
        //             // alert(response);
        //             if (response['success'] == true) {
        //                 // //console.log(response);
        //                  var type = response['rawMat_mast'].type;
        //                 var rawid = response['rawMat_mast']._id;
        //                 var sub_type = response['rawMat_mast'].sub_type;
        //                 var descr_rm = response['rawMat_mast'].descr_rm;
        //                 var manu_rm = response['rawMat_mast'].manu_rm;
        //                 var min_stk = response['rawMat_mast'].min_stk;
        //                 var max_stack = response['rawMat_mast'].max_stack;
        //                 var qty_opening  = response['rawMat_mast'].qty_opening;
        //                 var lead_time = response['rawMat_mast'].lead_time;
        //                 var sku_rm = response['rawMat_mast'].sku_rm;
                        
        //                $('.type').val(type);
        //                $('.sub_type').val(sub_type);
        //                $('.descr_rm').val(descr_rm);
        //                 $('.manu_rm').val(manu_rm);
        //                 $('.min_stk').val(min_stk);
        //                 $('.max_stack').val(max_stack);
        //                 $('.qty_opening').val(qty_opening);
        //                 $('.lead_time').val(lead_time);
        //                 $('.qty_cap').val(qty_cap);
        //                 $('.sku_rm').val(sku_rm);
        //                 $("#rawmatmst").attr("action", "/gowdown_location_mast/edit_location/" + rawid);
        //             } else {
        //                 $('.branddanger').html(response['message']);
        //                 $('.branddanger').show();
        //                 $('.brandsuccess').hide();
        //             }
        //             $('.loader').hide();
        //         },
        //         error: function (err) {
        //             console.log(err);
        //         }
        //     })
        // })
        $(document).on('click', '.edit_mat_mast', function () {
            var ctgid = $(this).attr('data-id');
            $('.loader').show();
            $.ajax({
                type: 'GET',
                url: '/raw_material_mast/' + ctgid,
                dataType: 'json',
                success: function (response) {
                    if (response['success'] == true) {
                        // //console.log(response);
                       var type_descr = response['rawMat_mast'].type_descr;
                        var ctgid = response['rawMat_mast']._id;
                        var Rm_ProCode = response['rawMat_mast'].Rm_ProCode;
                        var Rm_Quality = response['rawMat_mast'].Rm_Quality;
                        var Rm_Sub_Qua = response['rawMat_mast'].Rm_Sub_Qua;
                        var Rm_Category = response['rawMat_mast'].Rm_Category;
                        var Rm_Unit = response['rawMat_mast'].Rm_Unit;
                        var Rm_ManuFac = response['rawMat_mast'].Rm_ManuFac;
                        var Rm_Des = response['rawMat_mast'].Rm_Des;
                        var Rm_OpStk  = response['rawMat_mast'].Rm_OpStk;
                        var Rm_Price = response['rawMat_mast'].Rm_Price;
                        var Rm_StRate = response['rawMat_mast'].Rm_StRate;
                        var Rm_StMin  = response['rawMat_mast'].Rm_StMin;
                        var Rm_StMax = response['rawMat_mast'].Rm_StMax;
                        var Rm_Lead = response['rawMat_mast'].Rm_Lead;
                        $('.type_descr').val(type_descr).trigger('change');
                       $('.Rm_ProCode').val(Rm_ProCode);
                       $('.Rm_Quality').val(Rm_Quality).trigger('change');
                        $('.Rm_Sub_Qua').val(Rm_Sub_Qua).trigger('change');
                        $('.Rm_Category').val(Rm_Category).trigger('change');
                        $('.Rm_Unit').val(Rm_Unit).trigger('change');
                        $('.Rm_ManuFac').val(Rm_ManuFac).trigger('change');
                        $('.Rm_Des').val(Rm_Des);
                        $('.Rm_OpStk').val(Rm_OpStk);
                         $('.Rm_Price').val(Rm_Price);
                         $('.Rm_StRate').val(Rm_StRate);
                         $('.Rm_StMin').val(Rm_StMin);
                         $('.Rm_StMax').val(Rm_StMax);
                         $('.Rm_Lead').val(Rm_Lead);

                        $(".Rm_ProCode").focus()
                        $("#addcategory").attr("action", "/raw_material_mast/edit_mat_mast/" + ctgid);
                    } else {
                        $('.branddanger').html(response['message']);
                        $('.branddanger').show();
                        $('.brandsuccess').hide();
                    }
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        });

        $(document).on('click', '.edit_tax_mast', function () {
            var ctgid = $(this).attr('data-id');
            $('.loader').show();
            $.ajax({
                type: 'GET',
                url: '/tax_mast/' + ctgid,
                dataType: 'json',
                success: function (response) {
                    if (response['success'] == true) {
                        // //console.log(response);
                       
                        var ctgid = response['tax_mast']._id;
                        var tx_Thead = response['tax_mast'].tx_Thead;
                        var tx_TDSAC = response['tax_mast'].tx_TDSAC;
                        var tx_ScCode = response['tax_mast'].tx_ScCode;
                        var tx_TDS = response['tax_mast'].tx_TDS;
                        var tx_GST = response['tax_mast'].tx_GST;
                        
                        var tx_SGSTR = response['tax_mast'].tx_SGSTR;
                        var tx_SGSTP  = response['tax_mast'].tx_SGSTP;
                        var tx_CGSTR = response['tax_mast'].tx_CGSTR;
                        var tx_CGSTP = response['tax_mast'].tx_CGSTP;
                        var tx_IGSTR = response['tax_mast'].tx_IGSTR;
                        var tx_IGSTP  = response['tax_mast'].tx_IGSTP;
                        
                        $('.tx_TDSAC').val(tx_TDSAC).trigger('change');
                       $('.tx_Thead').val(tx_Thead);
                       
                        $('.tx_ScCode').val(tx_ScCode);
                        $('.tx_TDS').val(tx_TDS);
                         $('.tx_GST').val(tx_GST);
                         $('.tx_SGSTR').val(tx_SGSTR).trigger('change');
                        $('.tx_SGSTP').val(tx_SGSTP).trigger('change');
                        $('.tx_CGSTR').val(tx_CGSTR).trigger('change');
                        $('.tx_CGSTP').val(tx_CGSTP).trigger('change');
                        $('.tx_IGSTR').val(tx_IGSTR).trigger('change');
                        $('.tx_IGSTP').val(tx_IGSTP).trigger('change');
                      

                        $(".tx_Thead").focus()
                        $("#addcategory").attr("action", "/tax_mast/tax_mast_update/" + ctgid);
                    } else {
                        $('.branddanger').html(response['message']);
                        $('.branddanger').show();
                        $('.brandsuccess').hide();
                    }
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        });

        $(document).on('click', '.delete_tax_mast', function () {
            // $('.loader').show();
            let id = $(this).attr('data-id');
            swal({
                icon:'warning',
                title: "Sure",
                text:'Are you sure you want to delete it?',
                buttons: ["Cancel","Confirm"],
                dangerMode:true
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        type: 'DELETE',
                        url: '/tax_mast/' + id,
                        success: function (response) {
                            // $('.loader').hide();
                            window.location.href = '/tax_mast/tax_mast';
                            $('.loader').hide();
                        },
                        error: function (err) {
                            console.log(err);
                        }
                    });
                }
              });
        });


            
$(document).on('click', '.delete-rawmat', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/raw_material_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Raw Material Master",
                    text: "This Raw Material Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/raw_material_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/raw_material_mast/raw_material_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});
        
            $(document).on('click', '.su_edit_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/stock_unit_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            var ctgid = response['Stock_Unit']._id;
                            var vhpxskuunit = response['Stock_Unit']._id;
                             var sku_name  = response['Stock_Unit'].SKUName;
                            var sku_symbol = response['Stock_Unit'].SKUSymbol;
                            var no_of_dec = response['Stock_Unit'].NoOfDecimal;
                            $('.sku_name').val(sku_name);
                            $('.vhpxskuunit').val(vhpxskuunit);
                           $('.sku_symbol').val(sku_symbol);
                           $('.no_of_dec').val(no_of_dec);
                           $('.sku_name').focus();
                            $("#stockunit").attr("action", "/stock_unit_mast/su_update/" + ctgid);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });
                $(document).on('click', '.su_delete_btn', function () {
                    // $('.loader').show();
                    let id = $(this).attr('data-id');
                    swal({
                        icon:'warning',
                        title: "Sure",
                        text:'Are you sure you want to delete it?',
                        buttons: ["Cancel","Confirm"],
                        dangerMode:true
                    }).then((willDelete) => {
                        if (willDelete) {
                            $.ajax({
                                type: 'DELETE',
                                url: '/stock_unit_mast/' + id,
                                success: function (response) {
                                    // $('.loader').hide();
                                    window.location.href = '/stock_unit_mast/stock_unit_mast';
                                    $('.loader').hide();
                                },
                                error: function (err) {
                                    console.log(err);
                                }
                            });
                        }
                      });
                });
                
            $(document).on('click', '.edit_ptype_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/party_type_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            var vhpxcountry = response['ptyp_mast']._id;
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Code = response['ptyp_mast'].Code;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Code').val(ptype_Code);
                           $('.vhpxcountry').val(vhpxcountry);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/party_type_mast/edit_ptype_mat/" + vhpxcountry);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });
            $(document).on('click', '.edit_category_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/category_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            var ctgid = response['ptyp_mast']._id;
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Code = response['ptyp_mast'].Code;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Code').val(ptype_Code);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/category_mast/edit_category_mast/" + ctgid);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });
            $(document).on('click', '.edit_brand_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/brand_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            var ctgid = response['ptyp_mast']._id;
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Code = response['ptyp_mast'].Code;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Code').val(ptype_Code);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/brand_mast/edit_brand_mast/" + ctgid);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });

            $(".update_gsetup").click(function(ev){
                ev.preventDefault();
             
                if($(this).closest('form').valid()){
                  //  alert("data")
                    var data = $(this).closest('form').serialize();
                    //alert(data)
                    $.ajax({
                        url:'/supplier_mast/s_mast_add',
                        method:'POST',
                        dataType: 'json',
                        data:data,
                        success: function(dat){
                          // alert(dat)
                        // alert(dat.success);
                            if(dat.success == true){
                                $('#addcity').modal('hide');
                                swal({
                                        title: "Supplier",
                                        text: "Supplier Saved",
                                        icon: "success",
                                        timer: 2000,
                                        buttons: false
                                     
                                    }) 
                                    window.location.href = "/supplier_mast/supplier_mast";
                            }else{
                                swal({
                                        title: "Supplier",
                                        text: "Duplicate supplier with same city is not allowed",
                                        icon: "error",
                                        timer: 4000,
                                        buttons: false
                                    }) 
                            }
                        }
                    })
                }
            })


            $(document).on('click', '.edit_group_setup_btn', function () {
                var ctgid = $(this).attr('data-id');
                console.log(ctgid)
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/group_setup_mast/'+ctgid,
                    dataType: 'json',
                    success: function (response) {
                        console.log(response)
                        if (response['success'] == true) {
                            // //console.log(response);
                            var id = response['g_mast']._id;
                             var group  = response['g_mast'].group;
                            var garry = response['g_mast'].garry;
                            $('.group_id').val(id);
                           $('.group').val(group);
                           $('.garry').val(garry).trigger('change');
                        //    $('.ptype_descr').focus();
                        //    $("#ptypemast").attr("action", "/brand_mast/edit_brand_mast/" + ctgid);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });

            $(document).on('click', '.edit_product_master_btn1', function () {
                var ctgid = $(this).attr('data-id');
                console.log(ctgid)
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/product_master/'+ctgid,
                    dataType: 'json',
                    success: function (response) {
                        console.log(response)
                        if (response['success'] == true) {
                            // //console.log(response);
                            var id = response['p_mast']._id;
                             var product_name  = response['p_mast'].product_name;
                            var d_product = response['p_mast'].d_product;
                            var jobs = response['p_mast'].jobs;
                            $('.product_id').val(id);
                           $('.product_name').val(product_name);
                           $('.d_product').val(d_product);
                           $('.jobs').val(jobs).trigger('change');
                        //    $('.ptype_descr').focus();
                        //    $("#ptypemast").attr("action", "/brand_mast/edit_brand_mast/" + ctgid);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });
          
          
            $(document).on('click', '.edit_designation_agency_mast_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/designation_agency_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            var vhpxcountry = response['ptyp_mast']._id;
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Code = response['ptyp_mast'].Code;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Code').val(ptype_Code);
                           $('.vhpxcountry').val(vhpxcountry);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/designation_agency_mast/edit_designation_agency_mast/" + vhpxcountry);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });

            //edit sub quality master

            $(document).on('click', '.edit_sub_quality_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/sub_quality_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            // var ctgid = response['ptyp_mast']._id;
                            var vhpxcountry = response['ptyp_mast']._id
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Code = response['ptyp_mast'].Code;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Code').val(ptype_Code);
                           $('.vhpxcountry').val(vhpxcountry);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/sub_quality_mast/edit_sub_quality_mast/" + vhpxcountry);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });

            //end edit subquality master

            //edit quality master
            $(document).on('click', '.edit_quality_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/quality_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            // var ctgid = response['ptyp_mast']._id;
                            var vhpxcountry = response['ptyp_mast']._id
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Code = response['ptyp_mast'].Code;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Code').val(ptype_Code);
                           $('.vhpxcountry').val(vhpxcountry);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/quality_mast/edit_quality_mast/" + vhpxcountry);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });

            //end edit quality master


            //edit raw mat sub type master
            $(document).on('click', '.edit_rmstsub_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/raw_mat_sub_typ_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            // var ctgid = response['ptyp_mast']._id;
                            var vhpxcountry = response['raw_mast']._id
                             var sub_descr  = response['raw_mast'].sub_descr;
                            var sub_Code = response['raw_mast'].sub_Code;
                            $('.sub_descr').val(sub_descr);
                           $('.sub_Code').val(sub_Code);
                           $('.vhpxcountry').val(vhpxcountry);
                           $('.sub_descr').focus();
                           $("#ptypemast").attr("action", "/raw_mat_sub_typ_mast/edit_raw_sub/" + vhpxcountry);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });


            //end edit raw mat sub type master


            //edit category master
            $(document).on('click', '.edit_category_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/category_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            // var ctgid = response['ptyp_mast']._id;
                            var vhpxcountry = response['ptyp_mast']._id
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Code = response['ptyp_mast'].Code;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Code').val(ptype_Code);
                           $('.vhpxcountry').val(vhpxcountry);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/category_mast/edit_category_mast/" + vhpxcountry);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });

            //end edit category master


            //edit payment term master
            $(document).on('click', '.edit_payment_term_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/payment_term_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            console.log(response);
                            // var ctgid = response['ptyp_mast']._id;
                            var vhpxcountry = response['ptyp_mast']._id
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Days = response['ptyp_mast'].Days;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Days').val(ptype_Days);
                           $('.vhpxcountry').val(vhpxcountry);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/payment_term_mast/edit_payment_term_mast/" + vhpxcountry);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });


            //end edit payment term master
            
           
            $(document).on('click', '.edit_quality_btn', function () {
                var ctgid = $(this).attr('data-id');
                $('.loader').show();
                $.ajax({
                    type: 'GET',
                    url: '/quality_mast/' + ctgid,
                    dataType: 'json',
                    success: function (response) {
                        if (response['success'] == true) {
                            // //console.log(response);
                            var ctgid = response['ptyp_mast']._id;
                             var ptype_descr  = response['ptyp_mast'].Description;
                            var ptype_Code = response['ptyp_mast'].Code;
                            $('.ptype_descr').val(ptype_descr);
                           $('.ptype_Code').val(ptype_Code);
                           $('.ptype_descr').focus();
                           $("#ptypemast").attr("action", "/quality_mast/edit_quality_mast/" + ctgid);
                        } else {
                            $('.branddanger').html(response['message']);
                            $('.branddanger').show();
                            $('.brandsuccess').hide();
                        }
                        $('.loader').hide();
                    },
                    error: function (err) {
                        console.log(err);
                    }
                });
            });


// Delete Party Type
$(document).on('click', '.delete-partytype', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/party_type_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "PartyType Master",
                    text: "This Party Type Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/party_type_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/party_type_mast/party_type_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});



$(document).on('click', '.delete-category', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/category_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Category Master",
                    text: "This Category Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/category_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/category_mast/category_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});   


                $(document).on('click', '.delete_brand_btn', function () {
                    $('.loader').show();
                    let id = $(this).attr('data-id');
                    swal({
                        icon:'warning',
                        title: "Sure",
                        text:'Are you sure you want to delete it?',
                        buttons: ["Cancel","Confirm"],
                        dangerMode:true
                    }).then((willDelete) => {
                        if (willDelete) {
                            $.ajax({
                                type: 'DELETE',
                                url: '/brand_mast/' + id,
                                success: function (response) {
                                    $('.loader').hide();
                                    window.location.href = '/brand_mast/brand_mast';
                                    $('.loader').hide();
                                },
                                error: function (err) {
                                    console.log(err);
                                }
                            });
                        }
                      });
                });


$(document).on('click', '.delete-quality', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/quality_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Quality Master",
                    text: "This Quality Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/quality_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/quality_mast/quality_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});    



$(document).on('click', '.delete-subquality', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/sub_quality_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Sub Quality Master",
                    text: "This Sub Quality Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/sub_quality_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/sub_quality_mast/sub_quality_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

}); 

$(document).on('click', '.delete-designation_agency_mast', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/designation_agency_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Designation Agency Master",
                    text: "This Designation Agency Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/designation_agency_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/designation_agency_mast/designation_agency_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

}); 



$(document).on('click', '.delete-paymentterm', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/payment_term_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Payment Term Master",
                    text: "This Payment Term Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/payment_term_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/payment_term_mast/payment_term_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

}); 


                $(document).on('click', '.delete_model_btn', function () {
                    $('.loader').show();
                    let id = $(this).attr('data-id');
                    swal({
                        icon:'warning',
                        title: "Sure",
                        text:'Are you sure you want to delete it?',
                        buttons: ["Cancel","Confirm"],
                        dangerMode:true
                    }).then((willDelete) => {
                        if (willDelete) {
                            $.ajax({
                                type: 'DELETE',
                                url: '/model_mast/' + id,
                                success: function (response) {
                                    // $('.loader').hide();
                                    window.location.href = '/model_mast/model_mast';
                                    $('.loader').hide();
                                },
                                error: function (err) {
                                    console.log(err);
                                }
                            });
                        }
                      });
                });
                $(document).on('click', '.edit_tm_btn', function () {
                    var ctgid = $(this).attr('data-id');
                    $('.loader').show();
                    $.ajax({
                        type: 'GET',
                        url: '/trans_mast/' + ctgid,
                        dataType: 'json',
                        success: function (response) {
                            if (response['success'] == true) {
                                // //console.log(response);
                                var ctgid = response['tm_mast']._id;
                                var vhpxtransac = response['tm_mast']._id;
                                 var tran_descr  = response['tm_mast'].tran_descr;
                                var tran_Code = response['tm_mast'].tran_Code;
                                $('.tran_descr').val(tran_descr);
                                $('.vhpxtransac').val(vhpxtransac);
                               $('.tran_Code').val(tran_Code);
                               $("#TMmast").attr("action", "/trans_mast/edit_tm/" + ctgid);
                            } else {
                                $('.branddanger').html(response['message']);
                                $('.branddanger').show();
                                $('.brandsuccess').hide();
                            }
                            $('.loader').hide();
                        },
                        error: function (err) {
                            console.log(err);
                        }
                    });
                });
                    $(document).on('click', '.delete_tm_btn', function () {
                        // $('.loader').show();
                        let id = $(this).attr('data-id');
                        swal({
                            icon:'warning',
                            title: "Sure",
                            text:'Are you sure you want to delete it?',
                            buttons: ["Cancel","Confirm"],
                            dangerMode:true
                        }).then((willDelete) => {
                            if (willDelete) {
                                $.ajax({
                                    type: 'DELETE',
                                    url: '/trans_mast/' + id,
                                    success: function (response) {
                                        // $('.loader').hide();
                                        window.location.href = '/trans_mast/trans_mast';
                                        $('.loader').hide();
                                    },
                                    error: function (err) {
                                        console.log(err);
                                    }
                                });
                            }
                          });
                    });

                    // edit district
                    $(document).on('click', '.edit_country_btn', function () {
                        var ctgid = $(this).attr('data-id');
                        $('.loader').show();
                        $.ajax({
                            type: 'GET',
                            url: '/district_mast/' + ctgid,
                            dataType: 'json',
                            success: function (response) {
                                console.log(response)
                                if (response['success'] == true) {
                                    // //console.log(response);
                                    var ctgid = response['c_mast']._id;
                                    var vhpxcountry = response['c_mast']._id;
                                     var DistrictName  = response['c_mast'].DistrictName;
                                    var StateName = response['c_mast'].StateName;
                                    var Population  = response['c_mast'].Population;
                                    var Area = response['c_mast'].Area;
                                    $('.DistrictName').val(DistrictName);
                                    $('.vhpxcountry').val(vhpxcountry);
                                    $('.Population').val(Population);
                                    $('.Area').val(Area);
                                   $('.StateName').val(StateName).trigger('change');
                                   $('.DistrictName').focus();
                                   $("#countrymast").attr("action", "/district_mast/edit_district/" + ctgid);
                                } else {
                                    $('.branddanger').html(response['message']);
                                    $('.branddanger').show();
                                    $('.brandsuccess').hide();
                                }
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    });

                    $(document).on('click', '.edit_employee_mast_btn', function () {
                        var ctgid = $(this).attr('data-id');
                        $('.loader').show();
                        $.ajax({
                            type: 'GET',
                            url: '/employee_mast/' + ctgid,
                            dataType: 'json',
                            success: function (response) {
                                console.log(response)
                                if (response['success'] == true) {
                                    // //console.log(response);
                                    var ctgid = response['c_mast']._id;
                                    var vhpxcountry = response['c_mast']._id;
                                     var EmployeeName  = response['c_mast'].EmployeeName;
                                     console.log(response['c_mast'].Joining);
                                    var Joining = response['c_mast'].Joining;
                                    var Designation  = response['c_mast'].Designation;
                                    var Salary = response['c_mast'].Salary;
                                    var Internal = response['c_mast'].Internal;
                                    $('.EmployeeName').val(EmployeeName);
                                    $('.vhpxcountry').val(vhpxcountry);
                                    $('.Joining').val(Joining);
                                    
                                   $('.Designation').val(Designation).trigger('change');
                                   $('.Salary').val(Salary);
                                   $('.Internal').val(Internal);
                                   $('.EmployeeName').focus();
                                   $("#employeemast").attr("action", "/employee_mast/edit_employee_mast/" + ctgid);
                                } else {
                                    $('.branddanger').html(response['message']);
                                    $('.branddanger').show();
                                    $('.brandsuccess').hide();
                                }
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    });


                  
                       
                    // Delete District
                    $(document).on('click', '.delete_district', function () {
                        $('.loader').show();
                        let id = $(this).attr('data-id');
                        $.ajax({
                            type: 'DELETE',
                            url: '/district_mast/confirm/' + id,
                            success: function (response) {
                                console.log(response)
                                if(response['success'] == "true"){
                                    swal({
                                        title: "District Master",
                                        text: "This District Is Used",
                                        icon: "warning",
                                        timer: 1000,
                                        buttons: false
                                     
                                    }) 
                                }
                                if(response['success'] == "false"){
                                    swal({
                                        icon:'warning',
                                        title: "Sure",
                                        text:'Are you sure you want to delete it?',
                                        buttons: ["Cancel","Confirm"],
                                        dangerMode:true
                                    }).then((willDelete) => {
                                        if (willDelete) {
                                            $.ajax({
                                                type: 'DELETE',
                                                url: '/district_mast/' + id,
                                                success: function (response) {
                                                    // $('.loader').hide();
                                                    window.location.href = '/district_mast/district_mast';
                                                    $('.loader').hide();
                                                },
                                                error: function (err) {
                                                    console.log(err);
                                                }
                                            });
                                        }
                                      });
                                }
                                // window.location.href = '/state_master/state_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    });  
                    
                     // edit employee
                    //  $(document).on('click', '.edit_employee_mast_btn', function () {
                    //     var ctgid = $(this).attr('data-id');
                    //     $('.loader').show();
                    //     $.ajax({
                    //         type: 'GET',
                    //         url: '/employee_mast/' + ctgid,
                    //         dataType: 'json',
                    //         success: function (response) {
                    //             console.log(response)
                    //             if (response['success'] == true) {
                    //                 // //console.log(response);
                    //                 // var ctgid = response['c_mast']._id;
                    //                 // var vhpxcountry = response['c_mast']._id;
                    //                  var EmployeeName  = response['c_mast'].EmployeeName;
                    //                  var Joining  = response['c_mast'].Joining;
                    //                 var Designation = response['c_mast'].Designation;
                    //                 var Salary  = response['c_mast'].Salary;
                    //                 var Internal = response['c_mast'].Internal;
                    //                 $('.EmployeeName').val(EmployeeName);
                    //                 // $('.vhpxcountry').val(vhpxcountry);
                    //                 $('.Joining').val(Joining);
                    //                 $('.Salary').val(Salary);
                    //                $('.Designation').val(Designation).trigger('change');
                    //                $('.Internal').val(Internal);
                    //                $('.EmployeeName').focus();
                    //                $("#countrymast").attr("action", "/employee_mast/edit_employee_mast/" + ctgid);
                    //             } else {
                    //                 $('.branddanger').html(response['message']);
                    //                 $('.branddanger').show();
                    //                 $('.brandsuccess').hide();
                    //             }
                    //             $('.loader').hide();
                    //         },
                    //         error: function (err) {
                    //             console.log(err);
                    //         }
                    //     });
                    // });

                    $(document).on('click', '.delete_employee_mast', function () {
                        $('.loader').show();
                        let id = $(this).attr('data-id');
                        $.ajax({
                            type: 'DELETE',
                            url: '/employee_mast/confirm/' + id,
                            success: function (response) {
                                console.log(response)
                                if(response['success'] == "true"){
                                    swal({
                                        title: "Employee Master",
                                        text: "This Employee Is Used",
                                        icon: "warning",
                                        timer: 1000,
                                        buttons: false
                                     
                                    }) 
                                }
                                if(response['success'] == "false"){
                                    swal({
                                        icon:'warning',
                                        title: "Sure",
                                        text:'Are you sure you want to delete it?',
                                        buttons: ["Cancel","Confirm"],
                                        dangerMode:true
                                    }).then((willDelete) => {
                                        if (willDelete) {
                                            $.ajax({
                                                type: 'DELETE',
                                                url: '/employee_mast/' + id,
                                                success: function (response) {
                                                    // $('.loader').hide();
                                                    window.location.href = '/employee_mast/employee_mast';
                                                    $('.loader').hide();
                                                },
                                                error: function (err) {
                                                    console.log(err);
                                                }
                                            });
                                        }
                                      });
                                }
                                // window.location.href = '/state_master/state_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                       
                    
                    });        
                    

                        $(document).on('click', '.edit_smast', function () {
                            var ctgid = $(this).attr('data-id');
                            $('.loader').show();
                            $.ajax({
                                type: 'GET',
                                url: '/supplier_mast/' + ctgid,
                                dataType: 'json',
                                success: function (response) {
                                    if (response['success'] == true) {
                                        // //console.log(response);
                                       
                                        var ctgid = response['s_mast']._id;
                                         var ac_name  = response['s_mast'].ac_name;
                                        var ac_add1 = response['s_mast'].ac_add1;
                                        var ac_opbal = response['s_mast'].ac_opbal;
                                        var ac_open_type = response['s_mast'].ac_open_type;
                                        var ac_groupname = response['s_mast'].ac_groupname;
                                        var ac_add2 = response['s_mast'].ac_add2;
                                        var ac_city = response['s_mast'].ac_city;
                                        var ac_phmob = response['s_mast'].ac_phmob;
                                        var ac_gstin = response['s_mast'].ac_gstin;
                                        var ac_bank = response['s_mast'].ac_bank; 
                                        // var bank_name = response['s_mast'].bank_name
                                       $('.ac_opbal').val(ac_opbal);
                                       $('.ac_add1').val(ac_add1);
                                    //    $('.bank_name').val(bank_name);
                                       $('.ac_open_type').val(ac_open_type).trigger('change');
                                       $('.ac_groupname').val(ac_groupname).trigger('change');
                                       $('.ac_add2').val(ac_add2);
                                       $('#ac_city').val(ac_city).trigger('change');
                                       $('.ac_phmob').val(ac_phmob);
                                       $('.ac_gstin').val(ac_gstin);
                                       $('.ac_bank').val(ac_bank).trigger('change');
                                       $("#suplliermaster").attr("action", "/supplier_mast/edit_smast/" + ctgid);
                                    } else {
                                        $('.branddanger').html(response['message']);
                                        $('.branddanger').show();
                                        $('.brandsuccess').hide();
                                    }
                                    $('.loader').hide();
                                },
                                error: function (err) {
                                    console.log(err);
                                }
                            });
                        });
                            $(document).on('click', '.delete_smast', function () {
                                // $('.loader').show();
                                let id = $(this).attr('data-id');
                                swal({
                                    icon:'warning',
                                    title: "Sure",
                                    text:'Are you sure you want to delete it?',
                                    buttons: ["Cancel","Confirm"],
                                    dangerMode:true
                                }).then((willDelete) => {
                                    if (willDelete) {
                                        $.ajax({
                                            type: 'DELETE',
                                            url: '/supplier_mast/' + id,
                                            success: function (response) {
                                                // $('.loader').hide();
                                                window.location.href = '/supplier_mast/supplier_mast';
                                                $('.loader').hide();
                                            },
                                            error: function (err) {
                                                console.log(err);
                                            }
                                        });
                                    }
                                  });
                            }); 

$(document).on('click', '.delete_customer_mast1', function () {
    // $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: ["Cancel","Confirm"],
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/customer11/' + id,
                success: function (response) {
                    // $('.loader').hide();
                    window.location.href = '/customer11/customer_list';
                    $('.loader').hide();
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
        });
}); 

                          
$(document).on('click', '.edit_group_mast', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/group_mast/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);group_type
                var ctgid = response['g_mast']._id;
                var vhpxgroup = response['g_mast']._id;
                    var gm_order  = response['g_mast'].Order;
                var sub_group = response['g_mast'].MainGroupName;
                var group_name = response['g_mast'].GroupName;
                var group_type = response['g_mast'].GroupType;
                var main_out = response['g_mast'].MaintainOs;
                var supp_gwt = response['g_mast'].Suppress;
                var Address = response['g_mast'].Address;
                var Ladger = response['g_mast'].Ledger;
                $('.gm_order').val(gm_order);
                $('.vhpxgroup').val(vhpxgroup);
                $('.sub_group').val(sub_group).trigger('change');
                $('.group_name').val(group_name);
                $('.group_type').val(group_type).trigger('change');
                $('.main_out').val(main_out).trigger('change');
                $('.supp_gwt').val(supp_gwt).trigger('change');
                $('.Address').val(Address).trigger('change');
                $('.Ladger').val(Ladger).trigger('change');
                $('.gm_order').focus();
                $("#groupMast").attr("action", "/group_mast/edit_gmast/" + ctgid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});



 $(document).on('click', '.delete-group', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/group_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Group Master",
                    text: "This Group Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/group_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/group_mast/group_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});    


$(document).on('click', '.edit_account_mast', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/account_mast/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                var ctgid = response['a_mast']._id;
                var ac_code  = response['a_mast'].ACCode;
                var ac_name = response['a_mast'].ACName;
                var OpBalance = response['a_mast'].OpBalance;
                var dbcr = response['a_mast'].dbcr;
                var ac_groupname = response['a_mast'].GroupName;
                var PanNumber = response['a_mast'].PanNumber;
                var Address1 = response['a_mast'].Address1;
                var CityName = response['a_mast'].CityName;
                var StateName = response['a_mast'].StateName;
                var Area = response['a_mast'].Area;
                var GSTIN = response['a_mast'].GSTIN; 
                var PartyType = response['a_mast'].PartyType;
                var CrLimit = response['a_mast'].CrLimit;
                var ac_iecno = response['a_mast'].ac_iecno;
                var ac_website = response['a_mast'].ac_website;
                var Email = response['a_mast'].Email;
                var ac_phoff = response['a_mast'].ac_phoff;
                var MobileNo = response['a_mast'].MobileNo;
                var ac_phres = response['a_mast'].ac_phres;
                var ac_phfax = response['a_mast'].ac_phfax;
                var ac_pincode = response['a_mast'].ac_pincode;
                
                
                $('#ac_name').val(ac_name);
                $('#ac_opbal').val(OpBalance);
                $('#ac_open_type').val(dbcr).trigger('change');
                if(ac_groupname!=null){
                    var grpnm = ac_groupname.GroupName;
                    var grpid = ac_groupname._id;
                }else{
                    var grpnm = '';
                    var grpid = '';
                }
                var option = new Option(grpnm, grpid, true, true);
                $('#ac_groupname').append(option).trigger('change');
                $('#ac_groupname').trigger({
                    type: 'select2:select',
                    params: {
                        data: {"id": grpid, "text" : grpnm }
                    }
                });
                //city
                if(CityName!=null){
                    var citynm = CityName.CityName;
                    var cityid = CityName._id;
                }else{
                    var citynm = '';
                    var cityid = '';
                }
                var optioncity = new Option(citynm, cityid, true, true);
                $('.city').append(optioncity).trigger('change');
                $('.city').trigger({
                    type: 'select2:select',
                    params: {
                        data: {"id": cityid, "text" : citynm }
                    }
                });
                //end city
                //state
                if(StateName!=null){
                    var stnm = StateName.StateName;
                    var stid = StateName._id;
                }else{
                    var stnm = '';
                    var stid = '';
                }
                var optionstte = new Option(stnm, stid, true, true);
                $('#state_name').append(optioncity).trigger('change');
                $('#state_name').trigger({
                    type: 'select2:select',
                    params: {
                        data: {"id": stid, "text" : stnm }
                    }
                });
                //end state
                //party typ
                if(PartyType!=null){
                    var prtynm = PartyType.Description;
                    var prtyid = PartyType._id;
                }else{
                    var prtynm = '';
                    var prtyid = '';
                }
                var optionprty = new Option(prtynm, prtyid, true, true);
                $('#ac_ptype').append(optionprty).trigger('change');
                $('#ac_ptype').trigger({
                    type: 'select2:select',
                    params: {
                        data: {"id": prtyid, "text" : prtynm }
                    }
                });
                //end party
                $('#ac_pan').val(PanNumber);
                $('#ac_code').val(ac_code);
                $('#ac_add1').val(Address1);
                $('#ac_area').val(Area);
                $('#ac_gstin').val(GSTIN);
                $('#ac_crelimit').val(CrLimit);
                $('#ac_iecno').val(ac_iecno);
                $('#ac_website').val(ac_website);
                $('#ac_email').val(Email);
                $('#ac_phoff').val(ac_phoff);
                $('#ac_phres').val(ac_phres);
                $('#ac_phmob').val(MobileNo);
                $('#ac_phfax').val(ac_phfax);
                $('#ac_pincode').val(ac_pincode);
                $("#accountMast").attr("action", "/account_mast/edit_amast/" + ctgid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});



$(document).on('click', '.delete-account', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/account_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Account Master",
                    text: "This Account Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/account_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/account_mast/account_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

}); 

                                    $(document).on('click', '.edit_transport_mast', function () {
                                        var ctgid = $(this).attr('data-id');
                                        $('.loader').show();
                                        $.ajax({
                                            type: 'GET',
                                            url: '/transport_mast/' + ctgid,
                                            dataType: 'json',
                                            success: function (response) {
                                                if (response['success'] == true) {
                                                   // //console.log(response);group_type
                                                    var ctgid = response['transportmast']._id;
                                                    var vhpxtransport = response['transportmast']._id;
                                                    var ac_name  = response['transportmast'].ac_name;
                                                    var ac_opbal = response['transportmast'].ac_opbal;
                                                    var ac_open_type = response['transportmast'].ac_open_type;
                                                    var ac_groupname = response['transportmast'].ac_groupname;
                                                    var ac_pan = response['transportmast'].ac_pan;
                                                    var ac_rmks = response['transportmast'].ac_rmks;
                                                    var ac_add1 = response['transportmast'].ac_add1;
                                                    var ac_city = response['transportmast'].ac_city;
                                                    var ac_state = response['transportmast'].ac_state;
                                                    var ac_cst = response['transportmast'].ac_cst;
                                                    var ac_gstin = response['transportmast'].ac_gstin; 
                                                    var ac_website = response['transportmast'].ac_website;
                                                    var ac_email = response['transportmast'].ac_email;
                                                    var ac_phoff = response['transportmast'].ac_phoff;
                                                    var ac_phres = response['transportmast'].ac_phres;
                                                    var ac_phmob = response['transportmast'].ac_phmob;
                                                    var ac_phfax = response['transportmast'].ac_phfax;
                                                    var ac_cont = response['transportmast'].ac_cont;
                                                    $('.ac_name').val(ac_name);
                                                    $('.vhpxtransport').val(vhpxtransport);
                                                   $('.ac_opbal').val(ac_opbal);
                                                   $('.ac_open_type').val(ac_open_type).trigger('change');
                                                   $('.ac_groupname').val(ac_groupname).trigger('change');
                                                   $('.ac_pan').val(ac_pan);
                                                   $('.ac_rmks').val(ac_rmks);
                                                   $('.ac_add1').val(ac_add1);
                                                   $('.ac_city').val(ac_city).trigger('change');
                                                   $('.ac_state').val(ac_state).trigger('change');
                                                   $('.ac_cst').val(ac_cst);
                                                   $('.ac_gstin').val(ac_gstin);
                                                   $('.ac_website').val(ac_website);
                                                   $('.ac_email').val(ac_email);
                                                   $('.ac_phoff').val(ac_phoff);
                                                   $('.ac_phres').val(ac_phres);
                                                   $('.ac_phmob').val(ac_phmob);
                                                   $('.ac_phfax').val(ac_phfax);
                                                   $('.ac_cont').val(ac_cont);
                                                   $("#transportmast").attr("action", "/transport_mast/edit_transport/" + ctgid);
                                                } else {
                                                    $('.branddanger').html(response['message']);
                                                    $('.branddanger').show();
                                                    $('.brandsuccess').hide();
                                                }
                                                $('.loader').hide();
                                            },
                                            error: function (err) {
                                                console.log(err);
                                            }
                                        });
                                    });
                                        $(document).on('click', '.delete_transport_mast', function () {
                                            // $('.loader').show();
                                            let id = $(this).attr('data-id');
                                            swal({
                                                icon:'warning',
                                                title: "Sure",
                                                text:'Are you sure you want to delete it?',
                                                buttons: ["Cancel","Confirm"],
                                                dangerMode:true
                                            }).then((willDelete) => {
                                                if (willDelete) {
                                                    $.ajax({
                                                        type: 'DELETE',
                                                        url: '/transport_mast/' + id,
                                                        success: function (response) {
                                                            // $('.loader').hide();
                                                            window.location.href = '/transport_mast/transport_mast';
                                                            $('.loader').hide();
                                                        },
                                                        error: function (err) {
                                                            console.log(err);
                                                        }
                                                    });
                                                }
                                              });
                                        }); 
$(document).on("keyup", "#ws_no", function () {
    // $(document).on("change.select2", "#br_code", function () {
    $("#delivery").show();
    $('.loader').show();
    var ws_no = $("#ws_no").val();
    $.ajax({
        type: 'GET',
        url: '/profarma/worksheetname',
        dataType: 'json',
        data: {
            vouc_code: ws_no
        },
        success: function (data) {
            // console.log(data);
            var i, j, result, sau;
            result='';
            if (data['success'] == true) {
                var workmast = data['workmast'];
                j = 0;
                for (i = 0; i < workmast.length; i++) {
                    var workmastgroup = workmast[i]['work_sheet_group'];
                    $.each(workmastgroup, function (index, value) {
                        j++;
                        result += '<tr>';
                        result += '<div id="delivery-' + index + '">';
                        result += '<td>';
                        if(value.w_pname!=null)result += '<input type="hidden" value="'+value.w_pname._id+'" id="w_pnameaid'+j+'"/><input type="text" name="w_pname" value="'+value.w_pname.prdt_desc+'" id="w_pnamea'+j+'" class="form-control" style="width: 142px;text-align: -webkit-right;"/>';
                        else result += '<input type="text" name="w_pname"  id="w_pnamea'+j+'" class="form-control" style="width: 142px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="in_qty" value="'+value.in_qty+'" id="inqtyb'+j+'"  class="form-control" style="width: 142px;text-align: -webkit-right;" />';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="perc_cbm" value="'+value.perc_cbm+'" id="perccbmc'+j+'" class="form-control" style="width: 135px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="or_qty" value="'+value.or_qty+'" id="orqtyd'+j+'" class="form-control" style="width: 92px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_cost" value="'+value.w_cost+'" id="wcoste'+j+'"  class="form-control" style="width: 72px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_profit" value="'+value.w_profit+'" id="wprofitf'+j+'" class="form-control" value="10" style="width: 72px;text-align: -webkit-right;">';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_profitamt" value="'+value.w_profitamt+'" id="wprofitamtg'+j+'" class="form-control" style="width: 92px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_sellprice" value="'+value.w_sellprice+'" id="wsellpriceh'+j+'" class="form-control" style="width: 82px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_sellpriceD" value="'+value.w_sellpriceD+'" id="wsellpriceDi'+j+'" class="form-control" style="width: 112px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_boxpricedoller" value="'+value.w_boxpricedoller+'" id="boxpricedollerj'+j+'"  class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td> <input type="text" name="w_boxperC" value="'+value.w_boxperC+'" id="wboxperCk'+j+'" class="form-control" style="width: 142px;text-align: -webkit-right;"/>';
                        result += ' </td>';
                        result += '<td>';
                        result += '<input type="text" name="w_boxperFR" value="'+value.w_boxperFR+'" id="perbxfrghtrsl'+j+'" class="form-control" style="width: 142px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_boxperFD" value="'+value.w_boxperFD+'" id="wboxperFDm'+j+'" class="form-control" style="width: 132px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_finalb" value="'+value.w_finalb+'" id="wfinalbn'+j+'"  class="form-control" style="width: 152px;text-align: -webkit-right;"/>';
                        result += '</td>'; 
                        result += ' <td>';
                        result += '<input type="text" name="w_finalc" value="'+value.w_finalc+'" id="wfinalco'+j+'" class="form-control" style="width: 87px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_fobAmt" value="'+value.w_fobAmt+'" id="wfobAmtp'+j+'" class="form-control" style="width: 102px;text-align: -webkit-right;">';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="w_cnfAmt" value="'+value.w_cnfAmt+'" id="wcnfAmtq'+j+'" class="form-control focus" style="width: 112px;text-align: -webkit-right;"/>';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="tot_cbm" value="'+value.tot_cbm+'" id="totelcbmr'+j+'" class="form-control" style="width: 102px;text-align: -webkit-right;">';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="text" name="fr_cbm" value="'+value.fr_cbm+'" id="frcbs'+j+'" class="form-control"  style="width: 102px;text-align: -webkit-right;">';
                        result += '</td>';
                        result += '<td>';
                        result += '<input type="number" name="delivery" id="delivery' + j + '"  class="form-control deliveryinputcheck addingdelivery" data-sid = '+workmast[0].ws_cus_name+' data-re = '+workmast[0].w_rmks+' data-po = '+workmast[0].pono+'  data-podt = '+workmast[0].podtmilisecond+' style="width: 72px;text-align: -webkit-right;">';
                        // result += '<input type="text" name="fr_cbm" value="'+value.fr_cbm+'" id="frcbms'+j+'" class="form-control" style="width: 112px;text-align: -webkit-right;"/>'
                        result += '</td>';
                        result += '</div>';
                        result += '</tr>';
                        glbidx = j;
                    });
                
                }
            }
           
            $('.delivery_repeat_row').html(result);
           
            if(ws_no!='')
            {
                if(workmast.length){
                    $('#deliverysupport').modal('show');
                }else{
                    swal({
                        title:'Oops!',
                        text:'No Pending Worksheet',
                        buttons:false,
                        timer:1500
                    })
                }
            }
         
            $('.loader').hide();
        }
  
    });
});                     
$('body').on('input','.addingdelivery', function(){
    var datasid = $(this).attr('data-sid');
    var datare = $(this).attr('data-re');
    var datapo = $(this).attr('data-po');
    var datapodtm = $(this).attr('data-podt');
    //alert(datare)
    $('#profarmaByer').val(datasid).trigger('change');  
    $('#premarks').val(datare); 
    $('#pro_pono').val(datapo);
    var date = Date(datapodtm); 
    $('#podt').val(date.toDateString()); 
})




$(document).on("click", "#worksheet_entry", function () {
    var valid = '';
  
    $('.deliveryinputcheck').each(function(){
        if($(this).val() != null && $(this).val() != ''){
            valid = true;
            $('#deliverysupport').modal('hide');
            return true;
        }
    }) 
    if(valid != true){
        alert('Please add atleast one Delivery ');
        return false;
    }
  // alert("P")
    // $('#deliverysupport').modal('hide');
    $.ajax({
        type: 'GET',
        url: '/profarma/productname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                // var result;
                var product = data['product'];
                var main_loop_id = 0;

                for (i = 1; i <= glbidx; i++) {
                    var delivery = $('#delivery' + i).val();
                    var w_pnameaid = $('#w_pnameaid' + i).val();
                    var inqtyb = $('#inqtyb' + i).val();
                    var perccbmc = $('#perccbmc' + i).val();
                    var orqtyd = $('#orqtyd' + i).val();
                    var wcoste = $('#wcoste' + i).val();
                    var wprofitf = $('#wprofitf' + i).val();
                    var wprofitamtg = $('#wprofitamtg' + i).val();
                    var wsellpriceh = $('#wsellpriceh' + i).val();
                    var wsellpriceDi = $('#wsellpriceDi' + i).val();
                    var boxpricedollerj = $('#boxpricedollerj' + i).val();
                    var wboxperCk = $('#wboxperCk' + i).val();
                    var perbxfrghtrsl = $('#perbxfrghtrsl' + i).val();
                    var wboxperFDm = $('#wboxperFDm' + i).val();
                    var wfinalbn = $('#wfinalbn' + i).val();
                    var wfinalco = $('#wfinalco' + i).val();
                    var wfobAmtp = $('#wfobAmtp' + i).val();
                    var wcnfAmtq = $('#wcnfAmtq' + i).val();
                    var totelcbmr = $('#totelcbmr' + i).val();
                    if (delivery > 0) {
                        var result;
                        $("#delivery").each(function (i, val) {
                            main_loop_id++;
                            result += '<tr class="delivery-wrapper" id="rohit'+main_loop_id+'">';
                              result += '<td>';
                            result += '<input type="hidden" name="pntr'+main_loop_id+'" value="'+main_loop_id+'" oninput="calproforma('+ main_loop_id +')" id="cntr'+main_loop_id+'">';
                         
                           result += '<select name="pro_forma_group['+main_loop_id+'][item_name]"';
                           result += 'class="form-control selectproductfocus prbank productplace"';
                           result += 'style="width:162px" required onchange="getproduct('+main_loop_id+')" id="wpname'+main_loop_id+'" placeholder="Select Item">';
                           result += '<option value=""></option>';
                           for (p = 0; p < product.length; p++) {
                                if (w_pnameaid == product[p]['_id']) {
                                    result += "<option value='" + product[p]['_id'] + "' selected>" + product[p]['prdt_desc'] + "</option>";
                                } else {
                                    result += "<option value='" + product[p]['_id'] + "'>" + product[p]['prdt_desc'] + "</option>";
                                }
                            }
                           result += '</select>';
                           result += '</td>';
                           result += '<td id="innerqty'+main_loop_id+'">';
                           result += '<input type="text" value="'+inqtyb+'" name="pro_forma_group['+main_loop_id+'][in_qty]" id="inqtypq'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                           result += 'class="form-control" style="width: 142px;text-align: -webkit-right;"';
                           result += '/>';
                           result += '</td>';
                           result += '<td id="cmblprt'+main_loop_id+'">';
                           result += '<input type="text" value="'+perccbmc+'" name="pro_forma_group['+main_loop_id+'][perc_cbm]"';
                           result += 'id="percbmpq'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                           result += 'class="form-control" style="width: 135px;text-align: -webkit-right;"';
                           result += '/>';
                           result += '</td>';
                           result += '<td>';
                           result += '<input type="text" value="'+delivery+'" name="pro_forma_group['+main_loop_id+'][or_qty]"';
                           result += 'id="orqtymn'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                           result += 'class="form-control" style="width: 179px;text-align: -webkit-right;"';
                           result += '/>';
                           result += '</td>';
                            result += '<td>';
                           result += '<input type="text" name="pro_forma_group['+main_loop_id+'][cbm_perItem]"';
                           result += 'id="cbmperItem'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                           result += 'class="form-control "style="width:185px;text-align: -webkit-right;"';
                           result += 'required>';
                           result += '</td>';
                           result += '<td>';
                           result += '<input type="text"value="'+wfinalbn+'" name="pro_forma_group['+main_loop_id+'][carton_price]"';
                           result += 'id="cartonPrice'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                           result += 'class="form-control" style="width:170px;text-align: -webkit-right;"';
                           result += 'required>';
                           result += '</td>';                    
                           result += '<td>';
                           result += '<input type="text" name="pro_forma_group['+main_loop_id+'][total_amount]"';
                           result += 'id="totalAmount'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                           result += 'class="form-control " style="width:170px;text-align: -webkit-right;"';
                           result += ' amountfocus>';
                           result += '</td>';                   
                            if (main_loop_id != 1) {
                                result += "<td><a data-repeater-delete='inner-field-" + main_loop_id + "' data-brand-index='" + main_loop_id + "' class='delivery-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left: 32px;margin-top: 12px;'></i></a></td></tr>";
                            }

                            result += '</tr>';
                        });


                    }
                }
                $(".worksheet_repeat_row tbody tr").not('tr#contract_div').remove();
                $('tr#contract_div').before(result);
                calproforma(1);
            }

        }
    });
});
$(document).on("change.select2", "#outwardbyer", function () {
    // $(document).on("change.select2", "#br_code", function () {
    $("#delivery").show();
    $('.loader').show();
    var outwardbyer = $("#outwardbyer").val();
    
    $.ajax({
        type: 'GET',
        url: '/outward_challan/salesorder',
        dataType: 'json',
        data: {
            vouc_code: outwardbyer
        },
        success: function (data) {
           //alert(data)
            var i, j, result, sau;
            result='';
            if (data['success'] == true) {
                var somast = data['somast'];
                j = -1;
               
                for (i = 0; i < somast.length; i++) {
                    var somastgroup = somast[i]['sales_or_group'];
                    $.each(somastgroup, function (index, value) {
                        j++;
                        result += '<tr>';
                        result += '<div id="delivery-' + index + '">';
                    result += '<td>';
                     if(value.so_disc!=null)result += '<input type="hidden" value="'+value.so_disc._id+'" id="so_discaid'+j+'"/><input type="text" name="so_disc" value="'+value.so_disc.prdt_desc+'" id="so_disca'+j+'" class="form-control" style="text-align: -webkit-right;"/>';
                     else result += '<input type="text" name="so_disc"  id="so_disca'+j+'" class="form-control" style="text-align: -webkit-right;"/>';
                     result += '</td>';
                     result +=  '<td id="innerqtyso' + j +'">';
                     result +=  '<input type="text" value="'+value.order_price+'" name="order_price"oninput="calsalesorder(' + j +')"';
                     result +=  'id="inqtysob' + j +'"';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  ' <td>';
                     result +=  '<input type="text" value="'+value.sopacper_carten+'" name="sopacper_carten"';
                     result +=  'id="orqtysoc' + j +'" oninput="calsalesorder(' + j +')"';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  '</td>';
                     result +=  '<td id="rateso' + j +'">';
                     result +=  '<input type="text" value="'+value.so_qty+'" name="so_qty"';
                     result +=  'id="so_rated' + j +'" oninput="calsalesorder(' + j +')"';
                     result +=  'class="form-control "style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  '</td>';
                     result +=  '<td>';
                     result +=  '<input type="text"  value="'+value.so_discount+'" name="so_discount"';
                     result +=  'id="so_discounte' + j +'" oninput="calsalesorder(' + j +')"';
                     result +=  'class="form-control" style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  '</td>';                    
                     result +=  '<td>';
                     result +=  '<input type="text" value="'+value.total_amt+'" name="total_amt"';
                     result +=  'id="total_amtf' + j +'" oninput="calsalesorder(' + j +')"';
                     result +=  'class="form-control amountfocus" style="text-align: -webkit-right;"';
                     result +=  ' amountfocus>';
                     result +=  '</td>';
                     result +=  '<td  style="display:none;">';
                     result +=  '<input type="hidden" value="'+somast[i]._id+'" name="sd2id"';
                     result +=  'id="sd2idv' + j +'" oninput="calsalesorder(' + j +')"';
                     result +=  'class="form-control amountfocus" style="text-align: -webkit-right;"';
                     result +=  ' amountfocus>';
                     result +=  '</td>'
                     result +=  '<td  style="display:none;">';
                     result +=  '<input type="hidden" value="'+somast[i].sales_or_group[j]._id+'" name="sd2srno"';
                     result +=  'id="sd2srnov' + j +'" oninput="calsalesorder(' + j +')"';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  ' amountfocus>';
                     result +=  '</td>';
                     result +=  '<td  style="display:none;">';
                     result +=  '<input type="hidden" value="'+value.so_div+'" name="so_div"';
                     result +=  'id="so_div' + j +'" oninput="calsalesorder(' + j +')"';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  ' >';
                     result +=  '</td>';
                     result += '<td>';
                 
                     result += '<input type="number" name="delivery" id="delivery' + j + '"  class="form-control deliveryinputcheck addingdeliverya"  data-re =" '+somast[0].buy_rmks+'" data-po = "'+somast[0].buy_pono+'"  data-podt = "'+somast[0].buy_podtmilisecond+'" style="text-align: -webkit-right;">';
                    // result += '<input type="text" name="fr_cbm" value="'+value.fr_cbm+'" id="frcbms'+j+'" class="form-control" style="width: 112px;text-align: -webkit-right;"/>'
                     result += '</td>';
                     result += '<td>';
                    
                     result += '<input type="number" name="pendqty" id="pendqtya' + j + '"  class="form-control "   style="text-align: -webkit-right;">';
                    // result += '<input type="text" name="fr_cbm" value="'+value.fr_cbm+'" id="frcbms'+j+'" class="form-control" style="width: 112px;text-align: -webkit-right;"/>'
                     result += '</td>';
                     result += '</div>';
                     result += '</tr>';
                     glbidx = j;
                    // alert("p")
                    });
                    
                }
                
            }
            
            $('.so_repeat_row').html(result);
            
            if(outwardbyer!='')
            {
              //  alert(somast.length)  
                if(somast.length){
                   $('#deliverysupport').modal('show');
                }else{
                    swal({
                        title:'Oops!',
                        text:'No Pending Salesorder',
                        buttons:false,
                        timer:1500
                    })
                }
            }
            
            $('.loader').hide();
        }
    })
}) 
$('body').on('input','.addingdeliverya', function(){
   // var datasid = $(this).attr('data-sid');
    var datare = $(this).attr('data-re');
    var datapo = $(this).attr('data-po');
    var datapodt = $(this).attr('data-podt');
    // alert(datare)
    // alert(datapo)
    // alert(datapodt)
   // $('#outwardbyer').val(datasid).trigger('change');  
    $('#outwardremarks').val(datare); 
    $('#out_pono').val(datapo); 
    var date = Date(datapodt);
    //alert("p")
    $('#podt').val(date.toDateString()); 
})                                       
$(document).on("click", "#salesorder_entry", function () {
   
    var valid = '';
    $('.deliveryinputcheck').each(function(){
        if($(this).val() != null && $(this).val() != ''){
            valid = true;
            $('#deliverysupport').modal('hide');
            return true;
        }
    }) 
    if(valid != true){
        alert('Please add atleast one Delivery ');
        return false;
    }
   
    // $('#deliverysupport').modal('hide');
    $.ajax({
        type: 'GET',
        url: '/outward_challan/productname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                // var result;
                var product = data['product'];
                var main_loop_id = 0;
               
                for (i = 0; i <= glbidx; i++) {
                    var delivery = $('#delivery' + i).val();
                    var so_discaid = $('#so_discaid' + i).val();
                    var inqtysob = $('#inqtysob' + i).val();
                    var orqtysoc = $('#orqtysoc' + i).val();
                    var so_rated = $('#so_rated' + i).val();
                    var so_discounte = $('#so_discounte' + i).val();
                    var total_amtf = $('#total_amtf' + i).val();
                    var sd2ida = $('#sd2idv' + i).val();
                    var sd2srnoa = $('#sd2srnov' + i).val();
                    var pendqtyb = $('#pendqtya' + i).val();
                    // alert(sd2ida);
                    // alert(sd2srnoa);
                    var so_diva = $('#so_div' + i).val();
                    if (delivery > 0) {
                        var result;
                        $("#delivery").each(function (i, val) {
                            main_loop_id++;
                            result += '<tr class="delivery-wrapper" id="rohit'+main_loop_id+'">';
                            result += '<td>';
                            result += '<input type="hidden" name="outrn'+main_loop_id+'" value="'+main_loop_id+'" oninput="caloutward('+ main_loop_id +')" id="outrn'+main_loop_id+'">';
                            result += '<input type="text" name="sales_or_group['+main_loop_id+'][so_sno]"';
                            result += 'id="outitem_no'+main_loop_id+'" oninput="caloutward('+ main_loop_id +')"';
                            result += 'class="form-control" style="text-align: -webkit-right;"';
                            result += '/>';
                            result +='</td>';  
                            result +='<td>'; 
                            result += '<select name="sales_or_group['+main_loop_id+'][so_disc]"';
                            result += 'class="form-control selectproductfocus prbank productplace"';
                            result += ' onchange="getoutward('+main_loop_id+')" id="outname'+main_loop_id+'" placeholder="Select Item">';
                           result += '<option value=""></option>';
                           for (p = 0; p < product.length; p++) {
                                if (so_discaid == product[p]['_id']) {
                                    result += "<option value='" + product[p]['_id'] + "' selected>" + product[p]['prdt_desc'] + "</option>";
                                } else {
                                    result += "<option value='" + product[p]['_id'] + "'>" + product[p]['prdt_desc'] + "</option>";
                                }
                            }
                           result += '</select>';
                           result += '</td>';
                           result += '<td id="innerqtyout'+main_loop_id+'">';
                           result += '<input type="text" value="'+orqtysoc+'" name="sales_or_group['+main_loop_id+'][outin_qty]" id="inqtyout'+main_loop_id+'" oninput="caloutward('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += '/>';
                           result += '</td>';
                           result += '<td>';
                           result += '<input type="text" value="'+delivery+'" name="sales_or_group['+main_loop_id+'][so_qty]"';
                           result += 'id="orqtyoc'+main_loop_id+'" oninput="caloutward('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += '/>';
                           result += '</td>';
                            result += '<td id="rateout'+main_loop_id+'">';
                           result += '<input type="text" value="'+so_rated+'" name="sales_or_group['+main_loop_id+'][ocrate]"';
                           result += 'id="ocrate'+main_loop_id+'" oninput="caloutward('+main_loop_id+')"';
                           result += 'class="form-control "style="text-align: -webkit-right;"';
                           result += 'required>';
                           result += '</td>';
                           result += '<td>';
                           result += '<input type="text" value="'+so_discounte+'" name="sales_or_group['+main_loop_id+'][so_discount]"';
                           result += 'id="ocdiscount'+main_loop_id+'" oninput="caloutward('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += 'required>';
                           result += '</td>';                    
                           result += '<td>';
                           result += '<input type="text" value="'+total_amtf+'" name="sales_or_group['+main_loop_id+'][total_amt]"';
                           result += 'id="octotalAmount'+main_loop_id+'" oninput="caloutward('+main_loop_id+')"';
                           result += 'class="form-control " style="text-align: -webkit-right;"';
                           result += ' amountfocus>';
                           result += '</td>';  
                           result += '<td  style="display:none;">';
                           result += '<input type="hidden" value="'+sd2ida+'" name="sales_or_group['+main_loop_id+'][sd2id]"';
                           result += 'id="sd2ida'+main_loop_id+'" ';
                           result += 'class="form-control " style="text-align: -webkit-right;"';
                           result += '>';
                           result += '</td>'; 
                           result += '<td style="display:none;">';
                           result += '<input type="hidden" value="'+sd2srnoa+'" name="sales_or_group['+main_loop_id+'][sd2srno]"';
                           result += 'id="sd2srno'+main_loop_id+'" ';
                           result += 'class="form-control " style="text-align: -webkit-right;"';
                           result += ' >';
                           result += '</td>';   
                           result += '<td style="display:none;">';
                           result += '<input type="hidden" value="'+so_diva+'" name="sales_or_group['+main_loop_id+'][so_div]"';
                           result += 'id="so_div'+main_loop_id+'" ';
                           result += 'class="form-control " style="text-align: -webkit-right;"';
                           result += ' >';
                           result += '</td>'; 
                           result += '</td>';   
                           result += '<td style="display:none;">';
                           result += '<input type="hidden" value="'+pendqtyb+'" name="sales_or_group['+main_loop_id+'][pendqty]"';
                           result += 'id="pendqty'+main_loop_id+'" ';
                           result += 'class="form-control " style="text-align: -webkit-right;"';
                           result += ' >';
                           result += '</td>';                 
                            if (main_loop_id != 1) {
                                result += "<td><a data-repeater-delete='inner-field-" + main_loop_id + "' data-brand-index='" + main_loop_id + "' class='delivery-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left: 32px;margin-top: 12px;'></i></a></td></tr>";
                            }

                            result += '</tr>';
                        });


                    }
                }
                $(".salesorder_repeat_row tbody tr").not('tr#contract_div').remove();
                $('tr#contract_div').before(result);
                caloutward(1);
            }
        }
    });
});
$(document).on("keyup", "#commer_no", function () {
   
    // $(document).on("change.select2", "#br_code", function () {
    $("#delivery").show();
    $('.loader').show();
    var so_no = $("#commer_no").val();
    $.ajax({
        type: 'GET',
        url: '/commercial/com_modal',
        dataType: 'json',
        data: {
            vouc_code: so_no
        },
        success: function (data) {
            // console.log(data);
            var i, j, result, sau;
            result='';
           
            if (data['success'] == true) {
                var promast = data['promast'];
                j = 0;
                for (i = 0; i < promast.length; i++) {
                    var promastgroup = promast[i]['pro_forma_group'];
                    $.each(promastgroup, function (index, value) {
                        j++;
                        result += '<tr>';
                        result += '<div id="delivery-' + index + '">';
                    result += '<td>';
                //    alert(value.item_name.prdt_desc)
                     if(value.item_name!=null)result += '<input type="hidden" value="'+value.item_name._id+'" id="inamea'+j+'"/><input type="text" name="item_name" value="'+value.item_name.prdt_desc+'" id="inamea'+j+'" class="form-control" style="text-align: -webkit-right;"/>';
                     else result += '<input type="text" name="item_name"  id="inamea'+j+'" class="form-control" style="text-align: -webkit-right;"/>';
                     result += '</td>';
                     result +=  '<td>';
                     result +=  '<input type="text" value="'+value.in_qty+'" name="in_qty"';
                     result +=  'id="inqtypqb' + j +'"';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  ' <td>';
                     result +=  '<input type="text" value="'+value.perc_cbm+'" name="perc_cbm"';
                     result +=  'id="percbmpqc' + j +'" ';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  '</td>';
                     result +=  '<td id="rateso' + j +'">';
                     result +=  '<input type="text" value="'+value.or_qty+'" name="or_qty"';
                     result +=  'id="orqtymnd' + j +'"';
                     result +=  'class="form-control "style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  '</td>';
                     result +=  '<td>';
                     result +=  '<input type="text"  value="'+value.cbm_perItem+'" name="cbm_perItem"';
                     result +=  'id="cbmperIteme' + j +'" ';
                     result +=  'class="form-control" style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  '</td>';                    
                     result +=  '<td>';
                     result +=  '<input type="text" value="'+value.carton_price+'" name="carton_price"';
                     result +=  'id="cartonPricef' + j +'" ';
                     result +=  'class="form-control amountfocus" style="text-align: -webkit-right;"';
                     result +=  ' amountfocus>';
                     result +=  '</td>';
                     result +=  '<td>';
                     result +=  '<input type="text" value="'+value.total_amount+'" name="total_amount"';
                     result +=  'id="totalAmountg' + j +'"';
                     result +=  'class="form-control amountfocus" style="text-align: -webkit-right;"';
                     result +=  ' amountfocus>';
                     result +=  '</td>';
                     result += '<td>';
                     result += '<input type="number" name="delivery" id="delivery' + j + '"  class="form-control deliveryinputcheck addingdeliveryb"   data-sid = '+promast[0].pro_cus_name +' data-re = '+promast[0].pro_rmks+' data-po = '+promast[0].pro_pono+'  data-podt = '+promast[0].pro_podt+' style="text-align: -webkit-right;">';
                    // result += '<input type="text" name="fr_cbm" value="'+value.fr_cbm+'" id="frcbms'+j+'" class="form-control" style="width: 112px;text-align: -webkit-right;"/>'
                     result += '</td>';
                     result += '</div>';
                     result += '</tr>';
                     glbidx = j;
                    });
                
                }
            }
           $('.commercial_repete_row').html(result);
            if(so_no!='')
            {
                if(promast.length){
                    $('#deliverysupport').modal('show');
                }else{
                    swal({
                        title:'Oops!',
                        text:'No Pending Proforma',
                        buttons:false,
                        timer:1500
                    })
                }
            }
            
            $('.loader').hide();
        }
    });
});
$('body').on('input','.addingdeliveryb', function(){
    var datasid = $(this).attr('data-sid');
    var datare = $(this).attr('data-re');
    var datapo = $(this).attr('data-po');
    var datapodt = $(this).attr('data-podt');
    var date = Date(datapodt);
  
    $('#commercialbyyer').val(datasid).trigger('change');  
    $('#commmarks').val(datare); 
    $('#comm_pono').val(datapo); 
    $('#podt').val(date.toDateString()); 
})                                         
$(document).on("click", "#commercial_entry", function () {
    var valid = '';
    $('.deliveryinputcheck').each(function(){
        if($(this).val() != null && $(this).val() != ''){
            valid = true;
            $('#deliverysupport').modal('hide');
            return true;
        }
    }) 
    if(valid != true){
        alert('Please add atleast one Delivery ');
        return false;
    }
  
    // $('#deliverysupport').modal('hide');
    $.ajax({
        type: 'GET',
        url: '/commercial/productlist',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                // var result;
                var product = data['product'];
                StockUnit = data['StockUnit'];
                var main_loop_id = 0;
             
                for (i = 1; i <= glbidx; i++) {
                    var delivery = $('#delivery' + i).val();
                    var inamea = $('#inamea' + i).val();
                    var inqtypqb = $('#inqtypqb' + i).val();
                    var percbmpqc = $('#percbmpqc' + i).val();
                    var orqtymnd = $('#orqtymnd' + i).val();
                    var cbmperIteme = $('#cbmperIteme' + i).val();
                    var cartonPricef = $('#cartonPricef' + i).val();
                    var totalAmountg = $('#totalAmountg' + i).val();
                   var skunm = ""
                    if (delivery > 0) {
                        var result;
                        $("#delivery").each(function (i, val) {
                            main_loop_id++;
                            result += '<tr class="delivery-wrapper" id="rohit'+main_loop_id+'">';
                            result +='<td>';
                            result +='<input type="hidden" name="pntr'+main_loop_id+'" value="1" id="cntr'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                            result +='class="form-control" style="width: 102px;text-align: -webkit-right;">';
                            result += '<select name="pro_forma_group['+main_loop_id+'][item_name]" style="width:250px"';
                            result += 'class="form-control selectproductfocus prbank productplace select2"';
                            result += ' onchange="getproduct('+main_loop_id+')" id="wpname'+main_loop_id+'" placeholder="Select Item">';
                            result += '<option value=""></option>';
                          for (p = 0; p < product.length; p++) {
                               if (inamea == product[p]['_id']) {
                                skunm =product[p]['sku_name'];
                                   result += "<option value='" + product[p]['_id'] + "' selected>" + product[p]['prdt_desc'] + "</option>";
                               } else {
                                   result += "<option value='" + product[p]['_id'] + "'>" + product[p]['prdt_desc'] + "</option>";
                               }
                           }
                          result += '</select>';
                          result +='</td>';
                          result +='<td id="innerqty'+main_loop_id+'">';
                          result +='<input type="text" value="'+inqtypqb+'" name="pro_forma_group['+main_loop_id+'][in_qty]" id="inqtypq'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                          result +='class="form-control" style="width: 142px;text-align: -webkit-right;"';
                          result +='/>';
                          result +='</td>';
                          result +='<td id="cmblprt'+main_loop_id+'">';
                          result += '<input type="text"   value="'+percbmpqc+'" name="pro_forma_group['+main_loop_id+'][perc_cbm]"';
                          result +='id="percbmpq'+main_loop_id+'"       oninput="calproforma('+main_loop_id+')"';
                          result +='class="form-control" style="width: 142px;ext-align: -webkit-right;">';
                          result +='</td>';
                         
                          result +='<td>';
                          result +='<input type="text"  value="'+delivery+'" name="pro_forma_group['+main_loop_id+'][or_qty]"';
                          result +='id="orqtymn'+main_loop_id+'" oninput="calproforma('+main_loop_id+')"';
                          result +='class="form-control" style="width: 178px;text-align: -webkit-right;">';
                          result +='</td>';
                          result +='<td>';
                          result +='<input type="text" name="pro_forma_group['+main_loop_id+'][batch_no]"';
                          result +='id="batchno'+main_loop_id+'"        oninput="calproforma('+main_loop_id+')"';
                          result +='class="form-control" style="width: 142px;ext-align: -webkit-right;"';
                          result +='/>';
                          result +='</td>';
                          result +='<td >';
                          result +='<input type="text" name="pro_forma_group['+main_loop_id+'][marks_and_no]"';
                          result +='id="marksandno'+main_loop_id+'"    oninput="calproforma('+main_loop_id+')"';
                          result +='class="form-control" style="width: 142px;ext-align: -webkit-right;"';
                          result +='/>';
                          result +='</td>';
                          result +='<td><select  class="form-control " id="communit'+main_loop_id+'" name="pro_forma_group['+main_loop_id+'][comm_unit]" class="form-control comm_unit" style="width: 142px;ext-align: -webkit-right;">';
                            for (j = 0; j < StockUnit.length; j++) {
// console.log(skunm);
                                if (skunm == StockUnit[j]['_id']) {
                                    result += "<option value='" + StockUnit[j]['_id'] + "' selected data-product_id='" + StockUnit[j]['_id'] + "'>" + StockUnit[j]['sku_name'] + "</option>";
                                } else {
                                result += "<option value='" + StockUnit[j]['_id'] + "' data-product_id='" + StockUnit[j]['_id'] + "'>" + StockUnit[j]['sku_name'] + "</option>";
                                 }
                                }
                          result +='</select></td>';
                    
                          result +='<td>';
                          result +='<input type="text" value="'+cartonPricef+'" name="pro_forma_group['+main_loop_id+'][carton_price]"';
                          result +='id="cartonPrice'+main_loop_id+'"  oninput="calproforma('+main_loop_id+')"';
                          result +='class="form-control"  style="width:170px;text-align: -webkit-right;">';
                          result +='</td>';
                          result +='<td>';
                          result +='<input type="text" value="'+totalAmountg+'" name="pro_forma_group['+main_loop_id+'][total_amount]"';
                          result +='id="totalAmount'+main_loop_id+'"  oninput="calproforma('+main_loop_id+')"';
                          result +='class="form-control" style="width:170px;text-align: -webkit-right;"';
                          result +='/>';
                          result +='</td>';
                         if (main_loop_id != 1) {
                                result += "<td><a data-repeater-delete='inner-field-" + main_loop_id + "' data-brand-index='" + main_loop_id + "' class='delivery-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left: 32px;margin-top: 12px;'></i></a></td></tr>";
                            }

                            result += '</tr>';
                        });


                    }
                }
                $(".salesorder_repeat_row tbody tr").not('tr#contract_div').remove();
                $('tr#contract_div').before(result);
                calproforma(1);
            }
        }
    });
});
function printinvoice(){
    $("#hideprintbtn").hide()
    $("#scroll_hide").hide()
    window.print();
    setTimeout(function(){
        $("#hideprintbtn").show()
        $("#scroll_hide").show()
    }, 300);
}
function callback(window,resultCallback){
    alert("vikas");
}
function getShipParty(){
   var Ship_Party_id =  $("#getShip_Party").val();
   console.log(Ship_Party_id)
    $.ajax({
        type: 'GET',
        url: '/domes_salesinvoice/Ship_Party_data',
        dataType: 'json',
        data: {
            Ship_Party_id:Ship_Party_id
        },
        success: function (data) {
            console.log(data)
            if (data['success'] == true) {
                var Ship_Party = data['Ship_Party']
                
                    $("#Ship_party").val(Ship_Party.ACName)
                    $("#Ship_party_gst").val(Ship_Party.GSTIN);
                    $("#Ship_party_add").val(Ship_Party.Address1);
                    $("#Ship_party_State").val(Ship_Party.StateName).trigger('change');
                    // alert(Ship_Party.ac_name);
            }
        }
    });
}
function getsales() {
    // alert()
    $("#delivery").show();
    $('.loader').show();
    var party = $(".buy_cus_name").val();
    // if(party != ''){
        // alert(party)
    $.ajax({
        type: 'GET',
        url: '/domes_salesinvoice/salesorder',
        dataType: 'json',
        data: {
            party:party
        },
        success: function (data) {
          console.log(data)
            var i, j, result, sau;
            result='';
            if (data['success'] == true) {
                var somast = data['somast'];
                 j = 0;
                for (i = 0; i < somast.length; i++) {
                    var somastgroup = somast[i].sales_or_group;
                    console.log(somastgroup)
                    $.each(somastgroup, function (index, value) {
                        console.log(value.sopacper_carten);
                        j++;
                        result += '<tr>';
                        result += '<div id="delivery-' + index + '">';
                          result += '<td>';
                          if(value.so_fg_disc != null)result += '<input type="text" name="itemname" id="itemnameid'+j+'" value="'+value.so_fg_disc.Fg_Des+'" data-itemid="'+value.so_fg_disc._id+'" class="form-control" style="text-align: -webkit-right;" readonly="true">';
                          else result += '<input type="text" name="itemname" id="itemnameid'+j+'" value="" data-itemid="" class="form-control" style="text-align: -webkit-right;">';
                          result += '</td>'
                    //  if(value.so_sno!=null)result += '<input type="hidden" value="'+value.so_disc._id+'" id="outnamea'+j+'"/><input type="text" name="so_disc" value="'+value.so_disc.prdt_desc+'" id="outnamea234'+j+'" class="form-control" style="text-align: -webkit-right;"/>';
                    //  else result += '<input type="text" name="so_disc"  value="" id="outnamea'+j+'" class="form-control" style="text-align: -webkit-right;"/>';
                    //  result += '</td>';
                    //  result +=  '<td>';
                    //  result +=  '<input type="text" value="'+value.sopacper_carten+'" name="outin_qty"oninput="calsalesorder(' + j +')"';
                    //  result +=  'id="inqtyoutb' + j +'" readonly="true"';
                    //  result +=  'class="form-control " style="text-align: -webkit-right;"';
                    //  result +=  'required>';
                     result +=  ' <td>';
                                // orqtyocc
                     result +=  '<input type="text" value="'+value.so_qty+'" name="so_qty"';
                     result +=  'id="orqtyocc'+j+'" oninput="calsalesorder(' + j +')" readonly="true"';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  'required>';
                     result +=  '<input type="hidden" value="'+value._id+'" name="sales_ord_grp_id" oninput="calsalesorder(' + j +')"';
                     result +=  'id="sales_ord_grp_id'+j+'"';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  '>';
                     result +=  '<input type="hidden" value="'+somast[i]._id+'" name="sales_ord_id" oninput="calsalesorder(' + j +')"';
                     result +=  'id="sales_ord_id'+j+'"';
                     result +=  'class="form-control " style="text-align: -webkit-right;"';
                     result +=  '>';
                     result +=  '</td>';

                    //  result +=  '<td>';
                    //  result +=  '<input type="text" value="'+value.order_price+'" name="ocrate"';
                    //  result +=  'id="ocrated' + j +'" oninput="calsalesorder(' + j +')" readonly="true"';
                    //  result +=  'class="form-control "style="text-align: -webkit-right;"';
                    //  result +=  'required>';
                    //  result +=  '</td>';

                    //  result +=  '<td>';
                    //  result +=  '<input type="text"  value="'+value.so_discount+'" name="so_discount" readonly="true"';
                    //  result +=  'id="ocdiscounte' + j +'" oninput="calsalesorder(' + j +')"';
                    //  result +=  'class="form-control" style="text-align: -webkit-right;"';
                    //  result +=  'required>';
                    //  result +=  '</td>'; 

                    //   result +=  '<td>';
                    //  result +=  '<input type="text" value="'+value.total_amt+'" name="total_amt" readonly="true"';
                    //  result +=  'id="octotalAmountf' + j +'" oninput="calsalesorder(' + j +')"';
                    //  result +=  'class="form-control amountfocus" style="text-align: -webkit-right;"';
                    //  result +=  ' amountfocus>';
                    //  result +=  '</td>';

                     result += '<td>';
                     result += '<input type="number" name="delivery" value="'+value.so_qty_blc+'" id="delivery'+j+'"  class="form-control deliveryinputcheck" data-pid="'+somast[0].buy_cus_name+'" data-re="'+somast[0].buy_rmks+'" data-po="'+somast[0].buy_pono+'"  data-podt="'+somast[0].buy_podt+'" style="text-align: -webkit-right;">';
                    // result += '<input type="text" name="fr_cbm" value="'+value.fr_cbm+'" id="frcbms'+j+'" class="form-control" style="width: 112px;text-align: -webkit-right;"/>'
                     result += '</td>';
                     result += '</div>';
                     result += '</tr>';
                     glbidx = j;
                    });
                }
            }
            $('.dsi_repeat_row').html(result);
            if(party!='')
            {
                if(somast.length){
                    $('#deliverysupport').modal('show');
                }else{
                    swal({
                        title:'Oops!',
                        text:'No Pending Salesorder',
                        buttons:false,
                        timer:1500
                    })
                }
            }
            $('.loader').hide();
        }
    });
    calgst(1)
} 
countslloop = 0
countsl = [];
sal_ord = '';
$(document).on("click", ".update-slord", function () {
    if($(this).closest('form').valid()){
        // alert(sales_or_group)
        for(let i = 1; i<=countslloop; i++){
            var sales_ord_grp_id = $('#sales_ord_grp_id' + i).val();
            var sales_ord_id = $('#sales_ord_id' + i).val();
            var orqtydsi = $('#orqtydsi'+i).val();
            var arr = {'sales_ord_grp_id':sales_ord_grp_id, 'sales_ord_id':sales_ord_id, 'orqtydsi': orqtydsi}
            countsl.push(arr);
        }
        console.log(countsl)
        sal_ord = JSON.stringify(countsl)
        for(let j=0; j<countsl.length; j++){
        $.ajax({
            type: 'POST',
            url: '/domes_salesinvoice/update_sales_ord',
            dataType: 'json',
            data: {'countsl':countsl[j]},
            success: function (data) {
                console.log(data)
                if (data['success'] == 'true') {
    
                }
            }
        })
    }
    }
})
$(document).on("keydown", ".update-slord", function (e) {
    if(e.keyCode == 13){
        if($(this).closest('form').valid()){
            // alert(sales_or_group)
            for(let i = 1; i<=countslloop; i++){
                var sales_ord_grp_id = $('#sales_ord_grp_id' + i).val();
                var sales_ord_id = $('#sales_ord_id' + i).val();
                var orqtydsi = $('#orqtydsi'+i).val();
                var arr = {'sales_ord_grp_id':sales_ord_grp_id, 'sales_ord_id':sales_ord_id, 'orqtydsi': orqtydsi}
                countsl.push(arr);
            }
            console.log(countsl)
            sal_ord = JSON.stringify(countsl)
            for(let j=0; j<countsl.length; j++){
            $.ajax({
                type: 'POST',
                url: '/domes_salesinvoice/update_sales_ord',
                dataType: 'json',
                data: {'countsl':countsl[j]},
                success: function (data) {
                    console.log(data)
                    if (data['success'] == 'true') {
        
                    }
                }
            })
        }
        }
    }
})
$(document).on('click', '.delete_dsimast', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/domes_salesinvoice/'+ id,
                success: function (response) {
                        if(response['success'] == 'true'){
                            $.ajax({
                                type: 'POST',
                                url: '/domes_salesinvoice/update_salesord2',
                                data: {slin_id: id},
                                success: function (response) {
                                    if(response['success'] == 'true'){
                                        window.location.href = '/domes_salesinvoice/dsi_list';
                                    }
                                },
                                error: function (err) {
                                    console.log(err);
                                }
                            });
                        }
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on("click", "#domesticsales_entry", function () {
    var valid = '';
    $('.deliveryinputcheck').each(function(){
        if($(this).val() != null && $(this).val() != ''){
            valid = true;
            $('#deliverysupport').modal('hide');
             return true;
        }
    }) 
    if(valid != true){
        alert('Please add atleast one Delivery ');
        return false;
    }
    $.ajax({
        type: 'GET',
        url: '/domes_salesinvoice/productname',
        dataType: 'json',
        success: function (data) {
            console.log(data)
            if (data['success']) {
                // var result;
                var product = data['product'];
                var main_loop_id = 0;
                var tot_taxvalue = 0;
                var datapodt = $("#delivery1").attr('data-podt');
            //var datehidden = Date(datapodt);
            var filterstartdate = moment(datapodt).tz("Asia/Kolkata").format('DD/MM/YYYY');
            var podt = '<input type="text" name="buy_podt" id="podt" class="form-control datemask"  value="'+filterstartdate+'"/>'
                
            $('.podtvvv').html(podt);
                // alert(glbidx)
                for (i = 1; i <= glbidx; i++) {
                    var delivery = $('#delivery'+i).val();
                    var itemnameid = $('#itemnameid'+i).attr('data-itemid');
                    // alert(itemnameid)inqtyoutb
                    // var inqtyoutb = $('#inqtyoutb' + i).val();
                    // var orqtyocc = $('#orqtyocc' + i).val();
                    // var ocrated = $('#ocrated' + i).val();
                    // var ocdiscounte = $('#ocdiscounte' + i).val();
                    var octotalAmountf = $('#octotalAmountf' + i).val();
                    var sales_ord_grp_id = $('#sales_ord_grp_id' + i).val();
                    var sales_ord_id = $('#sales_ord_id' + i).val();
                   
                    if (delivery > 0) {
                        countslloop++;
                        var result;
                        $("#delivery").each(function (i, val) {
                            main_loop_id++;
                            result += '<tr class="delivery-wrapper" id="rohit'+main_loop_id+'">';
                            result += '<td>';
                            result += '<input type="hidden" name="dsirn" value="'+main_loop_id+'" oninput="caldsi('+ main_loop_id +')" id="dsirn'+main_loop_id+'">';
                            // for (p = 0; p < product.length; p++) {
                            //     if (itemnameid == product[p]['_id']) {
                            //           result += '<input type="hidden" name="sales_or_group['+main_loop_id+'][so_div]" value="'+product[p]['prdtdiv_code'][0]+'" >';
                            //     }
                            // }
                            

                            result += '<input type="text" name="sales_or_group['+main_loop_id+'][so_sno]"';
                            result += 'id="dsiitem_no'+main_loop_id+'" value="'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                            result += 'class="form-control" style="text-align: -webkit-right;"';
                            result += '/>';
                            result +='</td>';  
                            result +='<td>'; 
                            result += '<select name="sales_or_group['+main_loop_id+'][so_disc]"';
                            result += 'class="form-control selectproductfocus productplace"';
                            result += ' onchange="getdsi('+main_loop_id+')" id="dsiname'+main_loop_id+'" placeholder="Select Item">';
                            result += '<option value=""></option>';
                            // console.log(product)
                           for (p = 0; p < product.length; p++) {
                                if (itemnameid == product[p]['_id']) {
                                  result += "<option value='" + product[p]['_id'] + "' selected>" + product[p]['Fg_Des'] + "</option>";
                                } else {
                                    result += "<option value='" + product[p]['_id'] + "'>" + product[p]['Fg_Des'] + "</option>";
                                }
                            }
                           result += '</select>';
                        //    result += '</td>';
                        //    result += '<td id="innerqtydsi'+main_loop_id+'">';
                        //    result += '<input type="number" value="'+inqtyoutb+'" name="sales_or_group['+main_loop_id+'][outin_qty]" id="inqtydsi'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                        //    result += 'class="form-control" style="text-align: -webkit-right;"';
                        //    result += 'required/>';
                        //    result += '</td>';

                           result += '<td>';
                           result += '<input type="number" value="'+delivery+'" name="sales_or_group['+main_loop_id+'][so_qty]"';
                           result += 'id="orqtydsi'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += 'required/>';
                           result += '<input type="hidden" value="'+sales_ord_grp_id+'" name="sales_or_group['+main_loop_id+'][sales_ord_grp_id]" id="sales_ord_grp_id'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += 'required/>';
                           result += '<input type="hidden" value="'+sales_ord_id+'" name="sales_or_group['+main_loop_id+'][sales_ord_id]" id="sales_ord_id'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += 'required/>';
                           result += '</td>';

                           result += '<td id="ratedsi'+main_loop_id+'">';
                           result += '<input type="number"  name="sales_or_group['+main_loop_id+'][ocrate]"';
                           for (p = 0; p < product.length; p++) {
                            if(itemnameid == product[p]['_id']) {
                              result += 'value="'+product[p]['Fg_SPrice']+'"';
                             }
                            }
                           result += 'id="dsirate'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                           result += 'class="form-control "style="text-align: -webkit-right;"';
                           result += 'required>';
                           result += '</td>';

                           result += '<td>';
                           if(main_loop_id == glbidx){
                            result += '<input type="number" value="'+0+'" name="sales_or_group['+main_loop_id+'][so_discount]"';
                            result += 'id="dsidiscount'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                            result += 'class="form-control amountfocus" style="text-align: -webkit-right;"';
                            result += 'required>';
                           }else{
                            result += '<input type="number" value="'+0+'" name="sales_or_group['+main_loop_id+'][so_discount]"';
                            result += 'id="dsidiscount'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                            result += 'class="form-control" style="text-align: -webkit-right;"';
                            result += 'required>';
                           }
                           
                           result += '<input type="hidden" name="sales_or_group['+main_loop_id+'][so_gstrate]"';
                           result += 'id="so_gstrate'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                            // result += 'class="form-control" style="text-align: -webkit-right;"';
                            for (p = 0; p < product.length; p++) {
                                if (itemnameid == product[p]['_id']) {
                                    if(product[p]['Fg_GstRate'] == null || product[p]['Fg_GstRate'] == undefined){
                                        result += 'value="'+18+'" class="form-control" style="text-align: -webkit-right;"';
                                    }else{
                                        result += 'value="'+product[p]['Fg_GstRate']+'" class="form-control" style="text-align: -webkit-right;"';
                                    }
                                }
                            }
                            result += '>';
                            result += '<input type="hidden" name="sales_or_group['+main_loop_id+'][so_taxvalue]"';
                            result += 'id="so_taxvalue'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                            // result += 'class="form-control" style="text-align: -webkit-right;"';
                            for (p = 0; p < product.length; p++) {
                                if (itemnameid == product[p]['_id']) {
                                    var  taxvalue = product[p]['Fg_GstRate']*octotalAmountf/100;
                                    result += 'value="'+taxvalue+'" class="form-control" style="text-align: -webkit-right;"';
                                    tot_taxvalue = tot_taxvalue + taxvalue;
                                    $("#tot_taxvalue").val(tot_taxvalue);
                                }
                            }
                            result += '>';
                           result += '</td>';                    
                                           
                           result += '<td>';
                           result += '<input type="number" value="'+octotalAmountf+'" name="sales_or_group['+main_loop_id+'][total_amt]"';
                           result += 'id="dsitotalAmount'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                           result += 'class="form-control " style="text-align: -webkit-right;"';
                           result += ' readonly="true">';
                           result += '<input type="hidden" name="sales_or_group['+main_loop_id+'][so_beforedisamt]"';
                           result += 'id="so_beforedisamt'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                           result += '>';
                           result += '<input type="hidden" name="sales_or_group['+main_loop_id+'][so_afttaxvalue]"';
                           result += 'id="so_afttaxvalue'+main_loop_id+'" oninput="caldsi('+main_loop_id+')"';
                           result += '>';
                           result += '</td>';                   
                            if (main_loop_id != 1) {
                                result += "<td><a data-repeater-delete='inner-field-" + main_loop_id + "' data-brand-index='" + main_loop_id + "' class='delivery-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left: 32px;margin-top: 12px;'></i></a></td></tr>";
                            }
                            result += '</tr>';
                        });
                    }
                }
                $(".productplace").select2({
                    placeholder: "Select Product",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                $(".domes_invoice_repete_row tbody tr").not('tr#contract_div').remove();
                $('tr#contract_div').before(result);
                caldsi(1);
                calgst(1);
                // calsaleadd(1);
            }

        }
    });
});



function getpurord() {
    $("#deliverypor").show();
    var party = $(".buy_cus_name").val();
    $.ajax({
        type: 'GET',
        url: '/mrn_challan/purorder',
        dataType: 'json',
        data: {
            party:party
        },
        success: function (data) {
          console.log(data)
            var i, j, resultpo, sau;
            resultpo='';
            if (data['success'] == true) {
                var somast = data['pomast'];
                console.log(somast)
                 j = 0;
                for (i = 0; i < somast.length; i++) {
                    var somastgroup = somast[i].sales_or_group;
                    $.each(somastgroup, function (index, value) {
                        j++;
                        resultpo += '<tr>';
                        resultpo += '<div id="delivery-'+index+'">';
                        resultpo += '<td>';
                        
                        if(value.so_disc !=null ){console.log(value.so_disc.Rm_Des);resultpo += '<input type="text" name="itemname" id="itemnameid'+j+'" value="'+value.so_disc.Rm_Des+'" data-itemid="'+value.so_disc._id+'" class="form-control" style="text-align: -webkit-left; width: 400px" readonly="true">';}
                        else resultpo += '<input type="text" name="itemname" id="itemnameid'+j+'" value="" data-itemid="" class="form-control" style="text-align: -webkit-right;">';
                        resultpo += '</td>';
                        
                     resultpo +=  '<td>';
                     resultpo +=  '<input type="number" value="'+value.order_price+'" name="ocrate"';
                     resultpo +=  'id="ocrated' + j +'" oninput="calsalesorder(' + j +')" readonly="true"';
                     resultpo +=  'class="form-control "style="text-align: -webkit-right;"';
                     resultpo +=  'required>';
                     resultpo +=  '<input type="hidden" value="'+value._id+'" name="pur_ord_grp_id" oninput="calsalesorder(' + j +')"';
                     resultpo +=  'id="pur_ord_grp_id' + j +'"';
                     resultpo +=  'class="form-control " style="text-align: -webkit-right;"';
                     resultpo +=  '>';
                     resultpo +=  '<input type="hidden" value="'+somast[i]._id+'" name="pur_ord_id" oninput="calsalesorder(' + j +')"';
                     resultpo +=  'id="pur_ord_id' + j +'"';
                     resultpo +=  'class="form-control " style="text-align: -webkit-right;"';
                     resultpo +=  '>';
                     resultpo +=  '</td>';

                     resultpo +=  '<td>';
                     resultpo +=  '<input type="number" value="'+value.so_qty+'" name="so_qty"';
                     resultpo +=  'id="orqtyocc' + j +'" oninput="calsalesorder(' + j +')" readonly="true"';
                     resultpo +=  'class="form-control " style="text-align: -webkit-right;"';
                     resultpo +=  'required>';
                     resultpo +=  '</td>';

                     resultpo +=  '<td>';
                     resultpo +=  '<input type="number"  value="'+value.so_discount+'" name="so_discount" readonly="true"';
                     resultpo +=  'id="ocdiscounte' + j +'" oninput="calsalesorder(' + j +')"';
                     resultpo +=  'class="form-control" style="text-align: -webkit-right;"';
                     resultpo +=  'required>';
                     resultpo +=  '</td>'; 

                     resultpo +=  '<td>';
                     resultpo +=  '<input type="number" value="'+value.total_amt+'" name="total_amt" readonly="true"';
                     resultpo +=  'id="octotalAmountf' + j +'" oninput="calsalesorder(' + j +')"';
                     resultpo +=  'class="form-control amountfocus" style="text-align: -webkit-right;"';
                     resultpo +=  ' amountfocus>';
                     resultpo +=  '</td>';

                     resultpo += '<td>';
                     resultpo += '<input type="number" name="delivery" value="'+value.po_qty_blc+'" id="delivery' + j + '"  class="form-control deliveryinputcheck" data-pid="'+somast[0].buy_cus_name+'" data-re="'+somast[0].buy_rmks+'" data-po="'+somast[0].buy_pono+'"  data-podt="'+somast[0].buy_podt+'" style="text-align: -webkit-right;">';
                    // resultpo += '<input type="text" name="fr_cbm" value="'+value.fr_cbm+'" id="frcbms'+j+'" class="form-control" style="width: 112px;text-align: -webkit-right;"/>'
                     resultpo += '</td>';
                     resultpo += '</div>';
                     resultpo += '</tr>';
                     glbidx = j;
                    });
                  
                }
            }
            $('.por_repeat_row').html(resultpo);
            if(party!='')
            {
                if(somast.length){
                    $('#deliverysupportpor').modal('show');
                }else{
                    swal({
                        title:'Oops!',
                        text:'No Pending Purchase order',
                        buttons:false,
                        timer:1500
                    })
                }
            }
            $('.loader').hide();
        }
    });
} 
countslloop = 0
countsl = [];
sal_ord = '';
$(document).on("click", ".update-porord", function () {
    if($(this).closest('form').valid()){
        for(let i = 1; i<=countslloop; i++){
            var pur_ord_grp_id = $('#pur_ord_grp_id' + i).val();
            var pur_ord_id = $('#pur_ord_id' + i).val();
            var so_qty = $('#so_qty'+i).val();
            var arr = {'pur_ord_grp_id':pur_ord_grp_id, 'pur_ord_id':pur_ord_id, 'so_qty': so_qty}
            countsl.push(arr);
        }
        console.log(countsl)
        sal_ord = JSON.stringify(countsl)
        for(let j=0; j<countsl.length; j++){
            // alert(j)
        $.ajax({
            type: 'POST',
            url: '/mrn_challan/update_pur_ord',
            dataType: 'json',
            data: {'countsl':countsl[j]},
            success: function (data) {
                console.log(data)
                if (data['success'] == 'true') {
    
                }
            }
        })
    }
    }
})
$(document).on("keydown", ".update-porord", function (e) {
    if(e.keyCode == 13){
        if($(this).closest('form').valid()){
            for(let i = 1; i<=countslloop; i++){
                var pur_ord_grp_id = $('#pur_ord_grp_id' + i).val();
                var pur_ord_id = $('#pur_ord_id' + i).val();
                var so_qty = $('#so_qty'+i).val();
                var arr = {'pur_ord_grp_id':pur_ord_grp_id, 'pur_ord_id':pur_ord_id, 'so_qty': so_qty}
                countsl.push(arr);
            }
            console.log(countsl)
            sal_ord = JSON.stringify(countsl)
            for(let j=0; j<countsl.length; j++){
                // alert(j)
            $.ajax({
                type: 'POST',
                url: '/mrn_challan/update_pur_ord',
                dataType: 'json',
                data: {'countsl':countsl[j]},
                success: function (data) {
                    console.log(data)
                    if (data['success'] == 'true') {
        
                    }
                }
            })
        }
        }
    }
})
$(document).on('click', '.delete_pomast', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {
            $.ajax({
                type: 'DELETE',
                url: '/mrn_challan/'+ id,
                success: function (response) {
                        if(response['success'] == 'true'){
                            $.ajax({
                                type: 'POST',
                                url: '/mrn_challan/update_purord2',
                                data: {slin_id: id},
                                success: function (response) {
                                    if(response['success'] == 'true'){
                                        window.location.href = '/mrn_challan/mrn_list_mast';
                                    }
                                },
                                error: function (err) {
                                    console.log(err);
                                }
                            });
                        }
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
$(document).on("click", "#domesticpor_entry", function () {
    var valid = '';
    $('.deliveryinputcheck').each(function(){
        if($(this).val() != null && $(this).val() != ''){
            valid = true;
            $('#deliverysupportpor').modal('hide');
            return true;
        }
    }) 
    if(valid != true){
        alert('Please add atleast one Delivery');
        return false;
    }
    $.ajax({
        type: 'GET',
        url: '/mrn_challan/productname',
        dataType: 'json',
        success: function (data) {
            console.log(data)
            if (data['success']) {
                // var result;
                var product = data['product'];
                var main_loop_id = 0;
                var datapodt = $("#delivery1").attr('data-podt');
                // console.log(datapodt);
            //var datehidden = Date(datapodt);
            var filterstartdate = moment(datapodt).tz("Asia/Kolkata").format('DD/MM/YYYY');
            // console.log(filterstartdate)
            // var podt = '<input type="text" name="buy_podt" id="podt" class="form-control datemask"  value="'+filterstartdate+'"/>'
            // $('.podtvvv').html(podt);
                // alert(glbidx)
                main_loop_id = -1;
                for (i = 0; i <= glbidx; i++) {
                    var delivery = $('#delivery' + i).val();
                    var itemnameid = $('#itemnameid' + i).attr('data-itemid');
                    // alert(itemnameid)inqtyoutb
                    var ocrated = $('#ocrated' + i).val();
                    var ocdiscounte = $('#ocdiscounte' + i).val();
                    var octotalAmountf = $('#octotalAmountf' + i).val();
                    var pur_ord_grp_id = $('#pur_ord_grp_id' + i).val();
                    var pur_ord_id = $('#pur_ord_id' + i).val();
                    console.log(itemnameid, ocrated, delivery, ocdiscounte, octotalAmountf);
                    if (delivery > 0) {
                        countslloop++;
                        console.log('vikas')
                        var result;
                        // $("#delivery").each(function (i, val) {
                            main_loop_id++;
                            result += '<tr class="delivery-wrapper" id="rohit'+main_loop_id+'">';
                            result += '<td>';
                            result += '<input type="hidden" name="buyrn" value="'+main_loop_id+'" oninput="calsalesorder('+ main_loop_id +')" id="buyrn'+main_loop_id+'">';
                           
                            result += '<select name="sales_or_group['+main_loop_id+'][so_disc]"';
                            result += 'class="form-control selectproductfocus productplace"';
                            result += ' onchange="getpriMrn('+main_loop_id+')" id="descpso'+main_loop_id+'" placeholder="Select Item">';
                            result += '<option value=""></option>';
                            for (p = 0; p < product.length; p++) {
                                if (itemnameid == product[p]['_id']) {
                                  result += "<option value='" + product[p]['_id'] + "' selected>" + product[p]['Rm_Des'] + "</option>";
                                } else {
                                    result += "<option value='" + product[p]['_id'] + "'>" + product[p]['Rm_Des'] + "</option>";
                                }
                            }
                           result += '</select>';
                           result +='</td>';
                        
                           result += '<td id="orderpriceso'+main_loop_id+'">';
                           result += '<input type="number"  name="sales_or_group['+main_loop_id+'][order_price]"';
                           result += 'value="'+ocrated+'" id="orderprice'+main_loop_id+'"';
                           result += 'oninput="calsalesorder('+main_loop_id+')"';
                           result += 'class="form-control "style="text-align: -webkit-right;"';
                           result += 'required>';
                           result += '</td>';

                           result += '<td>';
                           result += '<input type="number" value="'+delivery+'" name="sales_or_group['+main_loop_id+'][so_qty]"';
                           result += 'id="so_qty'+main_loop_id+'" oninput="calsalesorder('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += 'required/>';
                           result += '<input type="hidden" value="'+pur_ord_grp_id+'" name="sales_or_group['+main_loop_id+'][pur_ord_grp_id]" id="pur_ord_grp_id'+main_loop_id+'" oninput="calsalesorder('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += '/>';
                           result += '<input type="hidden" value="'+pur_ord_id+'" name="sales_or_group['+main_loop_id+'][pur_ord_id]" id="pur_ord_id'+main_loop_id+'" oninput="calsalesorder('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += '/>';
                           result += '</td>';
                            var aa = glbidx;
                           if(main_loop_id == (aa-1)){
                            result += '<td>';
                            result += '<input type="number" value="'+ocdiscounte+'" name="sales_or_group['+main_loop_id+'][so_discount]"';
                            result += 'id="so_discount'+main_loop_id+'" oninput="calsalesorder('+main_loop_id+')"';
                            result += 'class="form-control amountfocus" style="text-align: -webkit-right;"';
                            result += 'required>';
                            result += '</td>';
                           }else{
                           result += '<td>';
                           result += '<input type="number" value="'+ocdiscounte+'" name="sales_or_group['+main_loop_id+'][so_discount]"';
                           result += 'id="so_discount'+main_loop_id+'" oninput="calsalesorder('+main_loop_id+')"';
                           result += 'class="form-control" style="text-align: -webkit-right;"';
                           result += 'required>';
                           result += '</td>';
                           }  

                           result += '<td>';
                           result += '<input type="number" value="'+parseFloat(octotalAmountf).toFixed(2)+'" name="sales_or_group['+main_loop_id+'][total_amt]"';
                           result += 'id="total_amt'+main_loop_id+'" oninput="calsalesorder('+main_loop_id+')"';
                           result += 'class="form-control"';
                           result += 'readonly="true">';
                           result += '<input type="hidden" name="sales_or_group['+main_loop_id+'][total_amt_before]"';
                           result += 'id="total_amt_before'+main_loop_id+'" oninput="calsalesorder('+main_loop_id+')"';
                           result += '>';
                           result += '</td>';                   
                            if (main_loop_id != 1) {
                                result += "<td><a data-repeater-delete='inner-field-" + main_loop_id + "' data-brand-index='" + main_loop_id + "' class='delivery-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left: 32px;margin-top: 12px;'></i></a></td>";
                            }
                            result += '</tr>';
                        // });
                    }
                }
                $('#so_discount'+main_loop_id).addClass('amountfocus');

                $(".productplace").select2({
                    placeholder: "Select Product",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                $(".mrn_por_repete_row tbody tr").not('tr#contract_div_po').remove();
                $('tr#contract_div_po').before(result);
                calsalesorder(1);
                // calgst(1);
            }

        }
    });
});


$(document).on("click", ".worksheet_delete_btn", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    var parent_id = $(this).closest('.worksheet_row-' + brandIndex).prop('id');
    $("#" + parent_id).remove();
    calc(1);
});
$(document).on("click", ".proforma_delete_btn", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    var parent_id = $(this).closest('.proforma_row-' + brandIndex).prop('id');
    $("#" + parent_id).remove();
    calproforma(1);
});
$(document).on("click", ".salesorder_delete_btn", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-bran-index');
    var parent_id = $(this).closest('.salesorder_row-' + brandIndex).prop('id');
    $("#" + parent_id).remove();
    calsalesorder(1);
})
    $(document).on("click", ".salesorder_delete_btnadd", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
   // alert(brandIndex)
    var parent_id = $(this).closest('.salesorder_rowadd-' + brandIndex).prop('id');
     $("#" + parent_id).remove();
    calsalesorder(1);
});
$(document).on("click", ".salesorder_delete_btnless", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
   // alert(brandIndex)
    var parent_id = $(this).closest('.salesorder_rowless-' + brandIndex).prop('id');
     $("#" + parent_id).remove();
    calsalesorder(1);
});
$(document).on("click", ".outwards_delete_btn", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    //alert(brandIndex)
    var parent_id = $(this).closest('.outwards_row-' + brandIndex).prop('id');
   // alert(parent_id)
    $("#" + parent_id).remove();
    caloutward(1);
});
$(document).on("click", ".outwards_delete_btnadd", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    //alert(brandIndex)
    var parent_id = $(this).closest('.outwards_rowadd-' + brandIndex).prop('id');
   // alert(parent_id)
    $("#" + parent_id).remove();
    caloutward(1);
});
$(document).on("click", ".outwards_delete_btnless", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    //alert(brandIndex)
    var parent_id = $(this).closest('.outwards_rowless-' + brandIndex).prop('id');
   // alert(parent_id)
    $("#" + parent_id).remove();
    caloutward(1);
});
$(document).on("click", ".outwards_delete_btn", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    //alert(brandIndex)
    var parent_id = $(this).closest('.outwards_row-' + brandIndex).prop('id');
   // alert(parent_id)
    $("#" + parent_id).remove();
    caloutward(1);
});
$(document).on("click", ".domestic_delete_btn", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    //alert(brandIndex)
    var parent_id = $(this).closest('.domestic_row-' + brandIndex).prop('id');
   // alert(parent_id)
    $("#" + parent_id).remove();
    caldsi(1);
});
$(document).on("click", ".domestic_delete_btnadd", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    //alert(brandIndex)
    var parent_id = $(this).closest('.domestic_rowadd-' + brandIndex).prop('id');
   // alert(parent_id)
    $("#" + parent_id).remove();
    caldsi(1);
    calsaleadd(1);
});
$(document).on("click", ".domestic_delete_btnless", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    //alert(brandIndex)
    var parent_id = $(this).closest('.domestic_rowless-' + brandIndex).prop('id');
   // alert(parent_id)
    $("#" + parent_id).remove();
    caldsi(1);
    calsaleadd(1);
});
$(document).on("click", ".cashbank_delete_btn", function () {
    alert('Are you sure you want to delete this element');
    var brandIndex = $(this).attr('data-brand-index');
    //alert(brandIndex)
    var parent_id = $(this).closest('.cashbank_row-' + brandIndex).prop('id');
   // alert(parent_id)
    $("#" + parent_id).remove();
    calcashbank(1);
});
//Add Detals
var sd = 0;
var member = sd + 1;
var limit = 1000;

$(document).on("click", ".addmrndetails", function () {
   
    lstidx = $("input[name*='saleadd']").length + 1;
    lstidx = $("input[name*='saleadd']").length + 1;
                var values = $("input[name='saleadd']")
                .map(function(){return $(this).val();}).get();
                var idx = values[values.length-1]
                if(idx == undefined || idx == null)idx=0;
                 lstidx = parseInt(idx)+1
    member = lstidx;
    if (s == limit) {
        alert("You have reached the limit of adding " + sd + " inputs");
    } else {
                      var new_div = document.createElement('div');
                    new_div = "<tr class='contract_wrapper' id='rohit" + lstidx + "'>";
                    new_div += '<td>';
                    new_div += '<input type="hidden" name="saleadd" value="'+lstidx+'" id="saleadd'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                    new_div += 'class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                     new_div += '<input type="text" name="add_details['+lstidx+'][particular_add]" id="addparticular'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                    new_div += 'class="form-control" style="text-align: -webkit-left;"';
                    new_div += '/>';
                    new_div += '</td>';
                    new_div +='<td>';
                    new_div +='<input type="text" name="add_details['+lstidx+'][particular_amount]"';
                    new_div +='id="AmountParticular'+lstidx+'" value="0" oninput="calsaleadd('+lstidx+')"';
                    new_div +='class="form-control  amountfocus" style="text-align: -webkit-right;"';
                    new_div +='/>';
                    new_div += '</td>';
                    new_div += "<td> <a data-repeater-delete='inner-field-"+lstidx+"' data-brand-index='" + member + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                    $(new_div).insertBefore("#prabal_div");
                    sd++;
                    lstidx--;
                    member++;
                  
                   
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                }
            })

            $(document).on("click", ".lessmrndetails", function () {
                //  lstidx = $("input[name*='saleless']").length + 1;
                 lstidx = $("input[name*='saleless']").length + 1;
                var values = $("input[name='saleless']")
                 .map(function(){return $(this).val();}).get();
                var idx = values[values.length-1]
                if(idx == undefined || idx == null)idx=0;
                lstidx = parseInt(idx)+1;
                member = lstidx;
                if (s == limit) {
                    alert("You have reached the limit of adding " + sd + " inputs");
                } else {;
                  
                                var new_div = document.createElement('div');
                                new_div = "<tr class='contract_wrapper' id='rohit" + lstidx + "'>";
                                new_div += '<td>';
                                new_div += '<input type="hidden" name="saleless" value="'+lstidx+'" id="saleless'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                                new_div += 'class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                                 new_div += '<input type="text" name="less_details['+lstidx+'][particular_less]" id="lessparticular'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                                new_div += 'class="form-control" style="text-align: -webkit-left;"';
                                new_div += '/>';
                                new_div += '</td>';
                                new_div +='<td>';
                                new_div +='<input type="text" name="less_details['+lstidx+'][particular_amtless]"';
                                new_div +='id="lessamtParticular'+lstidx+'"  value="0" oninput="calsaleadd('+lstidx+')"';
                                new_div +='class="form-control  amountfocus" style="text-align: -webkit-right;"';
                                new_div +='/>';
                                new_div += '</td>';
                                new_div += "<td> <a data-repeater-delete='inner-field-"+lstidx+"' data-brand-index='" + member + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                                $(new_div).insertBefore("#vipul_div");
                                s++;
                                lstidx--;
                                member++;
                              
                                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                            }
            })

            $(document).on("click", ".addsaledetails", function () {
   
                lstidx = $("input[name*='saleadd']").length + 1;
                var values = $("input[name='saleadd']")
                .map(function(){return $(this).val();}).get();
                var idx = values[values.length-1]
                if(idx == undefined || idx == null)idx=0;
                 lstidx = parseInt(idx)+1
                member = lstidx;
                if (s == limit) {
                    alert("You have reached the limit of adding " + sd + " inputs");
                } else {
                                  var new_div = document.createElement('div');
                                new_div = "<tr class='contract_wrapper' id='rohit" + lstidx + "'>";
                                new_div += '<td>';
                                new_div += '<input type="hidden" name="saleadd" value="'+lstidx+'" id="saleadd'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                                new_div += 'class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                                new_div += '<input type="text" name="add_details['+lstidx+'][particular_add]" id="addparticular'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                                new_div += 'class="form-control" style="text-align: -webkit-left;"';
                                new_div += '/>';
                                new_div += '</td>';
                                new_div +='<td>';
                                new_div +='<input type="text" name="add_details['+lstidx+'][particular_amount]"';
                                new_div +='id="AmountParticular'+lstidx+'" value="0" oninput="calsaleadd('+lstidx+')"';
                                new_div +='class="form-control  amountfocus" style="text-align: -webkit-right;"';
                                new_div +='/>';
                                new_div += '</td>';
                                new_div += "<td> <a data-repeater-delete='inner-field-"+lstidx+"' data-brand-index='" + member + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                                $(new_div).insertBefore("#prabal_div");
                                sd++;
                                lstidx--;
                                member++;
                              
                               
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                }
            })
            
            $(document).on("click", ".lesssaledetails", function () {
                // lstidx = $("input[name*='saleless']").length + 1;
                lstidx = $("input[name*='saleless']").length + 1;
                var values = $("input[name='saleless']")
                 .map(function(){return $(this).val();}).get();
                var idx = values[values.length-1]
                if(idx == undefined || idx == null)idx=0;
                lstidx = parseInt(idx)+1;
               member = lstidx;
               if (s == limit) {
                   alert("You have reached the limit of adding " + sd + " inputs");
               } else {;
                 
                               var new_div = document.createElement('div');
                               new_div = "<tr class='contract_wrapper' id='rohit" + lstidx + "'>";
                               new_div += '<td>';
                               new_div += '<input type="hidden" name="saleless" value="1" id="saleless'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                               new_div += 'class="form-control" style="width: 102px;text-align: -webkit-right;"/>';
                                new_div += '<input type="text" name="less_details['+lstidx+'][particular_less]" id="lessparticular'+lstidx+'" oninput="calsaleadd('+lstidx+')"';
                               new_div += 'class="form-control" style="text-align: -webkit-left;"';
                               new_div += '/>';
                               new_div += '</td>';
                               new_div +='<td>';
                               new_div +='<input type="text" name="less_details['+lstidx+'][particular_amtless]"';
                               new_div +='id="lessamtParticular'+lstidx+'"  value="0" oninput="calsaleadd('+lstidx+')"';
                               new_div +='class="form-control  amountfocus" style="text-align: -webkit-right;"';
                               new_div +='/>';
                               new_div += '</td>';
                               new_div += "<td> <a data-repeater-delete='inner-field-"+lstidx+"' data-brand-index='" + member + "' class='contract-delete-btn' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                               $(new_div).insertBefore("#vipul_div");
                               s++;
                               lstidx--;
                               member++;
                             
                               $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus();
                           }
           })


                        function remove_cashbank(id)
                        {
                           // alert(id)
                            // alert(id);
                            swal({
                                icon:'warning',
                                title: "Sure",
                                text:'Are you sure you want to delete it?',
                                buttons: ["Cancel","Confirm"],
                                dangerMode:true
                            }).then((willDelete) => {
                                if (willDelete) {
                                    $.ajax({
                                        type: 'DELETE',
                                        url: '/cash_bank/' + id,
                                        success: function (response) {
                                            // $('.loader').hide();
                                            $("#rohit"+id).remove(); 
                                        },
                                        error: function (err) {
                                            console.log(err);
                                        }
                                    });
                                }
                              });
                        } 

                         


                    
                    function checkvalue(id)
                    {
                    //   alert("prabal")
                            var cashtypejv = $('#cashtypejv'+id).val();
                            if(cashtypejv =="Debit") {
                                $('#cashamountjv'+id).prop( "readOnly",false );
                            } else {       
                                $('#cashamountjv'+id).prop( "readOnly",true );
                            }
                            if(cashtypejv =="Credit") {
                                $('#cashamountcr'+id).prop( "readOnly",false );
                            } else {       
                                $('#cashamountcr'+id).prop( "readOnly",true );
                            }
                    }
                    $(document).ready(function(){
                        $(".prabal").focus(function(){
                         //   alert("hh")
                            document.getElementById("cashremark1").focus();
                        });
                      });
                    //   $(document).ready(function(){ 
                    //      alert($("#order4444"+i).val()) 
                    //     for (i=0;i<$('#outwardprint tr:eq(0) td').length;i++) {
                    //        var total = 0;
                    //         $('td.rowDataSd:eq(' + i + ')', 'tr').each(function(i) {
                    //            total = total + parseInt($(this).text());
                    //            alert("p") 
                    //         });            
                    //         $('#sum_table tr:last td').eq(i).text(total);
                    //     }
                    
                    // });


//add product type master
$(".producttype").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/product_type_master/product_type_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Product Type Master",
                            text: "Product Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/product_type_master/product_type_master";
                }
            else{
                    swal({
                            title: "Product Type Master",
                            text: "Duplicate Product Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/product_type_master/edit_product_type_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Product Type Master",
                        text: "Product Type Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/product_type_master/product_type_master";
                }else{
                    swal({
                        title: "Product Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".producttype").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/product_type_master/product_type_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Product Type Master",
                            text: "Product Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/product_type_master/product_type_master";
                }
            else{
                    swal({
                            title: "Product Type Master",
                            text: "Duplicate Product Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/product_type_master/edit_product_type_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Product Type Master",
                        text: "Product Type Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/product_type_master/product_type_master";
                }else{
                    swal({
                        title: "Product Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add product type master

//product type master edit
$(document).on('click', '.edit_product_type_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/product_type_master/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['product_type_master']._id;
                 var ptype_descr  = response['product_type_master'].Description;
                var ptype_Code = response['product_type_master'].Code;
                $('.ptype_descr').val(ptype_descr);
               $('.ptype_Code').val(ptype_Code);
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/product_type_master/edit_product_type_master/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//end product type master edit


//delete product type master
$(document).on('click', '.delete-producttype', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/product_type_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Product Type Master",
                    text: "This Product Type Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/product_type_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/product_type_master/product_type_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});



//end delete product type master


//add purchase type master
$(".purchasetype").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/purchase_type_master/purchase_type_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Purchase Type Master",
                            text: "Purchase Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/purchase_type_master/purchase_type_master";
                }
            else{
                    swal({
                            title: "Purchase Type Master",
                            text: "Duplicate Purchase Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/purchase_type_master/edit_purchase_type_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Purchase Type Master",
                        text: "Purchase Type Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/purchase_type_master/purchase_type_master";
                }else{
                    swal({
                        title: "Purchase Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".purchasetype").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/purchase_type_master/purchase_type_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Purchase Type Master",
                            text: "Purchase Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/purchase_type_master/purchase_type_master";
                }
            else{
                    swal({
                            title: "Purchase Type Master",
                            text: "Duplicate Purchase Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/purchase_type_master/edit_purchase_type_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Purchase Type Master",
                        text: "Purchase Type Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/purchase_type_master/purchase_type_master";
                }else{
                    swal({
                        title: "Purchase Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add purchase type master

//purchase type master edit
$(document).on('click', '.edit_purchase_type_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/purchase_type_master/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['purchase_type_master']._id;
                 var ptype_descr  = response['purchase_type_master'].Description;
                var ptype_Code = response['purchase_type_master'].Code;
                $('.ptype_descr').val(ptype_descr);
               $('.ptype_Code').val(ptype_Code);
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/purchase_type_master/edit_purchase_type_master/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//end purchase type master edit


//delete purchase type master
$(document).on('click', '.delete-purchasetype', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/purchase_type_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Purchase Type Master",
                    text: "This Purchase Type Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/purchase_type_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/purchase_type_master/purchase_type_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete purchase type master

//add warehouse type master
$(".warehousetype").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/warehouse_type_master/warehouse_type_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Warehouse Type Master",
                            text: "Warehouse Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/warehouse_type_master/warehouse_type_master";
                }
            else{
                    swal({
                            title: "Warehouse Type Master",
                            text: "Duplicate Warehouse Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/warehouse_type_master/edit_warehouse_type_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Warehouse Type Master",
                        text: "Warehouse Type Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/warehouse_type_master/warehouse_type_master";
                }else{
                    swal({
                        title: "Warehouse Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".warehousetype").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/warehouse_type_master/warehouse_type_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Warehouse Type Master",
                            text: "Warehouse Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/warehouse_type_master/warehouse_type_master";
                }
            else{
                    swal({
                            title: "Warehouse Type Master",
                            text: "Duplicate Warehouse Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/warehouse_type_master/edit_warehouse_type_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Warehouse Type Master",
                        text: "Warehouse Type Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/warehouse_type_master/warehouse_type_master";
                }else{
                    swal({
                        title: "Warehouse Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add Warehouse type master

//Warehouse type master edit
$(document).on('click', '.edit_warehouse_type_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/warehouse_type_master/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['warehouse_type_master']._id;
                 var description  = response['warehouse_type_master'].description;
                var code = response['warehouse_type_master'].code;
              
                $('.description').val(description);
               $('.code').val(code);
             
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/warehouse_type_master/edit_warehouse_type_master/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//end warehouse type master edit


//delete warehouse type master
$(document).on('click', '.delete-warehousetype', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/warehouse_type_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Warehouse Type Master",
                    text: "This Warehouse Type Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/warehouse_type_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/warehouse_type_master/warehouse_type_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete warehouse type master

//add warehouse  master
$(".warehouse").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/warehouse_master/warehouse_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Warehouse Master",
                            text: "Warehouse Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/warehouse_master/warehouse_master";
                }
            else{
                    swal({
                            title: "Warehouse Master",
                            text: "Duplicate Warehouse name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/warehouse_master/edit_warehouse_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Warehouse Master",
                        text: "Warehouse Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/warehouse_master/warehouse_master";
                }else{
                    swal({
                        title: "Warehouse Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".warehouse").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/warehouse_master/warehouse_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Warehouse Master",
                            text: "Warehouse Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/warehouse_master/warehouse_master";
                }
            else{
                    swal({
                            title: "Warehouse Master",
                            text: "Duplicate Warehouse name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/warehouse_master/edit_warehouse_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Warehouse Master",
                        text: "Warehouse Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/warehouse_master/warehouse_master";
                }else{
                    swal({
                        title: "Warehouse Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add Warehouse master

//Warehouse master edit

//end warehouse type master edit


//delete warehouse type master
$(document).on('click', '.delete-warehouse', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/warehouse_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Warehouse Master",
                    text: "This Warehouse Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/warehouse_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/warehouse_master/warehouse_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete warehouse master


//add country master
$(".countryAdd").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/country_master/country_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Country Master",
                            text: "Country Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/country_master/country_master";
                }
            else{
                    swal({
                            title: "Country Master",
                            text: "Duplicate Country name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/country_master/edit_country_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Country Master",
                        text: "Country Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/country_master/country_master";
                }else{
                    swal({
                        title: "Country Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".countryAdd").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/country_master/country_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Country Master",
                            text: "Country Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/country_master/country_master";
                }
            else{
                    swal({
                            title: "Country Master",
                            text: "Duplicate Country name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/country_master/edit_country_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Country Master",
                        text: "Country Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/country_master/country_master";
                }else{
                    swal({
                        title: "Country Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add country  master

//country edit
$(document).on('click', '.edit_country_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/country_master/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['country_master']._id;
                 var countryName  = response['country_master'].countryName;
                var countryCode = response['country_master'].countryCode;
                $('.countryName').val(countryName);
               $('.countryCode').val(countryCode);
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/country_master/edit_country_master/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//endcountry master edit


//delete country master
$(document).on('click', '.delete-country', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/country_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Country Master",
                    text: "This Country Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/country_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/country_master/country_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete country master

//add color master
$(".colorAdd").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/color_master/color_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Color Master",
                            text: "Color Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/color_master/color_master";
                }
            else{
                    swal({
                            title: "Color Master",
                            text: "Duplicate Color name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/color_master/edit_color_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Color Master",
                        text: "Color Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/color_master/color_master";
                }else{
                    swal({
                        title: "Color Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".colorAdd").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/color_master/color_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Color Master",
                            text: "Color Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/color_master/color_master";
                }
            else{
                    swal({
                            title: "Color Master",
                            text: "Duplicate Color name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/color_master/edit_color_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Color Master",
                        text: "Color Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/color_master/color_master";
                }else{
                    swal({
                        title: "Color Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add color  master

//color edit
$(document).on('click', '.edit_color_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/color_master/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['color_master']._id;
                 var description  = response['color_master'].description;
                var code = response['color_master'].code;
                $('.description').val(description);
               $('.code').val(code);
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/color_master/edit_color_master/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//end color master edit


//delete color master
$(document).on('click', '.delete-color', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/color_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Color Master",
                    text: "This Color Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/color_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/color_master/color_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete color master


//add fg type master
$(".fgtypeAdd").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/fg_type_master/fg_type_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "FG Type Master",
                            text: "FG Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/fg_type_master/fg_type_master";
                }
            else{
                    swal({
                            title: "FG Type Master",
                            text: "Duplicate FG Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/fg_type_master/edit_fg_type_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "FG Type Master",
                        text: "FG Type Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/fg_type_master/fg_type_master";
                }else{
                    swal({
                        title: "FG Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".fgtypeAdd").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/fg_type_master/fg_type_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "FG Type Master",
                            text: "FG Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/fg_type_master/fg_type_master";
                }
            else{
                    swal({
                            title: "FG Type Master",
                            text: "Duplicate FG Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/fg_type_master/edit_fg_type_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "FG Type Master",
                        text: "FG Type Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/fg_type_master/fg_type_master";
                }else{
                    swal({
                        title: "FG Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add FG Type   master

//FG Type  edit
$(document).on('click', '.edit_fg_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/fg_type_master/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['fg_type_master']._id;
                 var description  = response['fg_type_master'].description;
                var code = response['fg_type_master'].code;
                $('.description').val(description);
               $('.code').val(code);
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/fg_type_master/edit_fg_type_master/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//end FG Type  master edit


//delete FG Type  master
$(document).on('click', '.delete-fg', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/fg_type_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "FG Type Master",
                    text: "This FG Type Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/fg_type_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/fg_type_master/fg_type_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete FG Type master

//add fg category master
$(".fgCategoryAdd").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/fg_category_master/fg_category_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "FG Category Master",
                            text: "FG Category Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/fg_category_master/fg_category_master";
                }
            else{
                    swal({
                            title: "FG Category Master",
                            text: "Duplicate FG Category name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/fg_category_master/edit_fg_category_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "FG Category Master",
                        text: "FG Category Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/fg_category_master/fg_category_master";
                }else{
                    swal({
                        title: "FG Category Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".fgCategoryAdd").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/fg_category_master/fg_category_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "FG Category Master",
                            text: "FG Category Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/fg_category_master/fg_category_master";
                }
            else{
                    swal({
                            title: "FG Category Master",
                            text: "Duplicate FG Category name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/fg_category_master/edit_fg_category_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "FG Category Master",
                        text: "FG Category Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/fg_category_master/fg_category_master";
                }else{
                    swal({
                        title: "FG Category Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add FG category   master

//FG category  edit
$(document).on('click', '.edit_fg_category_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/fg_category_master/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['fg_category_master']._id;
                 var description  = response['fg_category_master'].description;
                var code = response['fg_category_master'].code;
                var hsn  = response['fg_category_master'].hsn;
                var gst = response['fg_category_master'].gst;
                $('.description').val(description);
               $('.code').val(code);
               $('.hsn').val(hsn);
               $('.gst').val(gst);
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/fg_category_master/edit_fg_category_master/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//end FG category  master edit


//delete FG category  master
$(document).on('click', '.delete-fg_category', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/fg_category_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "FG Category Master",
                    text: "This FG Category Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/fg_category_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/fg_category_master/fg_category_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete FG category master

//add Print master
$(".printAdd").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/print_master/print_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Print Master",
                            text: "Print Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/print_master/print_master";
                }
            else{
                    swal({
                            title: "Print Master",
                            text: "Duplicate Print name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/print_master/edit_print_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Print Master",
                        text: "Print Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/print_master/print_master";
                }else{
                    swal({
                        title: "Print Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".printAdd").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/print_master/print_master_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Print Master",
                            text: "Print Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/print_master/print_master";
                }
            else{
                    swal({
                            title: "Print Master",
                            text: "Duplicate Print name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/print_master/edit_print_master/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Print Master",
                        text: "Print Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/print_master/print_master";
                }else{
                    swal({
                        title: "Print Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add print_master   master

//print_master  edit
$(document).on('click', '.edit_print_master_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/print_master/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['print_master']._id;
                 var description  = response['print_master'].description;
                var code = response['print_master'].code;
                
                $('.description').val(description);
               $('.code').val(code);
             
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/print_master/edit_print_master/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//end print_master edit


//delete print_master
$(document).on('click', '.delete-print_master', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/print_master/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Print Master",
                    text: "This Print Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/print_master/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/print_master/print_master';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete print_master



//add raw mat type master
$(".addRawMatType").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/raw_mat_typ_mast/raw_mat_typ_mast_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Raw Mat Type Master",
                            text: "Raw Mat Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/raw_mat_typ_mast/raw_mat_typ_mast";
                }
            else{
                    swal({
                            title: "Raw Mat Type Master",
                            text: "Duplicate Raw Mat Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/raw_mat_typ_mast/edit_raw_mat_typ_mast/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Raw Mat Type Master",
                        text: "Raw Mat Type Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/raw_mat_typ_mast/raw_mat_typ_mast";
                }else{
                    swal({
                        title: "Raw Mat Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".addRawMatType").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxcountry").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/raw_mat_typ_mast/raw_mat_typ_mast_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Raw Mat Type Master",
                            text: "Raw Mat Type Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/raw_mat_typ_mast/raw_mat_typ_mast";
                }
            else{
                    swal({
                            title: "Raw Mat Type Master",
                            text: "Duplicate Raw Mat Type name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/raw_mat_typ_mast/edit_raw_mat_typ_mast/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Raw Mat Type Master",
                        text: "Raw Mat Type Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/raw_mat_typ_mast/raw_mat_typ_mast";
                }else{
                    swal({
                        title: "Raw Mat Type Master",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
//end add Raw Mat Type master

//raw mat typ master  edit
$(document).on('click', '.edit_raw_mat_typ_btn', function () {
    var ctgid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/raw_mat_typ_mast/' + ctgid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var vhpxcountry = response['raw_mat_typ_mast']._id;
                 var description  = response['raw_mat_typ_mast'].description;
                var code = response['raw_mat_typ_mast'].code;
                
                $('.description').val(description);
               $('.code').val(code);
             
               $('.vhpxcountry').val(vhpxcountry);
               $('.ptype_descr').focus();
               $("#ptypemast").attr("action", "/raw_mat_typ_mast/edit_raw_mat_typ_mast/" + vhpxcountry);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
//end raw mat type master edit


//delete edit_raw_mat_typ_mast
$(document).on('click', '.delete-raw_mat_typ', function () {
    $('.loader').show();
    let id = $(this).attr('data-id');
    $.ajax({
        type: 'DELETE',
        url: '/raw_mat_typ_mast/confirm/' + id,
        success: function (response) {
            console.log(response)
            if(response['success'] == "true"){
                swal({
                    title: "Raw Mat Type Master",
                    text: "This Raw Mat Type Is Used",
                    icon: "warning",
                    timer: 1000,
                    buttons: false
                 
                }) 
            }
            if(response['success'] == "false"){
                swal({
                    icon:'warning',
                    title: "Sure",
                    text:'Are you sure you want to delete it?',
                    buttons: ["Cancel","Confirm"],
                    dangerMode:true
                }).then((willDelete) => {
                    if (willDelete) {
                        $.ajax({
                            type: 'DELETE',
                            url: '/raw_mat_typ_mast/' + id,
                            success: function (response) {
                                // $('.loader').hide();
                                window.location.href = '/raw_mat_typ_mast/raw_mat_typ_mast';
                                $('.loader').hide();
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });
                    }
                  });
            }
            // window.location.href = '/state_master/state_master';
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
   

});

//end delete raw_mat_typ_mast

//add jw setup
$(".addJwSetup").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxproduct").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/jw_setup/jw_setup_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "JW Setup",
                            text: "JW Setup Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/jw_setup/jw_setup_add";
                }
            else{
                    swal({
                            title: "JW Setup",
                            text: "Duplicate JW Setup name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/jw_setup/edit_jw_setup/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "JW Setup",
                        text: "JW Setup Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/jw_setup/jw_setup";
                }else{
                    swal({
                        title: "JW Setup",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".addJwSetup").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxproduct").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/jw_setup/jw_setup_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "JW Setup",
                            text: "JW Setup Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/jw_setup/jw_setup_add";
                }
            else{
                    swal({
                            title: "JW Setup",
                            text: "Duplicate JW Setup name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/jw_setup/edit_jw_setup/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "JW Setup",
                        text: "JW Setup Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/jw_setup/jw_setup";
                }else{
                    swal({
                        title: "JW Setup",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
// end add jw setup

//delete jw setup
$(document).on('click', '.delete_jw_setup', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/jw_setup_rm/'+ id,
                success: function (response) {
                     window.location.href = '/jw_setup_rm/jw_setup_rm';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});

//end delete jw setup

//edit jw setup
$(".lock-jwsetup").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxproduct").val();
      //  alert(id)
        $.ajax({
            url:'/jw_setup/edit_jw_setup/'+id+'',  
            method:'POST',
            dataType: 'json',
            data:data,
           success: function(dat){
          //  alert("data")
          // alert(dat.success);
               if(dat.success == true){
                   $('#addcity').modal('hide');
                   swal({
                           title: "JW Setup",
                           text: "JW Setup Updated",
                           icon: "success",
                           timer: 4000,
                           buttons: false
                        
                       }) 
                       window.location.href = "/jw_setup/jw_setup";
               }
           else{
                   swal({
                           title: "JW Setup",
                           text: "Duplicate JW Setup  with same name is not allowed",
                           icon: "error",
                           timer: 4000,
                           buttons: false
                       }) 
               }
           }
      
       })
       
    }
})


$(".lock-jwsetup").click(function(ev){
    ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxproduct").val();
      //  alert(id)
        $.ajax({
            url:'/jw_setup/edit_jw_setup/'+id+'',  
            method:'POST',
            dataType: 'json',
            data:data,
           success: function(dat){
          //  alert("data")
          // alert(dat.success);
               if(dat.success == true){
                   $('#addcity').modal('hide');
                   swal({
                           title: "JW Setup",
                           text: "JW Setup Updated",
                           icon: "success",
                           timer: 4000,
                           buttons: false
                        
                       }) 
                       window.location.href = "/jw_setup/jw_setup";
               }
           else{
                   swal({
                           title: "JW Setup",
                           text: "Duplicate JW Setup  with same name is not allowed",
                           icon: "error",
                           timer: 4000,
                           buttons: false
                       }) 
               }
           }
      
       })
       
    }
}
})

//end edit jw setup

function remove_updatefgMaster(id)
{
    alert('Are you sure you want to delete this element');
      counter--;
        member--;
        $("#prabal"+id).remove(); 
} 

//finish goods add
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addfinishgoods', function()
{
    lstidx = $("input[name*='cntrer']").length + 1;
    var values = $("input[name='cntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/product_mast/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                var new_div = '<tr class= "product_wrapper" id="prabal'+counter+'">'
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='';
                new_div +='<select name="product_mast_group['+counter+'][raw_matrl_nm]" id="raw_matrl_nm'+counter+'" class="form-control prbank selectproductfocus  productplace" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < rowmatname.length; j++) {
                        new_div += "<option value='" + rowmatname[j]['_id'] + "' data-product_id='" + rowmatname[j]['_id'] + "'>" + rowmatname[j]['Rm_Des'] + "</option>";
                    }
                new_div +='</select></td>';

                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Qty/Psc" id="widthGSM'+counter+'" name="product_mast_group['+counter+'][qty_pcs]" type="text" style="width:100%"/></td>';
                
                new_div +='<td>';
                new_div +='<select name="product_mast_group['+counter+'][sku]" id="sku'+counter+'" class="form-control prbank sku" style="width:100%;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < StockUnit.length; j++) {
                        new_div += "<option value='" + StockUnit[j]['_id'] + "' data-product_id='" + StockUnit[j]['_id'] + "'>" + StockUnit[j]['SKUName'] + "</option>";
                    }
                new_div +='</select></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Rate" oninput="calFinishGoods()"  id="rate'+counter+'"  name="product_mast_group['+counter+'][rate]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    placeholder: "Select Product Name",
                    allowClear: true,
                });
                $(".sku").select2({
                    placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });    
  } 
});
//end finish goods add

// finish goods add link
function remove_link(id)
{
    alert('Are you sure you want to delete this element');
      counter--;
        member--;
        $("#praballink"+id).remove(); 
}


var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addlink', function()
{
    lstidx = $("input[name*='link']").length + 1;
    var values = $("input[name='link']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/product_mast/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                // console.log(rowmatname);
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                // var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                var new_div = '<tr class= "product_wrapper " id="praballink'+counter+'">'
                new_div +='<td>';
                new_div +='<input type="hidden" name="link" value="'+counter+'" id="link'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus " placeholder="Portal"  name="product_mast_link_group['+counter+'][portal]" type="text" style="width:100%"/>';
                new_div +='</td>';

                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Description" id="description'+counter+'" name="product_mast_link_group['+counter+'][description]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Our/Link" id="ourLink'+counter+'"  name="product_mast_link_group['+counter+'][ourLink]" type="text" style="width:100%"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Link"  name="product_mast_link_group['+counter+'][link]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_link("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_link");
                counter++;
                member++;
                $(".productplace").select2({
                    // placeholder: "Select Product Name",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });    
  } 
});
//end finish goods add link

//finish goods add point
function remove_point(id)
{
    alert('Are you sure you want to delete this element');
      counter--;
        member--;
        $("#prabalpoint"+id).remove(); 
}


var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addpoint', function()
{
    lstidx = $("input[name*='point']").length + 1;
    var values = $("input[name='point']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/product_mast/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                // console.log(rowmatname);
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                // var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                var new_div = '<tr class= "product_wrapper" id="prabalpoint'+counter+'">'
                new_div +='<td>';
                new_div +='<input type="hidden" name="point" value="'+counter+'" id="point'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus " placeholder="Description"  name="product_mast_point_group['+counter+'][descriptionPoint]" type="text" style="width:100%"/>';
                new_div +='</td>';

                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="" id="'+counter+'" name="product_mast_point_group['+counter+'][a]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control " placeholder="Our/Link" id="ourLink'+counter+'"  name="product_mast_link_group['+counter+'][ourLink]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Link"  name="product_mast_link_group['+counter+'][link]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_point("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_point");
                counter++;
                member++;
                $(".productplace").select2({
                    // placeholder: "Select Product Name",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });    
  } 
});
//end finish goods add point

//finish goods add debtor
function remove_debtor(id)
{
    alert('Are you sure you want to delete this element');
      counter--;
        member--;
        $("#prabaldebtor"+id).remove(); 
}



var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.adddebtor', function()
{
    lstidx = $("input[name*='debtor']").length + 1;
    var values = $("input[name='debtor']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/product_mast/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                // console.log(rowmatname);
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                // var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                var new_div = '<tr class= "product_wrapper" id="prabaldebtor'+counter+'">'
                new_div +='<td>';
                new_div +='<input type="hidden" name="debtor" value="'+counter+'" id="debtor'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus " placeholder="Debtor List"  name="product_mast_debtor_group['+counter+'][debList]" type="text" style="width:100%"/>';
                new_div +='</td>';

                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Alias" id="alias'+counter+'" name="product_mast_debtor_group['+counter+'][alias]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control " placeholder="Our/Link" id="ourLink'+counter+'"  name="product_mast_link_group['+counter+'][ourLink]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Link"  name="product_mast_link_group['+counter+'][link]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_debtor("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_debtor");
                counter++;
                member++;
                $(".productplace").select2({
                    // placeholder: "Select Product Name",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });    
  } 
});
//end finish goods add debtor

//finish goods add img
function remove_img(id)
{
    alert('Are you sure you want to delete this element');
      counter--;
        member--;
        $("#prabalimg"+id).remove(); 
}



var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addimg', function()
{
    lstidx = $("input[name*='img']").length + 1;
    var values = $("input[name='img']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/product_mast/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                rowmatname = data['rowmatname'];
                // console.log(rowmatname);
                StockUnit = data['StockUnit'];
                var new_div = document.createElement('div');
                // var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                var new_div = '<tr class= "product_wrapper" id="prabalimg'+counter+'">'
                new_div +='<td>';
                new_div +='<input type="hidden" name="img" value="'+counter+'" id="img'+counter+'">';
                new_div +='';
                new_div +='<input class="form-control selectproductfocus " placeholder="Image Description"  name="descriptionimg" type="text" style="width:100%"/>';
                new_div +='</td>';

                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus"  id="img'+counter+'" name="product_mast_img_group['+counter+'][img]" type="file" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control " placeholder="Our/Link" id="ourLink'+counter+'"  name="product_mast_link_group['+counter+'][ourLink]" type="text" style="width:100%"/></td>';
                // new_div +='<td>';
                // new_div +='<input class="form-control amountfocus" placeholder="Link"  name="product_mast_link_group['+counter+'][link]" type="text" style="width:100%"/></td>';
                new_div +="<td><a onclick='remove_img("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_img");
                counter++;
                member++;
                $(".productplace").select2({
                    // placeholder: "Select Product Name",
                    allowClear: true,
                });
                $(".sku").select2({
                    // placeholder: "Select SKU",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });    
  } 
});
//end finish goods add debtor




function calFinishGoods(callback) {
    var ratesum=0;
    var total =0;
      lstidx= $("input[name*='cntrer']").length;
     member = lstidx;
     if (lstidx === undefined) lstidx = 1;
     else lstidx = member;
     for (i = 0; i <= lstidx; i++) {
         if($("#rate" + i).val()!=undefined)
         {
            rate= $("#rate" + i).val();
            ratesum=ratesum +parseFloat($("#rate" + i).val());
         }
     }
     $("#total").val((ratesum).toFixed(2));
     this.calsaleadd(1);
 }


 /// Stock Opening Module add
var counter = 0;
var member = counter + 1;
var limit = 100;
$(document).on('click', '.addStockOpening', function()
{
    lstidx = $("input[name*='cntrer']").length+1;
    var values = $("input[name='cntrer']")
              .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/stock_opening_module_rm/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                var StockUnit = data['Stock_Unit'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='prabal"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='<select name="stock_opening_module_group['+counter+'][so_disc]" class="form-control selectproductfocus prbank productplace" style="width: 377px;">';
                new_div +='<option value=""></option>';
                new_div +='</select>';            
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Qty"  name="stock_opening_module_group['+counter+'][so_qty]" type="text"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Rate"  name="stock_opening_module_group['+counter+'][so_rate]" type="text"/></td>';
                new_div +='<td>';
                new_div += '<select   name="stock_opening_module_group['+counter+'][unit]" "value=""  class="form-control prbank  unit" style="width:120px;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < StockUnit.length; j++) {
                        new_div += "<option value='" + StockUnit[j]['_id'] + "' data-product_id='" + StockUnit[j]['_id'] + "'>" + StockUnit[j]['SKUName'] + "</option>";
                }
                new_div +='</select></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Min Stk Qty"  name="stock_opening_module_group['+counter+'][minStkQty]" type="text"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Re-Order Qty"  name="stock_opening_module_group['+counter+'][reOrderQty]" type="text"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Max Stk Qty"  name="stock_opening_module_group['+counter+'][maxStkQty]" type="text"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Master Pack"  name="stock_opening_module_group['+counter+'][masterPack]" type="text"/></td>';
                new_div +="<td><a onclick='remove_updateproduct("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $('.productplace').select2({
                    placeholder: 'Product Description',
                    maximumSelectionLength: 3,
                    allowClear: true,
                    ajax:{
                        type: "GET",
                        url: '/stock_opening_module_rm/getshortdesciption',
                        dataType: 'json',
                        data: function (term) {
                            return {
                                term: term
                            };
                        },            
                        success: function (data) {
                           console.log(data);
                        }
                    }
                });
                $(".unit").select2({
                    placeholder: "Select Unit",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});


 // Stock Opening Module add end

 //save stock opening module
 $(".addStockOp").click(function(ev){
    ev.preventDefault();
 
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxproduct").val();
    //   alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/stock_opening_module/stock_opening_module_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
            //    alert("data")
            // alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Stock Opening Module",
                            text: "Stock Opening Module Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/stock_opening_module/stock_opening_module_add";
                }
            else{
                    swal({
                            title: "Stock Opening Module",
                            text: "Duplicate Stock Opening Module name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/stock_opening_module/edit_stock_opening_module/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            
            success: function(dat){
            //    alert("updata")
            //    console.log(data);
            // alert(data);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Stock Opening Module",
                        text: "Stock Opening Module Succesfully Update",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/stock_opening_module/stock_opening_module";
                }else{
                    swal({
                        title: "Stock Opening Module",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
})



$(".addStockOp").on("keydown",function(ev){
    // ev.preventDefault();
    if(ev.keyCode == 13){
    if($(this).closest('form').valid()){
      
        var data = $(this).closest('form').serialize();
        var id = $("#vhpxproduct").val();
      // alert("p"+id)
       if(id ==""|| id ==undefined){
        $.ajax({
            
            url:'/stock_opening_module/stock_opening_module_add',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
          //      alert("data")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                            title: "Stock Opening Module",
                            text: "Stock Opening Module Saved",
                            icon: "success",
                            timer: 4000,
                            buttons: false
                         
                        }) 
                        window.location.href = "/stock_opening_module/stock_opening_module_add";
                }
            else{
                    swal({
                            title: "Stock Opening Module",
                            text: "Duplicate Stock Opening Module name is not allowed",
                            icon: "error",
                            timer: 4000,
                            buttons: false
                        }) 
                }
            }
        })
    }else{
        $.ajax({
            url:'/stock_opening_module/edit_stock_opening_module/'+id+'',
            method:'POST',
            dataType: 'json',
            data:data,
            success: function(dat){
               //alert("updata")
           //  alert(dat.success);
                if(dat.success == true){
                    $('#addcity').modal('hide');
                    swal({
                        title: "Stock Opening Module",
                        text: "Stock Opening Module Update Succesfully",
                        icon: "success",
                        timer: 4000,
                        buttons: false
                        }) 
                        window.location.href = "/stock_opening_module/stock_opening_module";
                }else{
                    swal({
                        title: "Stock Opening Module",
                        text: "Error",
                        icon: "error",
                        timer: 4000,
                        buttons: false
                        }) 
                      //  window.location.href = "/customer/customer_list";
                }
            }
        })
    }
    }
}
})
 //end save stock opening module
 ///warehouse Group master Created By Rohit Mishra 25-01-2020
 $(document).on('click', '.edit_warehousegroupmsat_btn', function () {
    var id = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/warehouseGroup_mast/' + id,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                var grpid = response['WarehousrGroup']._id;
                var whgrp_name  = response['WarehousrGroup'].whgrp_name;
                var whprimary_nm = response['WarehousrGroup'].whprimary_nm;
                var whundergrp_nm  = response['WarehousrGroup'].whundergrp_nm;
                $('#whgrp_name').val(whgrp_name);
                $('#whprimary_nm').val(whprimary_nm).trigger('change');
                $('#whundergrp_nm').val(whundergrp_nm).trigger('change');
                $('#submit').hide();
                $('#update').show();
                $("#warehoustup").attr("action", "/warehouseGroup_mast/update_warehouseGroup/" + grpid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.edit_subwarehouse_btn', function () {
    var id = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/subwarehouse_master/' + id,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                var subid = response['Subwarehouse']._id;
                var subwarehose_name  = response['Subwarehouse'].subwarehose_name;
                var location = response['Subwarehouse'].location;
                var whgroup  = response['Subwarehouse'].whgroup;
                var area  = response['Subwarehouse'].area;
                var address = response['Subwarehouse'].address;
                var warehouseDefault = response['Subwarehouse'].warehouseDefault;
                $('#subwarehose_name').val(subwarehose_name);
                $('#location').val(location).trigger('change');
                $('#whgroup').val(whgroup).trigger('change');
                $('#area').val(area);
                $('#address').val(address);
                $('#warehouseDefault').val(warehouseDefault).trigger('change');
                $('.ptype_descr').focus();
                $("#subwarehouseup").attr("action", "/subwarehouse_master/update_subwarehouse/" + subid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.edit_tag_btn', function () {
    var id = $(this).attr('data-id');
    $('.loader').show();
    // alert(id);
    $.ajax({
        type: 'GET',
        url: '/tag_master/'+id,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                var tagid = response['Tagmast']._id;
                var tag_name  = response['Tagmast'].tag_name;
                var code = response['Tagmast'].code;
                $('#tag_name').val(tag_name);
                $('#code').val(code);
                $('.ptype_descr').focus();
                $("#tagupdate").attr("action", "/tag_master/update_tagmaster/" + tagid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});

$(document).on('click', '.edit_onineportal_btn', function () {
    var id = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/onlineportal_master/' + id,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var onid = response['Onlineportal']._id;
                var onlineprtl_name  = response['Onlineportal'].onlineprtl_name;
                var associted_ledgr = response['Onlineportal'].associted_ledgr;
                $('#onlineprtl_name').val(onlineprtl_name);
                $('#associted_ledgr').val(associted_ledgr).trigger('change');
                $('.ptype_descr').focus();
                $("#onlineupdate").attr("action", "/onlineportal_master/update_onlineportal/" + onid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.edit_sales_btn', function () {
    var id = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/salesman_master/' + id,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                // //console.log(response);
                var onid = response['Salesman']._id;
                var nameof_salesman  = response['Salesman'].nameof_salesman;
                var account_ledgr = response['Salesman'].account_ledgr;
                var code = response['Salesman'].code;
                $('#nameof_salesman').val(nameof_salesman);
                $('#account_ledgr').val(account_ledgr).trigger('change');
                $('#code').val(code);
                $('.ptype_descr').focus();
                $("#salespdate").attr("action", "/salesman_master/update_salesmaster/" + onid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
$(document).on('click', '.Edit_jobwork_mast', function () {
    var id = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/jobworkers_mast/' + id,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
               var City =  response['City'];
                var jobid = response['Jobwork']._id;
                var nameofjw_nm  = response['Jobwork'].nameofjw_nm;
                var jw_alias = response['Jobwork'].jw_alias;
                var addof_jw = response['Jobwork'].addof_jw;
                var primarywarehouse  = response['Jobwork'].primarywarehouse;
                var accountledger = response['Jobwork'].accountledger;
                var jwgst = response['Jobwork'].jwgst;
                var jwemail_addres  = response['Jobwork'].jwemail_addres;
                var jwcontact_no = response['Jobwork'].jwcontact_no;
                var bank_details = response['Jobwork'].bank_details;
                $('#nameofjw_nm').val(nameofjw_nm);
                $('#jw_alias').val(jw_alias);
                $('#addof_jw').val(addof_jw);
                $('#primarywarehouse').val(primarywarehouse);
                $('#accountledger').val(accountledger).trigger('change');
                $('#jwgst').val(jwgst);
                $('#jwemail_addres').val(jwemail_addres);
                $('#jwcontact_no').val(jwcontact_no);
                $('#jwcontact_no').val(jwcontact_no);
                $('#bank_details').val(bank_details);
                var html = '';
                if(bank_details!=null)
                {
                    for (p = 0; p < bank_details.length; p++) {
                        html+='<div data-repeater-list="bank_details">';
                        html+='<div class="form-group bankrow clearfix" data-repeater-item>';
                        if(p!=0){
                            html+='<button class="delbankbtn" data-repeater-delete type="button"><i  class="fa fa-close"></i> </button>';
                        }
                        html+='<div class="row">';
                        html+='<div class="col-sm-4 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">Bank Name</label>';
                        html+='<div class="col-md-9">';
                        if(bank_details[p]['bank_name']!=undefined) var bank_name = bank_details[p]['bank_name'];
                        else var bank_name ='';
                        html+='<input type="text"  class="form-control" name="bank_details['+p+'][bank_name]" placeholder="Bank Name" value="'+bank_name+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="col-sm-4 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">Bank Address</label>';
                        html+='<div class="col-md-9">';
                        if(bank_details[p]['bank_add']!=undefined) var bank_add = bank_details[p]['bank_add'];
                        else var bank_add ='';
                        html+='<input type="text"  class="form-control" name="bank_details['+p+'][bank_add]"  placeholder="Bank Address" value="'+bank_add+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="col-sm-4 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3 itsalink">City</label>';
                        html+='<div class="col-md-9">';
                        html+='<select class="form-control prbank cityselect select2" name="bank_details['+p+'][bank_city]" id="bank_city" placeholder="Select city">';
                        html+='<option value=""></option>';
                        for (c = 0; c < City.length; c++) {
                            if(bank_details[p]['bank_city']==City[c]['_id']){
                                html+='<option value="'+City[c]['_id']+'" selected>'+City[c]['CityName']+'</option>';
                            }else{
                                html+='<option value="'+City[c]['_id']+'">'+City[c]['CityName']+'</option>';
                            }
                         }
                        html+='</select>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="row">';
                        html+='<div class="col-sm-4 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">PIN NO</label>';
                        html+='<div class="col-md-9">';
                        if(bank_details[p]['bank_pin']!=undefined) var bank_pin = bank_details[p]['bank_pin'];
                        else var bank_pin ='';
                        html+='<input type="text" class="form-control digits" name="bank_details['+p+'][bank_pin]" placeholder="PIN NO" value="'+bank_pin+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="col-sm-4 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">IFSC</label>';
                        html+='<div class="col-md-9">';
                        if(bank_details[p]['bank_ifsc']!=undefined) var bank_ifsc = bank_details[p]['bank_ifsc'];
                        else var bank_ifsc ='';
                        html+='<input type="text" class="form-control" name="bank_details['+p+'][bank_ifsc]" placeholder="IFSC" value="'+bank_ifsc+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="col-sm-4 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">AccountNo</label>';
                        html+='<div class="col-md-9">';
                        if(bank_details[p]['bnk_ac_no']!=undefined) var bnk_ac_no = bank_details[p]['bnk_ac_no'];
                        else var bnk_ac_no ='';
                        html+='<input type="text" class="form-control " name="bank_details['+p+'][bnk_ac_no]" placeholder="AccountNo" value="'+bnk_ac_no+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                    }
            }
                $('#datanm').html(html);
                $(".cityselect").select2({
                    placeholder: "Select City",
                    allowClear: true,
                });
                $('.ptype_descr').focus();
                $("#jobmarkmast").attr("action", "/jobworkers_mast/update_jobworkmaster/" + jobid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});

////finish Good Master
$(document).on('click', '.addsingleproduct', function()
{
    lstidx = $("input[name*='cntrer']").length + 1;
    var values = $("input[name='cntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/finishgood_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
               var groupmaster = data['groupmaster'];
               var rowmatname = data['rowmatname'];
                var new_div = document.createElement('div');
                var new_div ='<tr id="removefg'+counter+'">';
                new_div+='<td>';
                new_div+='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div+='<select name="fg_product_group['+counter+'][product_name]" onchange="getrateprdt('+counter+')" style="width:240px" id="product_name'+counter+'" class="form-control selectproductfocus productplace">';
                new_div+='<option value=""></option>';
                for (g = 0; g < rowmatname.length; g++) {
                          new_div+='<option value="'+rowmatname[g]['_id']+'">'+rowmatname[g]['mainshortdescnm']+'</option>';
                }
                new_div+='</select>';
                new_div+='</td>';
                new_div+='<td><input type="text" name="fg_product_group['+counter+'][qty]" style="text-align: right" placeholder="qty" oninput="calfg('+counter+')" id="qty'+counter+'" class="form-control number"></td>';
                new_div+='<td><input type="text" name="fg_product_group['+counter+'][fiforate]" style="text-align: right" placeholder="Sth / FIFO Rate" oninput="calfg('+counter+')" id="fiforate'+counter+'" class="form-control number"></td>';
                new_div+='<td><input type="text" name="fg_product_group['+counter+'][amount]" style="text-align: right" placeholder="Amount" id="amount'+counter+'" class="form-control amountfocus amounttot number"></td>';
                new_div +='<td><a onclick="remove_fggroup('+counter+');" style="cursor:pointer;"><i class="fa fa-times" style="font-size: 20px;color: red;margin-left:12px;"></i></a></td>';
                new_div+='</tr>';
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $(".productplace").select2({
                    placeholder: "Product Name",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });    
  } 
});
function remove_fggroup(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#removefg"+id).remove();
        calfg(0);
    }
}
function calfg(id){
    var qty = $('#qty'+id).val();
    var fiforate = $('#fiforate'+id).val();
    var sum = 0;
    if(fiforate>0){
        $('#amount'+id).val(parseFloat(qty)*parseFloat(fiforate))
    }else{
        $('#amount'+id).val(parseFloat(qty)*parseFloat(1))
    }
    $('.amounttot').each(function(){
        if( $(this).val() )
            sum += parseFloat($(this).val());
    })
    $('#fgtotalamount').val(sum.toFixed(2));
}
function getsingle(){
    if ($('#single').is(":checked")){
        $('#singleid').hide();
        $('#setof').show();
        $('#comboiddisplay').show();
       
    }
}
function getcombo(){
    if ($('#combo').is(":checked")){
        $('#singleid').show();
        $('#setof').hide();
        $('#comboiddisplay').hide();
    }
}
function getstockdescnm(){
    var brandnm =  $('#brand option:selected').attr('data-name');
    var fgtype =  $('#fgtype option:selected').attr('data-name');
    var fgCategory =  $('#fgCategory option:selected').attr('data-name');
    var property1 = $('#property1').val();
    var size = $('#size').val();
    var skuid =  $('#skuid').val();
    var printid=  $('#printid option:selected').attr('data-name');
    var color=  $('#color option:selected').attr('data-name');
    var setofcombo =  $('#setofcombo').val();
    var html='';
      if(brandnm!=undefined)html+=''+brandnm+' ';
      if(fgtype!=undefined) html+=''+fgtype+' ';
      if(fgCategory!=undefined) html+=''+fgCategory+' ';
      if(property1!=undefined) html+=''+property1+'';
      if(size!='') html+=''+size+' ';
      if(printid!=undefined) html+=''+printid+' ';
      if(color!=undefined) html+=''+color+' ';
      if(setofcombo!='') html+='Set Of '+setofcombo+' ';
      if(skuid!=undefined) html+=''+skuid+'';
    $('#stockdscnm').val(html);
}
$(document).on('click', '.addcomboproduct', function()
{
    lstidx = $("input[name*='cntrercombo']").length + 1;
    var values = $("input[name='cntrercombo']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/finishgood_master/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
               var Stock_Unit = data['Stock_Unit'];
               var rowmatname = data['rowmatname'];
            //    console.log(rowmatname)
                var new_div = document.createElement('div');
                var new_div ='<tr id="removefg'+counter+'">';
                new_div+='<td>';
                new_div+='<input type="hidden" name="cntrercombo" value="'+counter+'" id="cntrercombo'+counter+'">';
                new_div+='<select name="fg_inputgroup['+counter+'][input_name]" onchange="getrate('+counter+')" style="width:240px" id="input_name'+counter+'" class="form-control prbank  selectproductfocusin productplacein">';
                new_div+='<option value=""></option>';
                for (g = 0; g < rowmatname.length; g++) {
                          new_div+='<option value="'+rowmatname[g]['_id']+'">'+rowmatname[g]['mainshortdescnm']+'</option>';
                }
                new_div+='</select>';
                new_div+='</td>';
                new_div+='<td><input type="text" style="text-align: right" name="fg_inputgroup['+counter+'][size1]" placeholder="Size 1" oninput="calccombo('+counter+')" id="sizeone'+counter+'" class="form-control numerals"></td>';
                new_div+='<td><input type="text" style="text-align: right" name="fg_inputgroup['+counter+'][size2]" placeholder="Size 2" oninput="calccombo('+counter+')" id="sizetwo'+counter+'" class="form-control numerals"></td>';
                new_div+='<td><input type="text" style="text-align: right" name="fg_inputgroup['+counter+'][pcs]" placeholder="Pcs 2" oninput="calccombo('+counter+')" id="pcs'+counter+'" class="form-control numerals"></td>';
                new_div+='<td><input type="text" style="text-align: right" name="fg_inputgroup['+counter+'][cons]" placeholder="Cons" oninput="calccombo('+counter+')" id="cons'+counter+'" class="form-control numerals"></td>';
                new_div+='<td><input type="text" style="text-align: right" name="fg_inputgroup['+counter+'][consumed]" placeholder="Consumed" oninput="calccombo('+counter+')" id="consumed'+counter+'" class="form-control numerals"></td>';
                new_div+='<td>';
                new_div+='<select class="form-control unitselect prbank" style="width: 120px;" name="fg_inputgroup['+counter+'][unit]" id="unit0">';
                new_div+='<option value=""></option>';
                for (g = 0; g < Stock_Unit.length; g++) {
                    new_div+='<option value="'+Stock_Unit[g]['_id']+'">'+Stock_Unit[g]['SKUName']+'</option>';
                }
                new_div+='{{/each}}';
                new_div+='</select>';
                new_div+='</td>';
                new_div+='<td><input type="text" style="text-align: right" name="fg_inputgroup['+counter+'][fiforate]" placeholder="FIFO Rate" oninput="calccombo('+counter+')" id="fiforateco'+counter+'" class="form-control numerals"></td>';
                new_div+='<td><input type="text" style="text-align: right" name="fg_inputgroup['+counter+'][actlamont]" placeholder="Actual/Amount" oninput="calccombo('+counter+')" id="actlamont'+counter+'" class="form-control amountfocusin actlamont numerals"></td>';
                new_div +='<td><a onclick="remove_fginputgroup('+counter+');" style="cursor:pointer;"><i class="fa fa-times" style="font-size: 20px;color: red;margin-left:12px;"></i></a></td>';
                new_div+='</tr>';
                $(new_div).insertBefore("#insert_input");
                counter++;
                member++;
                $(".productplacein").select2({
                    placeholder: "Input Name",
                    allowClear: true,
                });
                $(".unitselect").select2({
                    placeholder: "Select Unit",
                    allowClear: true,
                });
                $('.adjustmentstablein tr:nth-last-child(2)').find('.selectproductfocusin').focus() 
            }
        }
    });    
  } 
});
function remove_fginputgroup(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#removefg"+id).remove();
        calccombo(0);
        getjobworkr();
    }
}
function calccombo(id){
    var sizeone = $('#sizeone'+id).val();
    var sizetwo = $('#sizetwo'+id).val();
    var pcs = $('#pcs'+id).val();
    var cons = $('#cons'+id).val();
    var calc = (parseFloat(sizeone)*1);
    if(sizetwo!='')calc = (parseFloat(sizeone)*parseFloat(sizetwo));
    if(pcs!='') calc = (parseFloat(sizeone)*parseFloat(sizetwo)*parseFloat(pcs));
    if(cons!='')calc = (parseFloat(sizeone)*parseFloat(sizetwo)*parseFloat(pcs)*parseFloat(cons));
    $('#consumed'+id).val(calc.toFixed(3));
    var consumed = $('#consumed'+id).val();
    var fiforate = $('#fiforateco'+id).val();
    var actlamt = (parseFloat(consumed)*1);
    if(fiforate!='')actlamt = (parseFloat(consumed)*parseFloat(fiforate));
    $('#actlamont'+id).val(actlamt.toFixed(2))
    var sum = 0;
    $('.actlamont').each(function(){
        if( $(this).val() )
            sum += parseFloat($(this).val());
    })
    $('#materialcost').val(sum.toFixed(2));
    getjobworkr();
    
}
function getpackingexpense(){
    var sum = 0;
    $('.actlamont').each(function(){
        if( $(this).val() )
            sum += parseFloat($(this).val());
    })
    $('#materialcost').val(sum.toFixed(2));
    getjobworkr();
}
function getjobworkr(){
  
   var materialcost =  $('#materialcost').val();
   var sum = (parseFloat(materialcost)+parseFloat(0));
   var jobworkerval =  $('#jobworkerval').val();
   if(jobworkerval!='')sum = (parseFloat(materialcost)+parseFloat(jobworkerval));
   $('#totsatndrdcost').val(sum.toFixed(2));
}
function getrate(id){
    var input_name = $('#input_name'+id).val();
    $.ajax({
        type: 'GET',
        url: '/finishgood_master/getrawrate/'+input_name,
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                var rowmatname = data['rowmatname'];
                var rate = rowmatname.rate;
                $('#fiforateco'+id).val(rate);
                calccombo(id);
            }
        }
    });
    //alert(input_name);
}
function getrateprdt(id){
    var product_name = $('#product_name'+id).val();
    $.ajax({
        type: 'GET',
        url: '/finishgood_master/getrawrate/'+product_name,
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                var rowmatname = data['rowmatname'];
                var rate = rowmatname.rate;
                $('#fiforate'+id).val(rate);
            }
        }
    });
    //alert(input_name);
}
//raw material master
function getrawmatdescnm(){
    var rmatypnm =  $('#rmatypnm option:selected').attr('data-name'); 
    var rmquality =  $('#rmquality option:selected').attr('data-name'); 
    var printorplain = $('#printorplain').val(); 
    var rmsubquality =  $('#rmsubquality option:selected').attr('data-name');
    var additionalid = $('#additionalid').val(); 
    var size = $('#size').val(); 
    var html='';
    if(rmatypnm!=undefined)html+=''+rmatypnm+' ';
    if(rmquality!=undefined) html+=' '+rmquality+' ';
    if(additionalid!='') html+=''+additionalid+' ';
    if(rmsubquality!=undefined)html+=''+rmsubquality+' ';
    if(size!='') html+=''+size+' ';
    if(printorplain!='') html+=''+printorplain+'';
    $('#stockitemname').val(html);
    if(size!=''){
        var calcbom= (1/(parseFloat(size)*parseFloat(39)));
    $('#consuptionbom').val(calcbom.toFixed(5));
    }
    getshortdescnm(0);
}
function getshortdescnm(id){
    if(id==0){
        var values = $("input[name='cntrer']")
        .map(function(){return $(this).val();}).get();
        var idx = values[values.length-1];
            for (let id = 0; id <= idx.length; id++) {
            var stockitemname =  $('#stockitemname').val();
            var color =  $('#color'+id+' option:selected').attr('data-name');
            var prop =  $('#prop'+id).val();
            var html = ''+stockitemname+' ';
            if(color!=undefined)html+= ''+color+' ';
            if(prop!=undefined)html+= ''+prop+'';
            $('#mainshortdescnm'+id).val(html);
        }
    }
    else{
        var stockitemname =  $('#stockitemname').val();
        var color =  $('#color'+id+' option:selected').attr('data-name');
        var prop =  $('#prop'+id).val();
        var html = ''+stockitemname+' ';
        if(color!=undefined)html+= ''+color+' ';
        if(prop!=undefined)html+= ''+prop+'';
        $('#mainshortdescnm'+id).val(html);
    }
 }
//end raw material master
function getecommrceprdt(){
    var product_name = $('#product_name').val();
    window.open(
        '/ecommerceparty_master/ecommerce_submit/'+product_name,
        '_blank' // <- This is what makes it open in a new window.
        );
}
///ECOMMERCE MODULE ADD IMAGE GROUP IN MULTIPLE FUNCTION
$(document).on('click', '.addimage', function()
{
    var values = $("input[name='imgcntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
        var new_div = document.createElement('div');
        var new_div ='<tr id="removeimage'+counter+'">';
        new_div +='<td>';
        new_div +='<input type="hidden" name="imgcntrer" value="'+counter+'">';
        new_div +='<input type="text" name="imagelink_group['+counter+'][image_link]" placeholder="Image Links" class="form-control selectproductfocus amountfocus reminput">';
        new_div +='</td>';
        new_div +='<td><a onclick="remove_imagegroup('+counter+');" style="cursor:pointer;"><i class="fa fa-times" style="font-size: 20px;color: red;margin-left:12px;"></i></a></td>';
        new_div+='</tr>';
        $(new_div).insertBefore("#insert_image");
        counter++;
        member++;
        $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
    }
});
///ECOMMERCE MODULE REMOVE IMAGE GROUP IN MULTIPLE FUNCTION
function remove_imagegroup(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#removeimage"+id).remove();
    }
}
///ECOMMERCE MODULE ADD BULLET IN MULTIPLE FUNCTION
$(document).on('click', '.addbullet', function()
{
    var values = $("input[name='bulletcntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
        var new_div = document.createElement('div');
        var new_div ='<tr id="bulletramove'+counter+'">';
        new_div +='<td>';
        new_div +='<input type="hidden" name="bulletcntrer" value="'+counter+'">';
        new_div +='<input type="text" name="bullet_group['+counter+'][bullet_points]" placeholder="Bullet Points" class="form-control selectproductfocus reminputbullet amountfocusbullet">';
        new_div +='</td>';
        new_div +='<td><a onclick="remove_bullet('+counter+');" style="cursor:pointer;"><i class="fa fa-times" style="font-size: 20px;color: red;margin-left:12px;"></i></a></td>';
        new_div+='</tr>';
        $(new_div).insertBefore("#insert_bullet");
        counter++;
        member++;
        $('.adjustmentstablebullet tr:nth-last-child(2)').find('.selectproductfocus').focus() 
    }
});
///ECOMMERCE MODULE REMOVE BULLET IN MULTIPLE FUNCTION
function remove_bullet(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#bulletramove"+id).remove();
    }
}
///ECOMMERCE MODULE ADD ONLINE MAPPING IN MULTIPLE FUNCTION
$(document).on('click', '.addonlinemappine', function()
{
    var values = $("input[name='onlinemapcntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/ecommerceparty_master/onlineportalname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
               var Onlineportal = data['Onlineportal'];
                var new_div = document.createElement('div');
                var new_div ='<tr id="onlinemapremove'+counter+'">';
                new_div +='<td>';
                new_div +='<input type="hidden" name="onlinemapcntrer" value="'+counter+'">';
                new_div +='<input type="text" name="onlinemapping_group['+counter+'][party_name]" placeholder="Party Name" class="form-control selectproductfocusin remionlinemap">';
                new_div +='</td>';
                new_div +='<td>';
                new_div +='<select name="onlinemapping_group['+counter+'][portal_name]" style="width: 159px;" class="form-control productplacselect prbank">';
                new_div +='<option value=""></option>';
                for (g = 0; g < Onlineportal.length; g++) {
                 new_div +='<option value="'+Onlineportal[g]['_id']+'">'+Onlineportal[g]['onlineprtl_name']+'</option>';
                 }
                new_div +='</select>';
                new_div +='</td>';
                new_div +='<td><input type="text" name="onlinemapping_group['+counter+'][product_link]" placeholder="Product Link" class="form-control amountaddportalmap"></td>';
                new_div +='<td><a onclick="remove_onlinemap('+counter+');" style="cursor:pointer;"><i class="fa fa-times" style="font-size: 20px;color: red;margin-left:12px;"></i></a></td>';
                new_div+='</tr>';
                $(new_div).insertBefore("#insert_onlineportalmap");
                counter++;
                member++;
                $(".productplacselect").select2({
                    placeholder: "Portal Name",
                    allowClear: true,
                });
                $('.adjustmentonlinemapping tr:nth-last-child(2)').find('.selectproductfocusin').focus() 
            }
        }
    });    
  } 
});
///ECOMMERCE MODULE ADD ONLINE MAPPING IN REMOVE FUNCTION IN MULTIPLE FUNCTION
function remove_onlinemap(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#onlinemapremove"+id).remove();
    }
}
///ECOMMERCE MODULE ADD DEBITOR ALIES IN MULTIPLE FUNCTION
$(document).on('click', '.addbitoralies', function()
{
    var values = $("input[name='debotorcntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
        var new_div = document.createElement('div');
        var new_div ='<tr id="dibitorremove'+counter+'">';
        new_div +='<td>';
        new_div +='<input type="hidden" name="debotorcntrer" value="'+counter+'">';
        new_div +='<input type="text" name="debtoralias_group['+counter+'][ledger_name]" placeholder="Ledger Name" class="form-control remidebitor selectproductfocus">';
        new_div +='</td>';
        new_div +='<td><input type="text" name="debtoralias_group['+counter+'][debtor_code]" placeholder="Debtor Code" class="form-control"></td>';
        new_div +='<td><input type="text" name="debtoralias_group['+counter+'][sku_alias]" placeholder="SKU AlIas" class="form-control onfocusdebotor"></td>';
        new_div +='<td><a onclick="remove_debitor('+counter+');" style="cursor:pointer;"><i class="fa fa-times" style="font-size: 20px;color: red;margin-left:12px;"></i></a></td>';
        new_div+='</tr>';
        $(new_div).insertBefore("#insert_debitor");
        counter++;
        member++;
        $('.adjustdebitoralias tr:nth-last-child(2)').find('.selectproductfocus').focus() 
    }
});
///ECOMMERCE MODULE DELTE FUNCTION IN MULTIPLE
function remove_debitor(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#dibitorremove"+id).remove();
    }
}
///rohit mishra 30-01-2020
///SUPLIER MODULE IN EDIT FUNCTION
$(document).on('click', '.Edit_vendormaster', function () {
    var vendorid = $(this).attr('data-id');
    $('.loader').show();
    $.ajax({
        type: 'GET',
        url: '/supplier_mast/' + vendorid,
        dataType: 'json',
        success: function (response) {
            if (response['success'] == true) {
                var city = response['city'];
                var ACName = response['Vendor'].ACName;
                var Address1 = response['Vendor'].Address1;
                var Address2 = response['Vendor'].Address2;
                var Address3 = response['Vendor'].Address3;
                var CityName = response['Vendor'].CityName;
                var MobileNo = response['Vendor'].MobileNo;
                var GSTIN = response['Vendor'].GSTIN;
                var OpBalance = response['Vendor'].OpBalance;
                var dbcr = response['Vendor'].dbcr;
                var ac_pincode = response['Vendor'].ac_pincode;
                var GroupName = response['Vendor'].GroupName;
                var bank_group = response['Vendor'].ac_bank;
                // console.log(ac_bank);
                var venid = response['Vendor']._id;
                if(GroupName!=null){
                    var grpnm = GroupName.GroupName;
                    var grpid = GroupName._id;
                }else{
                    var grpnm = '';
                    var grpid = '';
                }
                var option = new Option(grpnm, grpid, true, true);
                $('#ac_groupname').append(option).trigger('change');
                $('#ac_groupname').trigger({
                    type: 'select2:select',
                    params: {
                        data: {"id": grpid, "text" : grpnm }
                    }
                });
                //city
                if(CityName!=null){
                    var citynm = CityName.CityName;
                    var cityid = CityName._id;
                }else{
                    var citynm = '';
                    var cityid = '';
                }
                var optioncity = new Option(citynm, cityid, true, true);
                $('#city_name').append(optioncity).trigger('change');
                $('#city_name').trigger({
                    type: 'select2:select',
                    params: {
                        data: {"id": cityid, "text" : citynm }
                    }
                });
                var html = '';
                if(bank_group!=null)
                {
                    for (p = 0; p < bank_group.length; p++) {
                        html+='<div data-repeater-list="ac_bank">';
                        html+='<div class="form-group bankrow clearfix" data-repeater-item>';
                        if(p!=0){
                         html+='<button class="delbankbtn" data-repeater-delete type="button"><i class="fa fa-close"></i> </button>';
                        }
                        html+='<div class="row">';
                        html+='<div class="col-sm-6 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">Bank Name</label>';
                        html+='<div class="col-md-9">';
                        if(bank_group[p]['bank_name']!=undefined) var ac_bank = bank_group[p]['bank_name'];
                        else var ac_bank ='';
                        html+='<input type="text"  class="form-control" name="ac_bank['+p+'][bank_name]" placeholder="Bank Name" value="'+ac_bank+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="col-sm-6 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">Bank Address</label>';
                        html+='<div class="col-md-9">';
                        if(bank_group[p]['bank_add']!=undefined) var bankadd = bank_group[p]['bank_add'];
                        else var bankadd ='';
                        html+='<input type="text"  class="form-control" name="ac_bank['+p+'][bank_add]"  placeholder="Bank Address" value="'+bankadd+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="col-sm-6 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3 itsalink">City</label>';
                        html+='<div class="col-md-9">';
                        html+='<select class="form-control prbank" required name="ac_bank['+p+'][bank_city]" id="bank_city">';
                        html+='<option value=""></option>';
                        for (c = 0; c < city.length; c++) {
                            if(bank_group[p]['bank_city']==city[c]['_id']){
                                html+='<option value="'+city[c]['_id']+'" selected>'+city[c]['CityName']+'</option>';
                            }else{
                                html+='<option value="'+city[c]['_id']+'">'+city[c]['CityName']+'</option>';
                            }
                          }
                        html+=' </select>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="row">';
                        html+='<div class="col-sm-12 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">IFSC</label>';
                        html+='<div class="col-md-9">';
                        if(bank_group[p]['bank_ifsc']!=undefined) var bank_ifsc = bank_group[p]['bank_ifsc'];
                        else var bank_ifsc ='';
                        html+='<input type="text" class="form-control" name="ac_bank['+p+'][bank_ifsc]" placeholder="IFSC" value="'+bank_ifsc+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="col-sm-12 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">AccountNo</label>';
                        html+='<div class="col-md-9">';
                        if(bank_group[p]['bnk_ac_no']!=undefined) var bnk_ac_no = bank_group[p]['bnk_ac_no'];
                        else var bnk_ac_no ='';
                        html+='<input type="text" class="form-control " name="ac_bank['+p+'][bnk_ac_no]" placeholder="AccountNo" value="'+bnk_ac_no+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='<div class="col-sm-12 col-md-4">';
                        html+='<div class="form-group form-md-line-input clearfix">';
                        html+='<label class="control-label col-md-3">SWIFT CODE</label>';
                        html+='<div class="col-md-9">';
                        if(bank_group[p]['swift_code']!=undefined) var swift_code = bank_group[p]['swift_code'];
                        else var swift_code ='';
                        html+='<input type="text" class="form-control" name="ac_bank['+p+'][swift_code]" placeholder="SWIFT CODE"  value="'+swift_code+'">';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                        html+='</div>';
                    }
                }
                $('#datanm').html(html);
                $('#ac_name').val(ACName);
                $('#ac_add1').val(Address1);
                $('#ac_add2').val(Address2);
                $('#ac_add3').val(Address3);
                $('#ac_phmob').val(MobileNo);
                $('#ac_gstin').val(GSTIN);
                $('#ac_opbal').val(OpBalance);
                $('#ac_open_type').val(dbcr);
                $('#pincode').val(ac_pincode);
                $('#formheading span').text('Edit');
                $("#suplliermaster").attr("action", "/supplier_mast/update_vender/" + venid);
            } else {
                $('.branddanger').html(response['message']);
                $('.branddanger').show();
                $('.brandsuccess').hide();
            }
            $('.loader').hide();
        },
        error: function (err) {
            console.log(err);
        }
    });
});
///RM STOCK MODULE DESCRIPTION ADD FUNCTION IN MULTIPLE
function getproductdesc(){
    var productCategory = $('#productCategory').val();
    var productType = $('#productType').val();
    var wareHouseName =  $('#wareHouseName').val();
    // alert(productType)
    $.ajax({
        type:'GET',
        url: '/stock_opening_module_rm/rmproductdetails',
        dataType:'json',
        data:
        {
            productCategory: productCategory,
            productType: productType,
            wareHouseName:wareHouseName,
        },
        success: function(response) {
            if(response['success'] == true) {
                $('.stockdescpritiondetail').show();
                $('#sevid').show();
                var prdtrm = response['prdtrm'];
                var Stock_Unit = response['Stock_Unit'];
                var MRN = response['MRN'];
                var html = '';
                for (p = 0; p < prdtrm.length; p++) {
                    if(MRN!=undefined){
                            var mrnid = MRN._id;
                            var mrngroup =MRN.sales_or_group;
                            var soqty ='';
                            var so_rate ='';
                            var unit ='';
                            var minStkQty ='';
                            var reOrderQty ='';
                            var maxStkQty ='';
                            var masterPack ='';
                            var groupid ='';
                            for (g = 0; g < mrngroup.length; g++) {
                                if(mrngroup[g]['so_disc']==prdtrm[p]['_id']){
                                   var soqty = mrngroup[g]['so_qty'];
                                   var so_rate = mrngroup[g]['so_rate'];
                                   var unit = mrngroup[g]['unit'];
                                   var minStkQty = mrngroup[g]['minStkQty'];
                                   var reOrderQty = mrngroup[g]['reOrderQty'];
                                   var maxStkQty = mrngroup[g]['maxStkQty'];
                                   var masterPack = mrngroup[g]['masterPack'];
                                   var groupid = mrngroup[g]['_id'];
                                }
                            }
                            
                    }
                    if(soqty!=null || soqty!=undefined)soqtyval = soqty;
                    else soqtyval='';
                    if(so_rate!=null || so_rate!=undefined)so_rateval = so_rate;
                    else so_rateval='';
                    if(minStkQty!=null || minStkQty!=undefined)minStkQtyval = minStkQty;
                    else minStkQtyval='';
                    if(reOrderQty!=null || reOrderQty!=undefined)reOrderQtyval = reOrderQty;
                    else reOrderQtyval='';
                    if(maxStkQty!=null || maxStkQty!=undefined)maxStkQtyval = maxStkQty;
                    else maxStkQtyval='';
                    if(masterPack!=null || masterPack!=undefined)masterPackval = masterPack;
                    else masterPackval='';
                    if(mrnid!=null || mrnid!=undefined)mrnidval = mrnid;
                    else mrnidval='';
                    if(unit!=null || unit!=undefined || unit!='')unitval = unit;
                    else unit='';
                    if(groupid!=null || groupid!=undefined || groupid!='')groupidval = groupid;
                    else groupidval='';
                    html+='<tr id="prabal'+p+'">';
                    html+='<td>';
                    html+='<input type="hidden" name="stock_opening_module_group['+p+'][groupid]" value="'+groupidval+'">';
                    html+='<input type="hidden" name="stock_opening_module_group['+p+'][mrn_id]" value="'+mrnidval+'">';
                    html+='<input type="hidden" name="cntrer" value="'+p+'" id="cntrer0">';
                    html+='<input class="form-control reminput selectproductfocus" value="'+prdtrm[p]['mainshortdescnm']+'" placeholder="Product Desc" style="width: 377px;" type="text"/>';
                    html+='<input type="hidden" style="width: 232px;" value="'+prdtrm[p]['_id']+'" name="stock_opening_module_group['+p+'][so_disc]"/>';
                    // html+='<select name="stock_opening_module_group[0][so_disc]" class="form-control prbank rmstockdescription" style="width: 377px;">';
                    // html+='<option value=""></option>';
                    // html+='</select>';
                    html+='</td>';

                    html+='<td>';
                    html+='<input class="form-control" value="'+soqtyval+'" placeholder="Qty" name="stock_opening_module_group['+p+'][so_qty]" type="text"/>';
                    html+='</td>';

                    html+='<td>';
                    html+='<input class="form-control " value="'+so_rateval+'" placeholder="Rate" name="stock_opening_module_group['+p+'][so_rate]" type="text"/>';
                    html+='</td>';

                    html+='<td>';
                    html+='<select class="form-control unitselect2 prbank select2" name="stock_opening_module_group['+p+'][unit]"  style="width: 120px;">';
                    html+='<option value=""></option>';
                    for (s = 0; s < Stock_Unit.length; s++) {
                        if(unitval==Stock_Unit[s]['_id']){
                            html+='<option value="'+Stock_Unit[s]['_id']+'" selected>'+Stock_Unit[s]['SKUName']+'</option>';
                        }else{
                            html+='<option value="'+Stock_Unit[s]['_id']+'">'+Stock_Unit[s]['SKUName']+'</option>';
                        }
                     }
                    html+='</select>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control " value="'+minStkQtyval+'" placeholder="Min Stk Qty" name="stock_opening_module_group['+p+'][minStkQty]" type="text"/>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control " value="'+reOrderQtyval+'" placeholder="Re-Order Qty"  name="stock_opening_module_group['+p+'][reOrderQty]" type="text"/>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control " value="'+maxStkQtyval+'" placeholder="Max Stk Qty" name="stock_opening_module_group['+p+'][maxStkQty]" type="text"/>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control amountfocus" value="'+masterPackval+'" placeholder="Master Pack"name="stock_opening_module_group['+p+'][masterPack]" type="text"/>';
                    html+='</td>';
                    if(p!=0){
                      html +="<td><a onclick='remove_updateproduct("+p+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td>";
                    }
                    html+='</tr>';
                }
                $(".stock_repeat_row tbody tr").not('tr#insert_product').remove();
                $('tr#insert_product').before(html);
                $(".unitselect2").select2({
                    placeholder: "Select Unit",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus()
            }else{
                swal({
                    title:'Oops!',
                    text:'No Pending Description',
                    buttons:false,
                    timer:1500
                })
                $(".stock_repeat_row tbody tr").not('tr#insert_product').remove();
                $('tr#insert_product').before(html);
                $('.stockdescpritiondetail').hide();
                $('#sevid').hide();
            }
        }
    })
}
///RM STOCK MODULE DESCRIPTION DELETE FUNCTION
$(document).on('click', '.delete_stockopingrm', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/stock_opening_module_rm/'+ id,
                success: function (response) {
                     window.location.href = '/stock_opening_module_rm/stock_opening_module_rm';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
///FG STOCK MODULE DESCRIPTION ADD FUNCTION IN MULTIPLE
$(document).on('click', '.addStockOpeningfg', function()
{
    var values = $("input[name='cntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    $.ajax({
        type: 'GET',
        url: '/stock_opening_module_fg/rawmatmastname',
        dataType: 'json',
        success: function (data) {
            if (data['success']) {
                var StockUnit = data['Stock_Unit'];
                var new_div = document.createElement('div');
                var new_div = "<tr class='product_wrapper' id='stock"+counter+"'>";
                new_div +='<td>';
                new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer'+counter+'">';
                new_div +='<select name="stock_opening_module_group['+counter+'][so_disc]" class="form-control selectproductfocus prbank productplace" style="width: 377px;">';
                new_div +='<option value=""></option>';
                new_div +='</select>';            
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Qty"  name="stock_opening_module_group['+counter+'][so_qty]" type="text"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Rate"  name="stock_opening_module_group['+counter+'][so_rate]" type="text"/></td>';
                new_div +='<td>';
                new_div += '<select   name="stock_opening_module_group['+counter+'][unit]" "value=""  class="form-control prbank  unit" style="width:120px;">';
                new_div +='<option value=""></option>';
                for (j = 0; j < StockUnit.length; j++) {
                        new_div += "<option value='" + StockUnit[j]['_id'] + "' data-product_id='" + StockUnit[j]['_id'] + "'>" + StockUnit[j]['SKUName'] + "</option>";
                }
                new_div +='</select></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Min Stk Qty"  name="stock_opening_module_group['+counter+'][minStkQty]" type="text"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Re-Order Qty"  name="stock_opening_module_group['+counter+'][reOrderQty]" type="text"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control " placeholder="Max Stk Qty"  name="stock_opening_module_group['+counter+'][maxStkQty]" type="text"/></td>';
                new_div +='<td>';
                new_div +='<input class="form-control amountfocus" placeholder="Master Pack"  name="stock_opening_module_group['+counter+'][masterPack]" type="text"/></td>';
                new_div +="<td><a onclick='remove_stockmodulefg("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
                $(new_div).insertBefore("#insert_product");
                counter++;
                member++;
                $('.productplace').select2({
                    placeholder: 'Product Description',
                    maximumSelectionLength: 3,
                    allowClear: true,
                    ajax:{
                        type: "GET",
                        url: '/stock_opening_module_fg/getshortdesciption',
                        dataType: 'json',
                        data: function (term) {
                            return {
                                term: term
                            };
                        },            
                        success: function (data) {
                           console.log(data);
                        }
                    }
                });
                $(".unit").select2({
                    placeholder: "Select Unit",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
                
            }
        }
    });
  } 
});
///FG STOCK MODULE DESCRIPTION IN REMOVE FUNCTION
function remove_stockmodulefg(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#stock"+id).remove();
    }
}
///FG STOCK MODULE DESCRIPTION
function getproductdescfg(){
    var productCategory = $('#productCategory').val();
    var productType = $('#productType').val();
    var wareHouseName = $('#wareHouseName').val();
    $.ajax({
        type:'GET',
        url: '/stock_opening_module_fg/rmproductdetails',
        dataType:'json',
        data:
        {
            productCategory: productCategory,
            productType: productType,
            wareHouseName:wareHouseName,
        },
        success: function(response) {
            if(response['success'] == true) {
                $('.stockdescpritiondetail').show();
                $('#sevid').show();
                var prdtrm = response['prdtrm'];
                var Stock_Unit = response['Stock_Unit'];
                var MRN = response['MRN'];
                var html = '';
                for (p = 0; p < prdtrm.length; p++) {
                    if(MRN!=undefined){
                            var mrnid = MRN._id;
                            var mrngroup =MRN.sales_or_group;
                            var soqty ='';
                            var so_rate ='';
                            var unit ='';
                            var minStkQty ='';
                            var reOrderQty ='';
                            var maxStkQty ='';
                            var masterPack ='';
                            var groupid ='';
                            for (g = 0; g < mrngroup.length; g++) {
                                if(mrngroup[g]['so_disc']==prdtrm[p]['_id']){
                                   var soqty = mrngroup[g]['so_qty'];
                                   var so_rate = mrngroup[g]['so_rate'];
                                   var unit = mrngroup[g]['unit'];
                                   var minStkQty = mrngroup[g]['minStkQty'];
                                   var reOrderQty = mrngroup[g]['reOrderQty'];
                                   var maxStkQty = mrngroup[g]['maxStkQty'];
                                   var masterPack = mrngroup[g]['masterPack'];
                                   var groupid = mrngroup[g]['_id'];
                                }
                            }
                    }
                    if(soqty!=null || soqty!=undefined)soqtyval = soqty;
                    else soqtyval='';
                    if(so_rate!=null || so_rate!=undefined)so_rateval = so_rate;
                    else so_rateval='';
                    if(minStkQty!=null || minStkQty!=undefined)minStkQtyval = minStkQty;
                    else minStkQtyval='';
                    if(reOrderQty!=null || reOrderQty!=undefined)reOrderQtyval = reOrderQty;
                    else reOrderQtyval='';
                    if(maxStkQty!=null || maxStkQty!=undefined)maxStkQtyval = maxStkQty;
                    else maxStkQtyval='';
                    if(masterPack!=null || masterPack!=undefined)masterPackval = masterPack;
                    else masterPackval='';
                    if(mrnid!=null || mrnid!=undefined)mrnidval = mrnid;
                    else mrnidval='';
                    if(unit!=null || unit!=undefined || unit!='')unitval = unit;
                    else unit='';
                    if(groupid!=null || groupid!=undefined || groupid!='')groupidval = groupid;
                    else groupidval='';
                    html+='<tr id="stock'+p+'">';
                    html+='<td>';
                    html+='<input type="hidden" name="stock_opening_module_group['+p+'][mrn_id]" value="'+mrnidval+'">';
                    html+='<input type="hidden" name="stock_opening_module_group['+p+'][groupid]" value="'+groupidval+'">';
                    html+='<input type="hidden" name="cntrer" value="'+p+'" id="cntrer0">';
                    html+='<input class="form-control reminput selectproductfocus" value="'+prdtrm[p]['mainshortdescnm']+'" placeholder="Product Desc" style="width: 377px;" type="text"/>';
                    html+='<input type="hidden" value="'+prdtrm[p]['_id']+'" name="stock_opening_module_group['+p+'][so_disc]"/>';
                    // html+='<select name="stock_opening_module_group[0][so_disc]" class="form-control prbank rmstockdescription" style="width: 377px;">';
                    // html+='<option value=""></option>';
                    // html+='</select>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control" value="'+soqtyval+'" placeholder="Qty" name="stock_opening_module_group['+p+'][so_qty]" type="text"/>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control " value="'+so_rateval+'" placeholder="Rate" name="stock_opening_module_group['+p+'][so_rate]" type="text"/>';
                    html+='</td>';
                    html+='<td>';
                    html+='<select class="form-control unitselect2 prbank select2" name="stock_opening_module_group['+p+'][unit]"  style="width: 120px;">';
                    html+='<option value=""></option>';
                    for (s = 0; s < Stock_Unit.length; s++) {
                        if(unitval==Stock_Unit[s]['_id']){
                            html+='<option value="'+Stock_Unit[s]['_id']+'" selected>'+Stock_Unit[s]['SKUName']+'</option>';
                        }else{
                            html+='<option value="'+Stock_Unit[s]['_id']+'">'+Stock_Unit[s]['SKUName']+'</option>';
                        }
                     }
                    html+='</select>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control " value="'+minStkQtyval+'" placeholder="Min Stk Qty" name="stock_opening_module_group['+p+'][minStkQty]" type="text"/>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control " value="'+reOrderQtyval+'" placeholder="Re-Order Qty"  name="stock_opening_module_group['+p+'][reOrderQty]" type="text"/>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control " value="'+maxStkQtyval+'" placeholder="Max Stk Qty" name="stock_opening_module_group['+p+'][maxStkQty]" type="text"/>';
                    html+='</td>';
                    html+='<td>';
                    html+='<input class="form-control amountfocus" value="'+masterPackval+'" placeholder="Master Pack"name="stock_opening_module_group['+p+'][masterPack]" type="text"/>';
                    html+='</td>';
                    if(p!=0){
                      html +="<td><a onclick='remove_stockmodulefg("+p+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td>";
                    }
                    html+='</tr>';
                }
                $(".stock_repeat_row tbody tr").not('tr#insert_product').remove();
                $('tr#insert_product').before(html);
                $(".unitselect2").select2({
                    placeholder: "Select Unit",
                    allowClear: true,
                });
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus()
            }else{
                swal({
                    title:'Oops!',
                    text:'No Pending Description',
                    buttons:false,
                    timer:1500
                })
                $(".stock_repeat_row tbody tr").not('tr#insert_product').remove();
                $('tr#insert_product').before(html);
                $('.stockdescpritiondetail').hide();
                $('#sevid').hide();
            }
        }
    })
}
$(document).on('click', '.delete_stockopingfg', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/stock_opening_module_fg/'+ id,
                success: function (response) {
                     window.location.href = '/stock_opening_module_fg/stock_opening_module_fg';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
///JW SETUP PRICE LIST RM
function getjwsetuprm(){
    var productCategory = $('#productCategory').val();
    var productType = $('#productType').val();
    var jobworkersnm = $('#jobworkersnm').val();
        $.ajax({
            type:'GET',
            url: '/jw_setup_rm/rmproductdetails',
            dataType:'json',
            data:
            {
                productCategory: productCategory,
                productType: productType,
                jobworkersnm:jobworkersnm,
            },
            success: function(response) {
                if(response['success'] == true) {
                    $('.stockdescpritiondetail').show();
                    $('#sevid').show();
                    var prdtrm = response['prdtrm'];
                    var jw_setup = response['jw_setup'];
                    // console.log(jw_setup)
                    var html = '';
                    for (p = 0; p < prdtrm.length; p++) {
                        var matrialrate ='';
                        var jwrate ='';
                        var totprice ='';
                        var jwid ='';
                        if(jw_setup!=undefined){
                            for (j = 0; j < jw_setup.length; j++) {
                                if(jw_setup[j]['productDesc']==prdtrm[p]['_id']){
                                    var matrialrate = jw_setup[j]['matrialrate'];
                                    var jwrate = jw_setup[j]['jwrate'];
                                    var totprice = jw_setup[j]['totprice'];
                                    var jwid = jw_setup[j]['_id'];
                                }
                            }
                         }  
                        html +='<tr id="jwsetup'+p+'">';
                        html +='<td>';
                        html +='<input type="hidden" name="cntrer" value="'+p+'" id="cntrer0">';
                        html +='<input class="form-control reminput" style="width: 682px;" placeholder="Product Name" value="'+prdtrm[p]['mainshortdescnm']+'" type="text"/>';
                        html +='<input name="productDesc['+p+']" type="hidden" value="'+prdtrm[p]['_id']+'"/>';
                        html +='<input name="jwid['+p+']" type="hidden" value="'+jwid+'"/>';
                        html +='</td>';
                        html +='<td>';
                        html +='<input class="form-control numerals" oninput="getjwcalc('+p+')" value="'+matrialrate+'" id="matrialrate'+p+'" placeholder="Material Rate" name="matrialrate['+p+']" type="text"/>';
                        html +='</td>';
                        html +='<td>';
                        html +='<input class="form-control numerals" oninput="getjwcalc('+p+')" value="'+jwrate+'" id="jwrate'+p+'" placeholder="Jw Rate" name="jwrate['+p+']" type="text"/>';
                        html +='</td>';
                        html +='<td>';
                        html +='<input class="form-control numerals totpricecal" id="totprice'+p+'" value="'+totprice+'" placeholder="Total Price"name="totprice['+p+']" type="text"/>';
                        html +='</td>';
                        // if(p!=0){
                        //   html +="<td><a onclick='remove_jwsetup("+p+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td>";
                        // }
                        html+='</tr>';
                    }
                    $(".stock_repeat_row tbody tr").not('tr#insert_product').remove();
                    $('tr#insert_product').before(html);
                    $('#matrialrate0').focus();
                    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus()
                }else{
                    swal({
                        title:'Oops!',
                        text:'No Pending Description',
                        buttons:false,
                        timer:1500
                    })
                    $(".stock_repeat_row tbody tr").not('tr#insert_product').remove();
                    $('tr#insert_product').before(html);
                    $('.stockdescpritiondetail').hide();
                    $('#sevid').hide();
                }
            }
        })
   
}
function remove_jwsetup(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#jwsetup"+id).remove();
        getjwcalc(0);
    }
}
///JW SETUP PRICE LIST CALCULATION
function getjwcalc(id){
    var matrialrate = $('#matrialrate'+id).val();
    var jwrate = $('#jwrate'+id).val();
    var totprice = (parseFloat(matrialrate));
    if(jwrate!='')totprice = (parseFloat(matrialrate)+parseFloat(jwrate));
    $('#totprice'+id).val(totprice.toFixed(2))
    var sum = 0;
    $('.totpricecal').each(function(){
        if( $(this).val() )
            sum += parseFloat($(this).val());
    })
    $('#totprice').val(sum.toFixed(2));
}
////JW SETUP FG DESCPRITION LIST
function getjwsetupfg(){
    var productCategory = $('#productCategory').val();
    var productType = $('#productType').val();
    var jobworkersnm = $('#jobworkersnm').val();
    $.ajax({
        type:'GET',
        url: '/jw_setup_fg/rmproductdetails',
        dataType:'json',
        data:
        {
            productCategory: productCategory,
            productType: productType,
            jobworkersnm:jobworkersnm,
        },
        success: function(response) {
            if(response['success'] == true) {
                $('.stockdescpritiondetail').show();
                $('#sevid').show();
                var prdtrm = response['prdtrm'];
                var jw_setup = response['jw_setup'];
                var html = '';
                for (p = 0; p < prdtrm.length; p++) {
                    var matrialrate ='';
                        var jwrate ='';
                        var totprice ='';
                        var jwid ='';
                        if(jw_setup!=undefined){
                            for (j = 0; j < jw_setup.length; j++) {
                                if(jw_setup[j]['productDesc']==prdtrm[p]['_id']){
                                    var matrialrate = jw_setup[j]['matrialrate'];
                                    var jwrate = jw_setup[j]['jwrate'];
                                    var totprice = jw_setup[j]['totprice'];
                                    var jwid = jw_setup[j]['_id'];
                                }
                            }
                         }  
                    html +='<tr id="jwsetup'+p+'">';
                    html +='<td>';
                    html +='<input type="hidden" name="cntrer" value="'+p+'" id="cntrer0">';
                    html +='<input class="form-control reminput" style="width: 682px;" placeholder="Product Name" value="'+prdtrm[p]['mainshortdescnm']+'" type="text"/>';
                    html +='<input name="productDesc['+p+']" type="hidden" value="'+prdtrm[p]['_id']+'"/>';
                    html +='<input name="jwid['+p+']" type="hidden" value="'+jwid+'"/>';
                    html +='</td>';
                    html +='<td>';
                    html +='<input class="form-control numerals" value="'+matrialrate+'" oninput="getjwcalc('+p+')" id="matrialrate'+p+'" placeholder="Material Rate" name="matrialrate['+p+']" type="text"/>';
                    html +='</td>';
                    html +='<td>';
                    html +='<input class="form-control numerals" value="'+jwrate+'" oninput="getjwcalc('+p+')" id="jwrate'+p+'" placeholder="Jw Rate" name="jwrate['+p+']" type="text"/>';
                    html +='</td>';
                    html +='<td>';
                    html +='<input class="form-control numerals totpricecal" value="'+totprice+'" id="totprice'+p+'" placeholder="Total Price"name="totprice['+p+']" type="text"/>';
                    html +='</td>';
                    // if(p!=0){
                    //   html +="<td><a onclick='remove_jwsetupfg("+p+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td>";
                    // }
                    html+='</tr>';
                }
                $(".stock_repeat_row tbody tr").not('tr#insert_product').remove();
                $('tr#insert_product').before(html);
                $('#matrialrate0').focus();
                $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus()
            }else{
                swal({
                    title:'Oops!',
                    text:'No Pending Description',
                    buttons:false,
                    timer:1500
                })
                $(".stock_repeat_row tbody tr").not('tr#insert_product').remove();
                $('tr#insert_product').before(html);
                $('.stockdescpritiondetail').hide();
                $('#sevid').hide();
            }
        }
    })
}
function remove_jwsetupfg(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#jwsetup"+id).remove();
        getjwcalc(0);
    }
}
$(document).on('click', '.delete_jw_setupfg', function (event) {
    event.preventDefault();
    $('.loader').show();
    let id = $(this).attr('data-id');
    swal({
        icon:'warning',
        title: "Sure",
        text:'Are you sure you want to delete it?',
        buttons: true,
        dangerMode:true
    }).then((willDelete) => {
        if (willDelete) {

            $.ajax({
                type: 'DELETE',
                url: '/jw_setup_fg/'+ id,
                success: function (response) {
                     window.location.href = '/jw_setup_fg/jw_setup_fg';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
      });
});
/////BOM for JW Module Create Formula add function
$(document).on('click', '.addbomjw', function()
{
    var values = $("input[name='cntrer']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    var new_div = document.createElement('div');
    var new_div = "<tr class='product_wrapper' id='stockmain"+counter+"'>";
    new_div +="<td>";
    new_div +='<input type="hidden" name="cntrer" value="'+counter+'" id="cntrer0">';
    new_div +='<select class="form-control prbank productplace selectproductfocus" required name="bomjwsetup_group['+counter+'][consumption]" style="width: 682px;">';
    new_div +='<option value=""></option>';
    new_div +='</select>';
    new_div +='</td>';
    new_div +='<td>';
    // onchange="getsizeconsumed('+counter+')"
    new_div +='<select name="bomjwsetup_group['+counter+'][inventory_tract]" style="width: 174px;" id="inventory_tract'+counter+'" class="form-control prbank invetryselect2">';
    new_div +='<option value=""></option>';
    new_div +='<option value="Y">Y</option>';
    new_div +='<option value="N">N</option>';
    new_div +='</select>';
    new_div +='</td>';
    new_div +='<td>';
    new_div +='<input class="form-control numerals" placeholder="Consumed (formula)" oninput="getbomcalc('+counter+')" name="bomjwsetup_group['+counter+'][consumed_formula]" id="consumed_formula'+counter+'" type="text"/>';
    new_div +='</td>';
    new_div +='<td>';
    new_div +='<input class="form-control numerals" placeholder="Jw Material Rate" oninput="getbomcalc('+counter+')" name="bomjwsetup_group['+counter+'][jw_materialrate]" id="jw_materialrate'+counter+'" type="text"/>';
    new_div +='</td>';
    new_div +='<td>';
    new_div +='<input class="form-control amountfocus numerals material_amount" placeholder="Material Amount" name="bomjwsetup_group['+counter+'][material_amount]" id="material_amount'+counter+'" type="text"/>';
    new_div +='</td>';
    new_div +="<td><a onclick='remove_bomjw("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
    // new_div +='<tr id="insertsisegroup'+counter+'" class="nofocus" style="display:none"></tr>';
    new_div +='<tr class="sizegroup" id="sizegroup'+counter+'">';
    new_div +='<td align="center">';
    new_div +='<table class="content-table" align="center">';
    // new_div +='<thead>';
    // new_div +='<tr>';
    // new_div +='<th>Size 1</th>';
    // new_div +='<th>Size 2</th>';
    // new_div +='<th>Pcs</th>';
    // new_div +='<th>Cons</th>';
    // new_div +='<th>Consumed</th>';
    // new_div +='</tr>';
    // new_div +='</thead>';
    new_div +='<tbody>';
    new_div +='<tr>';
    new_div +='<td>';
    new_div +='<input type="hidden" name="cntrersize" value="0" id="cntrersize0">';
    new_div +='<input class="form-control numerals" placeholder="Size 1" oninput="getsizeconsumedcalc(0,'+counter+')" id="sizeone0" name="bomjwsetup_group['+counter+'][bomsize_group][0][size1]" type="text"/>';
    new_div +='</td>';
    new_div +='<td>';
    new_div +='<input class="form-control numerals" placeholder="Size 2" oninput="getsizeconsumedcalc(0,'+counter+')" id="sizetwo0" name="bomjwsetup_group['+counter+'][bomsize_group][0][size2]" type="text"/>';
    new_div +='</td>';
    new_div +='<td>';
    new_div +='<input class="form-control numerals" placeholder="Pcs" oninput="getsizeconsumedcalc(0,'+counter+')" id="pcs0" name="bomjwsetup_group['+counter+'][bomsize_group][0][pcs]" type="text"/>';
    new_div +='</td>';
    new_div +='<td>';
    new_div +='<input class="form-control numerals" placeholder="Cons" oninput="getsizeconsumedcalc(0,'+counter+')" id="cons0" name="bomjwsetup_group['+counter+'][bomsize_group][0][cons]" type="text"/>';
    new_div +='</td>';
    new_div +='<td>';
    new_div +='<input class="form-control numerals consumed'+counter+' amountfocusinsizegro"  placeholder="Consumed" oninput="getsizeconsumedcalc(0,'+counter+')" id="consumed0" name="bomjwsetup_group['+counter+'][bomsize_group][0][consumed]" type="text"/>';
    new_div +='</td>';
    new_div +='</tr>';
    new_div +='<tr id="insert_bomsizegroup'+counter+'">';
    new_div +='<td></td>';
    new_div +='<td></td>';
    new_div +='<td><center><a onclick="addsizegrop('+counter+')" style="font-size: 30px;cursor:pointer;" id="addsize"><i class="fa fa-plus" aria-hidden="true"></i></a></center></td>';
    new_div +='<td></td>';
    new_div +='<td><input type="text" class="form-control numerals" id="consumedformulacal'+counter+'"></td>';
    new_div +='</tr>';
    new_div +='</tbody>';
    new_div +='</table>';
    new_div +='</td>';
    
    new_div +='</tr>';
    $(new_div).insertBefore("#insert_product");
    counter++;
    member++;
    $('.adjustmentstable tr:nth-last-child(2)').find('.selectproductfocus').focus() 
    $('.productplace').select2({
        placeholder: 'Please Select Consumption',
        maximumSelectionLength: 3,
        allowClear: true,
        ajax:{
            type: "GET",
            url: '/bomof_jw/getrmname',
            dataType: 'json',
            data: function (term) {
                return {
                    term: term
                };
            },            
            success: function (data) {
                
            }
        }
    });
    $(".invetryselect2").select2({
        placeholder: "Inventory Track",
        allowClear: true,
    });       
 }
});
function remove_bomjw(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#insertsisegroup"+id).remove();
        $("#stockmain"+id).remove();
        getbomcalc(0);
        getsizeconsumedcalc(0)
    }
}
function addsizegrop(id){
    var values = $("input[name='cntrersize']")
    .map(function(){return $(this).val();}).get();
    var idx = values[values.length-1]
    lstidx = parseInt(idx)+1;
    memberp = lstidx;
    counter=lstidx;
    var bomindex = $("input[name='bomjwindex']").map(function(){return $(this).val();}).get();
  if (counter == limit)
  {
    alert("You have reached the limit of adding " +counter+ " inputs");
  }
  else
  {
    var new_div = document.createElement('div');
    var new_div = "<tr class='sizegroup' id='sizegroup"+counter+"'>";
    new_div+='<td>';
    new_div+='<input type="hidden" name="cntrersize" value="'+counter+'" id="cntrer0">';
    // new_div+='<input type="hidden" name="bomjwindex" value="'+bomindex+'" id="bomjwindex">';
    new_div+='<input class="form-control selectproductfocusin removesizegrp numerals" placeholder="Size 1" oninput="getsizeconsumedcalc('+counter+','+id+')" name="bomjwsetup_group['+id+'][bomsize_group]['+counter+'][size1]"  id="sizeone'+counter+'" type="text"/>';
    new_div+='</td>';
    new_div+='<td>';
    new_div+='<input class="form-control numerals" placeholder="Size 2" oninput="getsizeconsumedcalc('+counter+','+id+')"  id="sizetwo'+counter+'" name="bomjwsetup_group['+id+'][bomsize_group]['+counter+'][size2]" type="text"/>';
    new_div+='</td>';
    new_div+='<td>';
    new_div+='<input class="form-control numerals" placeholder="Pcs" oninput="getsizeconsumedcalc('+counter+','+id+')" id="pcs'+counter+'" name="bomjwsetup_group['+id+'][bomsize_group]['+counter+'][pcs]"  type="text"/>';
    new_div+='</td>';
    new_div+='<td>';
    new_div+='<input class="form-control numerals" placeholder="Cons" oninput="getsizeconsumedcalc('+counter+','+id+')"  id="cons'+counter+'" name="bomjwsetup_group['+id+'][bomsize_group]['+counter+'][cons]" type="text"/>';
    new_div+='</td>';
    new_div+='<td>';
    new_div+='<input class="form-control amountfocusinsizegro numerals consumed'+counter+'" placeholder="Consumed" id="consumed'+counter+'" name="bomjwsetup_group['+id+'][bomsize_group]['+counter+'][consumed]" type="text"/>';
    new_div+='</td>';
    new_div +="<td><a onclick='remove_bomsizegroup("+counter+");' style='cursor:pointer;'><i class='fa fa-times' style='font-size: 20px;color: red;margin-left:12px;'></i></a></td></tr>";
    $(new_div).insertBefore("#insert_bomsizegroup"+id);
    // $('.adjustmentstablein tr:nth-last-child(2)').find('.selectproductfocusin').focus() 
    // glbidx = counter;
    counter++;
    member++;
    
}
}
function remove_bomsizegroup(id){
    var strconfirm = confirm("Are you sure you want to delete this element");
    if (strconfirm == true) {
        $("#sizegroup"+id).remove();
        getsizeconsumedcalc(0,0);
    }
}
function getsizeconsumedcalc(id,bomindex){
    var sizeone = $('#sizeone'+id).val();
    var sizetwo = $('#sizetwo'+id).val();
    var pcs = $('#pcs'+id).val();
    var cons = $('#cons'+id).val();
    var consumed = (parseFloat(sizeone));
    if(sizetwo!='')consumed =(parseFloat(sizeone)*parseFloat(sizetwo));
    if(pcs!='')consumed =(parseFloat(sizeone)*parseFloat(sizetwo)*parseFloat(pcs)); 
    if(cons!='')consumed =(parseFloat(sizeone)*parseFloat(sizetwo)*parseFloat(pcs)*parseFloat(cons)); 
    $('#consumed'+id).val(consumed.toFixed(2))
    var sum = 0;
    $('.consumed'+id).each(function(){
        if( $(this).val() )
            sum += parseFloat($(this).val());
    })
    $('#consumedformulacal'+bomindex).val(sum.toFixed(2));
    $('#consumed_formula'+bomindex).val(sum.toFixed(2));
}
// $(document).on("click", "#bomsave_change", function () {
//     var bomindex = $('#bomjwindex').val();
//     var consumedformulacal = $('#consumedformulacal'+bomindex).val();
//     $('#consumed_formula'+bomindex).val(consumedformulacal);
//     var main_loop_id = 0;
//     var result;
//     for (i = 0; i <= glbidx; i++) {
//         var sizeone = $('#sizeone'+i).val();
//         var sizetwo = $('#sizetwo'+i).val();
//         var pcs = $('#pcs'+i).val();
//         var cons = $('#cons'+i).val();
//         var consumed = $('#consumed'+i).val();
//         if(consumed!=undefined && sizetwo!=undefined && pcs!=undefined && cons!=undefined && consumed!=undefined){
//             result+= "<tr class='product_wrapper' id='stockid"+main_loop_id+"'>";
//             result+='<td>';
//             result+='<input class="form-control nofocus" value="'+sizeone+'" placeholder="Size 1" name="bomjwsetup_group['+bomindex+'][bomsize_group]['+main_loop_id+'][size1]" type="text"/>';
//             result+='</td>';
//             result+='<td>';
//             result+='<input class="form-control nofocus" value="'+sizetwo+'" placeholder="Size 2" name="bomjwsetup_group['+bomindex+'][bomsize_group]['+main_loop_id+'][size2]" type="text"/>';
//             result+='</td>';
//             result+='<td>';
//             result+='<input class="form-control numerals nofocus" value="'+pcs+'" placeholder="Pcs"  name="bomjwsetup_group['+bomindex+'][bomsize_group]['+main_loop_id+'][pcs]" type="text"/>';
//             result+='</td>';
//             result+='<td>';
//             result+='<input class="form-control numerals nofocus" value="'+cons+'" placeholder="Cons" name="bomjwsetup_group['+bomindex+'][bomsize_group]['+main_loop_id+'][cons]" type="text"/>';
//             result+='</td>';
//             result+='<td>';
//             result+='<input class="form-control numerals nofocus" value="'+consumed+'" placeholder="Consumed" name="bomjwsetup_group['+bomindex+'][bomsize_group]['+main_loop_id+'][consumed]" type="text"/>';
//             result+='</td>';
//             result+='</tr>';
//             main_loop_id++;
//         }
//         }
//         result+='<tr>';
//         result+='<td></td>';
//         result+='<td></td>';
//         result+='<td></td>';
//         result+='<td></td>';
//         result+='<td><input type="text" class="form-control numerals nofocus" value="'+consumedformulacal+'" name="consumedformulacal" id="consumedformulacal'+bomindex+'"></td>';
//         result+='<td></td>';
//         result+='</tr>';
//         console.log(result)
//     $('#bomsupport').modal('hide');
//     $('#insertsisegroup'+bomindex).html(result);
// });

function getbomcalc(id){
    var consumed_formula = $('#consumed_formula'+id).val();
    var jw_materialrate = $('#jw_materialrate'+id).val();
    var matamt = (parseFloat(consumed_formula));
    if(jw_materialrate!='')matamt = (parseFloat(consumed_formula)*parseFloat(jw_materialrate));
    $('#material_amount'+id).val(matamt.toFixed(1));
    var sum = 0;
    $('.material_amount').each(function(){
        if( $(this).val() )
            sum += parseFloat($(this).val());
    })
    $('#material_cost_total').val(sum.toFixed(2));
    bomjobworkr();
}
function bompackingexpense(){
    var sum = 0;
    $('.material_amount').each(function(){
        if( $(this).val() )
            sum += parseFloat($(this).val());
    })
    $('#material_cost_total').val(sum.toFixed(2));
    bomjobworkr();
}
function bomjobworkr(){
  
    var materialcost =  $('#material_cost_total').val();
    var sum = (parseFloat(materialcost)+parseFloat(0));
    var jobwork_costperpc =  $('#jobwork_costperpc').val();
    if(jobwork_costperpc!='')sum = (parseFloat(materialcost)+parseFloat(jobwork_costperpc));
    $('#total_standard_cost').val(sum.toFixed(2));
 }